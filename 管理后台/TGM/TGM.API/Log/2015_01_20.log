#Software: iisexpress
#ProcessID: 6080
#AppDomain: /LM/W3SVC/2/ROOT-1-130662013643388183
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
12:23:18.166 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
12:23:18.176 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
12:23:18.176 1 N - 使用数据库方式：独占，加大缓存权重
12:23:18.176 1 N - 一级缓存：关闭缓存
12:23:18.206 1 N - [DB]GetSchema("MetaDataCollections")
12:23:18.251 1 N - [DB]GetSchema("ReservedWords")
12:23:18.265 1 N - [DB]GetSchema("Databases", "tgm")
12:23:18.350 1 N - [DB]GetSchema("Tables")
12:23:18.468 1 N - [DB]GetSchema("Columns")
12:23:18.514 1 N - [DB]GetSchema("Indexes")
12:23:18.549 1 N - [DB]GetSchema("IndexColumns")
12:23:18.590 1 N - [DB]GetSchema("DataTypes")
12:23:18.712 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
12:23:18.797 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
12:23:18.797 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
12:23:18.797 1 N - DB待检查表架构的实体个数：8
12:23:18.938 1 N - 检查连接[DB/SqlServer]的数据库架构耗时225ms
12:23:18.939 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
12:23:18.969 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
12:23:19.009 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc

#Software: iisexpress
#ProcessID: 10036
#AppDomain: /LM/W3SVC/2/ROOT-1-130662017337850158
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
12:28:59.902 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
12:28:59.914 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
12:28:59.914 1 N - 使用数据库方式：独占，加大缓存权重
12:28:59.915 1 N - 一级缓存：关闭缓存
12:28:59.941 1 N - [DB]GetSchema("MetaDataCollections")
12:28:59.966 1 N - [DB]GetSchema("ReservedWords")
12:28:59.980 1 N - [DB]GetSchema("Databases", "tgm")
12:29:00.073 1 N - [DB]GetSchema("Tables")
12:29:00.205 1 N - [DB]GetSchema("Columns")
12:29:00.251 1 N - [DB]GetSchema("Indexes")
12:29:00.309 1 N - [DB]GetSchema("IndexColumns")
12:29:00.343 1 N - [DB]GetSchema("DataTypes")
12:29:00.452 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
12:29:00.535 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
12:29:00.535 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
12:29:00.536 1 N - DB待检查表架构的实体个数：8
12:29:00.660 1 N - 检查连接[DB/SqlServer]的数据库架构耗时209ms
12:29:00.661 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
12:29:00.691 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
12:29:00.726 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
12:29:09.509 13 W - [tgm]GetSchema("MetaDataCollections")
12:29:09.513 13 W - [tgm]GetSchema("ReservedWords")
12:29:09.519 13 W - [tgm]GetSchema("Databases", "tgm")
12:29:09.684 13 W - [tgm]GetSchema("Tables")
12:29:09.949 13 W - [tgm]GetSchema("Columns")
12:29:10.052 13 W - [tgm]GetSchema("Indexes")
12:29:10.130 13 W - [tgm]GetSchema("IndexColumns")
12:29:10.206 13 W - [tgm]GetSchema("DataTypes")
12:29:10.378 13 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
12:29:10.451 13 W - 开始检查连接[tgm/SqlServer]的数据库架构……
12:29:10.504 13 W - [tgm]的所有实体类（0个）：
12:29:10.504 13 W - [tgm]需要检查架构的实体类（0个）：
12:29:10.504 13 W - 检查连接[tgm/SqlServer]的数据库架构耗时53ms
12:29:10.504 13 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
12:29:10.583 13 W - Select * From tgm_platform Where id=1
12:29:12.036 11 W - [tgm]GetSchema("Tables")
12:29:12.296 11 W - [tgm]GetSchema("Columns")
12:29:12.387 11 W - [tgm]GetSchema("Indexes")
12:29:12.469 11 W - [tgm]GetSchema("IndexColumns")
12:29:12.549 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
12:29:12.900 11 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
12:29:13.014 11 W - Select * From tgm_platform Where id=1
12:29:13.207 11 W - Select * From tgm_platform Where id=1
12:29:28.258 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
12:29:28.325 10 W - Select * From tgm_platform Order By  createtime desc
12:29:52.270 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
12:29:56.527 7 W - Select * From tgm_server Order By id Desc
12:30:03.182 7 W - [tgm]GetSchema("Tables")
12:30:03.433 7 W - [tgm]GetSchema("Columns")
12:30:03.522 7 W - [tgm]GetSchema("Indexes")
12:30:03.604 7 W - [tgm]GetSchema("IndexColumns")
12:30:03.683 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
12:30:03.756 7 W - Select Count(*) From tgm_record_pay
12:30:03.818 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
12:30:12.910 7 W - Select * From tgm_platform Order By id Desc
12:31:58.682 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
12:31:58.753 11 W - Select * From tgm_platform Order By  createtime desc
12:32:02.574 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
12:32:02.643 6 W - Select * From tgm_platform Order By  createtime desc
12:32:11.731 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
12:32:13.342 11 W - Select * From tgm_server Order By id Desc
12:32:13.936 11 W - Select Count(*) From tgm_record_pay
12:32:13.999 11 W - Select Top 10 * From tgm_record_pay Order By id Desc
12:32:14.370 11 W - Select * From tgm_platform Order By id Desc

#Software: iisexpress
#ProcessID: 10616
#AppDomain: /LM/W3SVC/2/ROOT-1-130662038151481403
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
13:03:42.124 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
13:03:42.133 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
13:03:42.134 1 N - 使用数据库方式：独占，加大缓存权重
13:03:42.134 1 N - 一级缓存：关闭缓存
13:03:42.163 1 N - [DB]GetSchema("MetaDataCollections")
13:03:42.189 1 N - [DB]GetSchema("ReservedWords")
13:03:42.203 1 N - [DB]GetSchema("Databases", "tgm")
13:03:42.279 1 N - [DB]GetSchema("Tables")
13:03:42.416 1 N - [DB]GetSchema("Columns")
13:03:42.464 1 N - [DB]GetSchema("Indexes")
13:03:42.499 1 N - [DB]GetSchema("IndexColumns")
13:03:42.543 1 N - [DB]GetSchema("DataTypes")
13:03:42.657 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
13:03:42.733 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:03:42.733 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:03:42.734 1 N - DB待检查表架构的实体个数：8
13:03:42.876 1 N - 检查连接[DB/SqlServer]的数据库架构耗时219ms
13:03:42.876 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
13:03:42.904 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:03:42.933 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
13:03:56.672 6 W - [tgm]GetSchema("MetaDataCollections")
13:03:56.676 6 W - [tgm]GetSchema("ReservedWords")
13:03:56.682 6 W - [tgm]GetSchema("Databases", "tgm")
13:03:56.849 6 W - [tgm]GetSchema("Tables")
13:03:57.115 6 W - [tgm]GetSchema("Columns")
13:03:57.210 6 W - [tgm]GetSchema("Indexes")
13:03:57.288 6 W - [tgm]GetSchema("IndexColumns")
13:03:57.366 6 W - [tgm]GetSchema("DataTypes")
13:03:57.551 6 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:03:57.622 6 W - 开始检查连接[tgm/SqlServer]的数据库架构……
13:03:57.675 6 W - [tgm]的所有实体类（0个）：
13:03:57.676 6 W - [tgm]需要检查架构的实体类（0个）：
13:03:57.676 6 W - 检查连接[tgm/SqlServer]的数据库架构耗时54ms
13:03:57.676 6 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
13:03:57.753 6 W - Select * From tgm_platform Where id=1
13:03:59.158 5 W - [tgm]GetSchema("Tables")
13:03:59.428 5 W - [tgm]GetSchema("Columns")
13:03:59.529 5 W - [tgm]GetSchema("Indexes")
13:03:59.608 5 W - [tgm]GetSchema("IndexColumns")
13:03:59.692 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:04:00.019 5 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
13:04:00.088 5 W - Select * From tgm_platform Where id=1
13:04:00.161 5 W - Select * From tgm_platform Where id=1
13:04:07.671 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:04:07.741 5 W - Select * From tgm_platform Order By  createtime desc
13:04:25.398 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:04:25.470 11 W - Select * From tgm_server Order By id Desc
13:04:25.608 11 W - [tgm]GetSchema("Tables")
13:04:25.862 11 W - [tgm]GetSchema("Columns")
13:04:25.952 11 W - [tgm]GetSchema("Indexes")
13:04:26.031 11 W - [tgm]GetSchema("IndexColumns")
13:04:26.106 11 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:04:26.174 11 W - Select Count(*) From tgm_record_pay
13:04:26.236 11 W - Select Top 10 * From tgm_record_pay Order By id Desc
13:04:26.297 11 W - Select * From tgm_platform Order By id Desc

#Software: iisexpress
#ProcessID: 7028
#AppDomain: /LM/W3SVC/2/ROOT-1-130662041166712067
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
13:08:42.597 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
13:08:42.606 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
13:08:42.606 1 N - 使用数据库方式：独占，加大缓存权重
13:08:42.606 1 N - 一级缓存：关闭缓存
13:08:42.637 1 N - [DB]GetSchema("MetaDataCollections")
13:08:42.662 1 N - [DB]GetSchema("ReservedWords")
13:08:42.675 1 N - [DB]GetSchema("Databases", "tgm")
13:08:42.771 1 N - [DB]GetSchema("Tables")
13:08:42.893 1 N - [DB]GetSchema("Columns")
13:08:42.938 1 N - [DB]GetSchema("Indexes")
13:08:42.969 1 N - [DB]GetSchema("IndexColumns")
13:08:43.004 1 N - [DB]GetSchema("DataTypes")
13:08:43.111 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
13:08:43.185 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:08:43.185 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:08:43.186 1 N - DB待检查表架构的实体个数：8
13:08:43.307 1 N - 检查连接[DB/SqlServer]的数据库架构耗时196ms
13:08:43.307 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
13:08:43.335 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:08:43.364 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc

#Software: iisexpress
#ProcessID: 10304
#AppDomain: /LM/W3SVC/2/ROOT-1-130662041477679592
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
13:09:13.604 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
13:09:13.613 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
13:09:13.614 1 N - 使用数据库方式：独占，加大缓存权重
13:09:13.614 1 N - 一级缓存：关闭缓存
13:09:13.643 1 N - [DB]GetSchema("MetaDataCollections")
13:09:13.725 1 N - [DB]GetSchema("ReservedWords")
13:09:13.739 1 N - [DB]GetSchema("Databases", "tgm")
13:09:13.821 1 N - [DB]GetSchema("Tables")
13:09:13.951 1 N - [DB]GetSchema("Columns")
13:09:13.996 1 N - [DB]GetSchema("Indexes")
13:09:14.028 1 N - [DB]GetSchema("IndexColumns")
13:09:14.062 1 N - [DB]GetSchema("DataTypes")
13:09:14.168 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
13:09:14.252 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:09:14.252 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:09:14.252 1 N - DB待检查表架构的实体个数：8
13:09:14.376 1 N - 检查连接[DB/SqlServer]的数据库架构耗时208ms
13:09:14.376 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
13:09:14.405 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:09:14.435 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc

#Software: iisexpress
#ProcessID: 9520
#AppDomain: /LM/W3SVC/2/ROOT-1-130662062778420281
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
13:44:43.496 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
13:44:43.506 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
13:44:43.506 1 N - 使用数据库方式：独占，加大缓存权重
13:44:43.506 1 N - 一级缓存：关闭缓存
13:44:43.534 1 N - [DB]GetSchema("MetaDataCollections")
13:44:43.558 1 N - [DB]GetSchema("ReservedWords")
13:44:43.572 1 N - [DB]GetSchema("Databases", "tgm")
13:44:43.650 1 N - [DB]GetSchema("Tables")
13:44:43.789 1 N - [DB]GetSchema("Columns")
13:44:43.836 1 N - [DB]GetSchema("Indexes")
13:44:43.868 1 N - [DB]GetSchema("IndexColumns")
13:44:43.903 1 N - [DB]GetSchema("DataTypes")
13:44:44.038 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
13:44:44.115 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:44:44.115 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:44:44.115 1 N - DB待检查表架构的实体个数：8
13:44:44.253 1 N - EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'sid'
13:44:44.528 1 N - 修改表DropColumnDescription失败！无法更新或删除属性。'dbo.tgm_record_pay.sid' 不存在属性 'MS_Description'。[SQL:EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'sid'][DB:DB/SqlServer]
13:44:44.528 1 N - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'平台' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'sid'
13:44:44.556 1 N - EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'player_id'
13:44:44.761 1 N - 修改表DropColumnDescription失败！无法更新或删除属性。'dbo.tgm_record_pay.player_id' 不存在属性 'MS_Description'。[SQL:EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'player_id'][DB:DB/SqlServer]
13:44:44.761 1 N - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'玩家编号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'player_id'
13:44:44.787 1 N - EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'user_code'
13:44:44.980 1 N - 修改表DropColumnDescription失败！无法更新或删除属性。'dbo.tgm_record_pay.user_code' 不存在属性 'MS_Description'。[SQL:EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'user_code'][DB:DB/SqlServer]
13:44:44.980 1 N - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'玩家账号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'user_code'
13:44:45.008 1 N - EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'player_name'
13:44:45.257 1 N - 修改表DropColumnDescription失败！无法更新或删除属性。'dbo.tgm_record_pay.player_name' 不存在属性 'MS_Description'。[SQL:EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'player_name'][DB:DB/SqlServer]
13:44:45.258 1 N - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'玩家名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'player_name'
13:44:45.285 1 N - EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'order_id'
13:44:45.481 1 N - 修改表DropColumnDescription失败！无法更新或删除属性。'dbo.tgm_record_pay.order_id' 不存在属性 'MS_Description'。[SQL:EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'order_id'][DB:DB/SqlServer]
13:44:45.481 1 N - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'订单号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'order_id'
13:44:45.507 1 N - EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'channel'
13:44:45.688 1 N - 修改表DropColumnDescription失败！无法更新或删除属性。'dbo.tgm_record_pay.channel' 不存在属性 'MS_Description'。[SQL:EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'channel'][DB:DB/SqlServer]
13:44:45.688 1 N - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'渠道' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'channel'
13:44:45.713 1 N - EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'pay_type'
13:44:45.922 1 N - 修改表DropColumnDescription失败！无法更新或删除属性。'dbo.tgm_record_pay.pay_type' 不存在属性 'MS_Description'。[SQL:EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'pay_type'][DB:DB/SqlServer]
13:44:45.922 1 N - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'充值类型(0:RMB,1:(1:1),2(1:10)...)' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'pay_type'
13:44:45.947 1 N - EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'amount'
13:44:46.140 1 N - 修改表DropColumnDescription失败！无法更新或删除属性。'dbo.tgm_record_pay.amount' 不存在属性 'MS_Description'。[SQL:EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'amount'][DB:DB/SqlServer]
13:44:46.140 1 N - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'金额' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'amount'
13:44:46.165 1 N - EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'pay_state'
13:44:46.343 1 N - 修改表DropColumnDescription失败！无法更新或删除属性。'dbo.tgm_record_pay.pay_state' 不存在属性 'MS_Description'。[SQL:EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'pay_state'][DB:DB/SqlServer]
13:44:46.343 1 N - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'支付状态' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'pay_state'
13:44:46.371 1 N - EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'createtime'
13:44:46.547 1 N - 修改表DropColumnDescription失败！无法更新或删除属性。'dbo.tgm_record_pay.createtime' 不存在属性 'MS_Description'。[SQL:EXEC dbo.sp_dropextendedproperty @name=N'MS_Description', @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'createtime'][DB:DB/SqlServer]
13:44:46.548 1 N - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay', @level2type=N'COLUMN',@level2name=N'createtime'
13:44:46.573 1 N - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'游戏支付记录' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tgm_record_pay'
13:44:46.606 1 N - 检查连接[DB/SqlServer]的数据库架构耗时2,567ms
13:44:46.606 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
13:44:46.634 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:44:46.662 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
13:44:55.185 5 W - [tgm]GetSchema("MetaDataCollections")
13:44:55.188 5 W - [tgm]GetSchema("ReservedWords")
13:44:55.195 5 W - [tgm]GetSchema("Databases", "tgm")
13:44:55.353 5 W - [tgm]GetSchema("Tables")
13:44:55.604 5 W - [tgm]GetSchema("Columns")
13:44:55.693 5 W - [tgm]GetSchema("Indexes")
13:44:55.767 5 W - [tgm]GetSchema("IndexColumns")
13:44:55.848 5 W - [tgm]GetSchema("DataTypes")
13:44:56.014 5 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:44:56.083 5 W - 开始检查连接[tgm/SqlServer]的数据库架构……
13:44:56.136 5 W - [tgm]的所有实体类（0个）：
13:44:56.136 5 W - [tgm]需要检查架构的实体类（0个）：
13:44:56.136 5 W - 检查连接[tgm/SqlServer]的数据库架构耗时53ms
13:44:56.136 5 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
13:44:56.221 5 W - Select * From tgm_platform Where id=1
13:44:57.599 7 W - [tgm]GetSchema("Tables")
13:44:57.859 7 W - [tgm]GetSchema("Columns")
13:44:57.949 7 W - [tgm]GetSchema("Indexes")
13:44:58.023 7 W - [tgm]GetSchema("IndexColumns")
13:44:58.100 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:44:58.415 7 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
13:44:58.479 7 W - Select * From tgm_platform Where id=1
13:44:58.548 7 W - Select * From tgm_platform Where id=1
13:45:03.463 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:45:03.530 5 W - Select * From tgm_platform Order By  createtime desc
13:45:07.079 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:45:07.154 6 W - Select * From tgm_server Order By id Desc
13:45:07.284 6 W - [tgm]GetSchema("Tables")
13:45:07.519 6 W - [tgm]GetSchema("Columns")
13:45:07.603 6 W - [tgm]GetSchema("Indexes")
13:45:07.673 6 W - [tgm]GetSchema("IndexColumns")
13:45:07.753 6 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:45:07.816 6 W - Select Count(*) From tgm_record_pay
13:45:07.875 6 W - Select Top 10 * From tgm_record_pay Order By id Desc
13:45:07.936 6 W - Select * From tgm_platform Order By id Desc
13:45:51.160 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:45:51.228 5 W - Select * From tgm_platform Order By  createtime desc
13:45:54.764 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:45:54.828 5 W - Select * From tgm_platform Order By  createtime desc
13:45:56.241 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:45:56.307 6 W - Select * From tgm_server Order By id Desc
13:45:56.372 6 W - Select Count(*) From tgm_record_pay
13:45:56.435 6 W - Select Top 10 * From tgm_record_pay Order By id Desc
13:45:56.504 6 W - Select * From tgm_platform Order By id Desc

#Software: iisexpress
#ProcessID: 8712
#AppDomain: /LM/W3SVC/2/ROOT-1-130662064396017687
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
13:47:22.079 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
13:47:22.087 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
13:47:22.088 1 N - 使用数据库方式：独占，加大缓存权重
13:47:22.088 1 N - 一级缓存：关闭缓存
13:47:22.156 1 N - [DB]GetSchema("MetaDataCollections")
13:47:22.212 1 N - [DB]GetSchema("ReservedWords")
13:47:22.226 1 N - [DB]GetSchema("Databases", "tgm")
13:47:22.320 1 N - [DB]GetSchema("Tables")
13:47:22.459 1 N - [DB]GetSchema("Columns")
13:47:22.508 1 N - [DB]GetSchema("Indexes")
13:47:22.544 1 N - [DB]GetSchema("IndexColumns")
13:47:22.584 1 N - [DB]GetSchema("DataTypes")
13:47:22.693 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
13:47:22.757 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:47:22.757 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:47:22.757 1 N - DB待检查表架构的实体个数：8
13:47:22.891 1 N - 检查连接[DB/SqlServer]的数据库架构耗时198ms
13:47:22.892 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
13:47:22.921 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:47:22.955 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc

#Software: iisexpress
#ProcessID: 10472
#AppDomain: /LM/W3SVC/2/ROOT-1-130662065568799921
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
13:49:19.337 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
13:49:19.345 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
13:49:19.346 1 N - 使用数据库方式：独占，加大缓存权重
13:49:19.346 1 N - 一级缓存：关闭缓存
13:49:19.411 1 N - [DB]GetSchema("MetaDataCollections")
13:49:19.455 1 N - [DB]GetSchema("ReservedWords")
13:49:19.469 1 N - [DB]GetSchema("Databases", "tgm")
13:49:19.563 1 N - [DB]GetSchema("Tables")
13:49:19.699 1 N - [DB]GetSchema("Columns")
13:49:19.747 1 N - [DB]GetSchema("Indexes")
13:49:19.784 1 N - [DB]GetSchema("IndexColumns")
13:49:19.823 1 N - [DB]GetSchema("DataTypes")
13:49:19.932 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
13:49:19.993 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:49:19.993 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:49:19.994 1 N - DB待检查表架构的实体个数：8
13:49:20.145 1 N - 检查连接[DB/SqlServer]的数据库架构耗时213ms
13:49:20.145 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
13:49:20.178 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:49:20.207 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
13:49:35.846 7 W - [tgm]GetSchema("MetaDataCollections")
13:49:35.849 7 W - [tgm]GetSchema("ReservedWords")
13:49:35.855 7 W - [tgm]GetSchema("Databases", "tgm")
13:49:36.027 7 W - [tgm]GetSchema("Tables")
13:49:36.280 7 W - [tgm]GetSchema("Columns")
13:49:36.368 7 W - [tgm]GetSchema("Indexes")
13:49:36.442 7 W - [tgm]GetSchema("IndexColumns")
13:49:36.519 7 W - [tgm]GetSchema("DataTypes")
13:49:36.693 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:49:36.763 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
13:49:36.804 7 W - [tgm]的所有实体类（0个）：
13:49:36.804 7 W - [tgm]需要检查架构的实体类（0个）：
13:49:36.804 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时42ms
13:49:36.805 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
13:49:36.881 7 W - Select * From tgm_platform Where id=1
13:49:38.189 9 W - [tgm]GetSchema("Tables")
13:49:38.444 9 W - [tgm]GetSchema("Columns")
13:49:38.536 9 W - [tgm]GetSchema("Indexes")
13:49:38.620 9 W - [tgm]GetSchema("IndexColumns")
13:49:38.700 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:49:39.019 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
13:49:39.086 9 W - Select * From tgm_platform Where id=1
13:49:39.159 9 W - Select * From tgm_platform Where id=1
13:49:43.711 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:49:43.780 7 W - Select * From tgm_platform Order By  createtime desc
13:49:51.110 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:49:51.176 8 W - Select * From tgm_server Where [pid] =4  Order By  createtime desc
13:49:51.247 8 W - Select * From tgm_platform Where id=4
13:50:03.650 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc

#Software: iisexpress
#ProcessID: 3116
#AppDomain: /LM/W3SVC/2/ROOT-1-130662068610781690
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
13:54:26.185 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
13:54:26.195 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
13:54:26.195 1 N - 使用数据库方式：独占，加大缓存权重
13:54:26.195 1 N - 一级缓存：关闭缓存
13:54:26.226 1 N - [DB]GetSchema("MetaDataCollections")
13:54:26.252 1 N - [DB]GetSchema("ReservedWords")
13:54:26.266 1 N - [DB]GetSchema("Databases", "tgm")
13:54:26.358 1 N - [DB]GetSchema("Tables")
13:54:26.491 1 N - [DB]GetSchema("Columns")
13:54:26.555 1 N - [DB]GetSchema("Indexes")
13:54:26.599 1 N - [DB]GetSchema("IndexColumns")
13:54:26.634 1 N - [DB]GetSchema("DataTypes")
13:54:26.744 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
13:54:26.835 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:54:26.836 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:54:26.836 1 N - DB待检查表架构的实体个数：8
13:54:27.103 1 N - 检查连接[DB/SqlServer]的数据库架构耗时359ms
13:54:27.103 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
13:54:27.142 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:54:27.179 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
13:54:44.671 7 W - [tgm]GetSchema("MetaDataCollections")
13:54:44.675 7 W - [tgm]GetSchema("ReservedWords")
13:54:44.681 7 W - [tgm]GetSchema("Databases", "tgm")
13:54:44.843 7 W - [tgm]GetSchema("Tables")
13:54:45.097 7 W - [tgm]GetSchema("Columns")
13:54:45.189 7 W - [tgm]GetSchema("Indexes")
13:54:45.267 7 W - [tgm]GetSchema("IndexColumns")
13:54:45.347 7 W - [tgm]GetSchema("DataTypes")
13:54:45.518 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:54:45.589 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
13:54:45.642 7 W - [tgm]的所有实体类（0个）：
13:54:45.642 7 W - [tgm]需要检查架构的实体类（0个）：
13:54:45.642 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时53ms
13:54:45.642 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
13:54:45.721 7 W - Select * From tgm_platform Where id=1
13:54:46.942 10 W - [tgm]GetSchema("Tables")
13:54:47.195 10 W - [tgm]GetSchema("Columns")
13:54:47.285 10 W - [tgm]GetSchema("Indexes")
13:54:47.363 10 W - [tgm]GetSchema("IndexColumns")
13:54:47.446 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:54:47.762 10 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
13:54:47.828 10 W - Select * From tgm_platform Where id=1
13:54:47.900 10 W - Select * From tgm_platform Where id=1
13:54:52.792 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:54:52.859 7 W - Select * From tgm_platform Order By  createtime desc
13:54:56.407 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:54:56.475 7 W - Select * From tgm_server Order By id Desc
13:54:56.611 7 W - [tgm]GetSchema("Tables")
13:54:56.850 7 W - [tgm]GetSchema("Columns")
13:54:56.939 7 W - [tgm]GetSchema("Indexes")
13:54:57.011 7 W - [tgm]GetSchema("IndexColumns")
13:54:57.087 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:54:57.156 7 W - Select Count(*) From tgm_record_pay
13:54:57.218 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
13:54:57.281 7 W - Select * From tgm_platform Order By id Desc
13:55:25.685 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:55:25.752 7 W - Select * From tgm_platform Order By  createtime desc

#Software: iisexpress
#ProcessID: 11184
#AppDomain: /LM/W3SVC/2/ROOT-1-130662071161824785
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
13:58:41.366 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
13:58:41.375 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
13:58:41.375 1 N - 使用数据库方式：独占，加大缓存权重
13:58:41.375 1 N - 一级缓存：关闭缓存
13:58:41.403 1 N - [DB]GetSchema("MetaDataCollections")
13:58:41.429 1 N - [DB]GetSchema("ReservedWords")
13:58:41.443 1 N - [DB]GetSchema("Databases", "tgm")
13:58:41.530 1 N - [DB]GetSchema("Tables")
13:58:41.660 1 N - [DB]GetSchema("Columns")
13:58:41.708 1 N - [DB]GetSchema("Indexes")
13:58:41.740 1 N - [DB]GetSchema("IndexColumns")
13:58:41.775 1 N - [DB]GetSchema("DataTypes")
13:58:41.882 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
13:58:41.965 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:58:41.965 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
13:58:41.966 1 N - DB待检查表架构的实体个数：8
13:58:42.091 1 N - 检查连接[DB/SqlServer]的数据库架构耗时209ms
13:58:42.091 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
13:58:42.122 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:58:42.155 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
13:58:49.692 6 W - [tgm]GetSchema("MetaDataCollections")
13:58:49.695 6 W - [tgm]GetSchema("ReservedWords")
13:58:49.701 6 W - [tgm]GetSchema("Databases", "tgm")
13:58:49.862 6 W - [tgm]GetSchema("Tables")
13:58:50.110 6 W - [tgm]GetSchema("Columns")
13:58:50.210 6 W - [tgm]GetSchema("Indexes")
13:58:50.290 6 W - [tgm]GetSchema("IndexColumns")
13:58:50.366 6 W - [tgm]GetSchema("DataTypes")
13:58:50.527 6 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:58:50.600 6 W - 开始检查连接[tgm/SqlServer]的数据库架构……
13:58:50.653 6 W - [tgm]的所有实体类（0个）：
13:58:50.653 6 W - [tgm]需要检查架构的实体类（0个）：
13:58:50.653 6 W - 检查连接[tgm/SqlServer]的数据库架构耗时53ms
13:58:50.653 6 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
13:58:50.728 6 W - Select * From tgm_platform Where id=1
13:58:52.101 8 W - [tgm]GetSchema("Tables")
13:58:52.350 8 W - [tgm]GetSchema("Columns")
13:58:52.441 8 W - [tgm]GetSchema("Indexes")
13:58:52.519 8 W - [tgm]GetSchema("IndexColumns")
13:58:52.597 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:58:52.909 8 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
13:58:52.981 8 W - Select * From tgm_platform Where id=1
13:58:53.050 8 W - Select * From tgm_platform Where id=1
13:59:00.400 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:59:00.477 7 W - Select * From tgm_platform Order By  createtime desc
13:59:04.064 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
13:59:04.138 7 W - Select * From tgm_server Order By id Desc
13:59:04.269 7 W - [tgm]GetSchema("Tables")
13:59:04.510 7 W - [tgm]GetSchema("Columns")
13:59:04.594 7 W - [tgm]GetSchema("Indexes")
13:59:04.665 7 W - [tgm]GetSchema("IndexColumns")
13:59:04.739 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
13:59:04.802 7 W - Select Count(*) From tgm_record_pay
13:59:04.862 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
13:59:04.927 7 W - Select * From tgm_platform Order By id Desc

#Software: iisexpress
#ProcessID: 3924
#AppDomain: /LM/W3SVC/2/ROOT-1-130662072020681623
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
14:00:04.598 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
14:00:04.607 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
14:00:04.607 1 N - 使用数据库方式：独占，加大缓存权重
14:00:04.607 1 N - 一级缓存：关闭缓存
14:00:04.676 1 N - [DB]GetSchema("MetaDataCollections")
14:00:04.743 1 N - [DB]GetSchema("ReservedWords")
14:00:04.757 1 N - [DB]GetSchema("Databases", "tgm")
14:00:04.846 1 N - [DB]GetSchema("Tables")
14:00:04.981 1 N - [DB]GetSchema("Columns")
14:00:05.034 1 N - [DB]GetSchema("Indexes")
14:00:05.069 1 N - [DB]GetSchema("IndexColumns")
14:00:05.111 1 N - [DB]GetSchema("DataTypes")
14:00:05.226 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
14:00:05.295 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:00:05.296 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:00:05.296 1 N - DB待检查表架构的实体个数：8
14:00:05.428 1 N - 检查连接[DB/SqlServer]的数据库架构耗时200ms
14:00:05.428 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
14:00:05.457 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:00:05.494 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
14:00:15.420 7 W - [tgm]GetSchema("MetaDataCollections")
14:00:15.424 7 W - [tgm]GetSchema("ReservedWords")
14:00:15.430 7 W - [tgm]GetSchema("Databases", "tgm")
14:00:15.597 7 W - [tgm]GetSchema("Tables")
14:00:15.851 7 W - [tgm]GetSchema("Columns")
14:00:15.941 7 W - [tgm]GetSchema("Indexes")
14:00:16.026 7 W - [tgm]GetSchema("IndexColumns")
14:00:16.101 7 W - [tgm]GetSchema("DataTypes")
14:00:16.282 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:00:16.353 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
14:00:16.395 7 W - [tgm]的所有实体类（0个）：
14:00:16.395 7 W - [tgm]需要检查架构的实体类（0个）：
14:00:16.395 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时42ms
14:00:16.395 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
14:00:16.471 7 W - Select * From tgm_platform Where id=1
14:00:17.654 9 W - [tgm]GetSchema("Tables")
14:00:17.908 9 W - [tgm]GetSchema("Columns")
14:00:18.005 9 W - [tgm]GetSchema("Indexes")
14:00:18.083 9 W - [tgm]GetSchema("IndexColumns")
14:00:18.162 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:00:18.489 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
14:00:18.555 9 W - Select * From tgm_platform Where id=1
14:00:18.625 9 W - Select * From tgm_platform Where id=1
14:00:22.832 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:00:22.899 9 W - Select * From tgm_platform Order By  createtime desc
14:00:27.182 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:00:27.249 8 W - Select * From tgm_server Order By id Desc
14:00:27.384 8 W - [tgm]GetSchema("Tables")
14:00:27.637 8 W - [tgm]GetSchema("Columns")
14:00:27.719 8 W - [tgm]GetSchema("Indexes")
14:00:27.788 8 W - [tgm]GetSchema("IndexColumns")
14:00:27.859 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:00:27.926 8 W - Select Count(*) From tgm_record_pay
14:00:27.985 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:00:28.051 8 W - Select * From tgm_platform Order By id Desc
14:00:38.958 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:00:39.031 7 W - Select * From tgm_platform Order By  createtime desc
14:00:42.840 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:00:42.907 8 W - Select * From tgm_platform Order By  createtime desc
14:00:44.226 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:00:44.289 9 W - Select * From tgm_server Order By id Desc
14:00:44.354 9 W - Select Count(*) From tgm_record_pay
14:00:44.414 9 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:00:44.476 9 W - Select * From tgm_platform Order By id Desc
14:00:58.171 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:00:58.238 7 W - Select * From tgm_platform Order By  createtime desc
14:01:04.142 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:01:04.210 9 W - Select * From tgm_server Order By id Desc
14:01:04.284 9 W - Select Count(*) From tgm_record_pay
14:01:04.346 9 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:01:04.408 9 W - Select * From tgm_platform Order By id Desc

#Software: iisexpress
#ProcessID: 4280
#AppDomain: /LM/W3SVC/2/ROOT-1-130662074011752641
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
14:03:26.924 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
14:03:26.932 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
14:03:26.933 1 N - 使用数据库方式：独占，加大缓存权重
14:03:26.933 1 N - 一级缓存：关闭缓存
14:03:26.961 1 N - [DB]GetSchema("MetaDataCollections")
14:03:26.986 1 N - [DB]GetSchema("ReservedWords")
14:03:27.000 1 N - [DB]GetSchema("Databases", "tgm")
14:03:27.079 1 N - [DB]GetSchema("Tables")
14:03:27.205 1 N - [DB]GetSchema("Columns")
14:03:27.260 1 N - [DB]GetSchema("Indexes")
14:03:27.293 1 N - [DB]GetSchema("IndexColumns")
14:03:27.332 1 N - [DB]GetSchema("DataTypes")
14:03:27.449 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
14:03:27.526 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:03:27.526 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:03:27.527 1 N - DB待检查表架构的实体个数：8
14:03:27.659 1 N - 检查连接[DB/SqlServer]的数据库架构耗时210ms
14:03:27.659 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
14:03:27.699 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:03:27.726 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
14:03:38.440 8 W - [tgm]GetSchema("MetaDataCollections")
14:03:38.444 8 W - [tgm]GetSchema("ReservedWords")
14:03:38.450 8 W - [tgm]GetSchema("Databases", "tgm")
14:03:38.606 8 W - [tgm]GetSchema("Tables")
14:03:38.864 8 W - [tgm]GetSchema("Columns")
14:03:38.951 8 W - [tgm]GetSchema("Indexes")
14:03:39.029 8 W - [tgm]GetSchema("IndexColumns")
14:03:39.106 8 W - [tgm]GetSchema("DataTypes")
14:03:39.278 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:03:39.348 8 W - 开始检查连接[tgm/SqlServer]的数据库架构……
14:03:39.401 8 W - [tgm]的所有实体类（0个）：
14:03:39.401 8 W - [tgm]需要检查架构的实体类（0个）：
14:03:39.401 8 W - 检查连接[tgm/SqlServer]的数据库架构耗时52ms
14:03:39.401 8 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
14:03:39.491 8 W - Select * From tgm_platform Where id=1
14:03:40.742 9 W - [tgm]GetSchema("Tables")
14:03:41.002 9 W - [tgm]GetSchema("Columns")
14:03:41.093 9 W - [tgm]GetSchema("Indexes")
14:03:41.176 9 W - [tgm]GetSchema("IndexColumns")
14:03:41.260 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:03:41.652 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
14:03:41.719 9 W - Select * From tgm_platform Where id=1
14:03:41.791 9 W - Select * From tgm_platform Where id=1
14:03:46.630 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:03:46.696 7 W - Select * From tgm_platform Order By  createtime desc
14:03:54.125 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:03:54.191 9 W - Select * From tgm_server Order By id Desc
14:03:54.321 9 W - [tgm]GetSchema("Tables")
14:03:54.561 9 W - [tgm]GetSchema("Columns")
14:03:54.650 9 W - [tgm]GetSchema("Indexes")
14:03:54.719 9 W - [tgm]GetSchema("IndexColumns")
14:03:54.798 9 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:03:54.867 9 W - Select Count(*) From tgm_record_pay
14:03:54.927 9 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:03:54.992 9 W - Select * From tgm_platform Order By id Desc

#Software: iisexpress
#ProcessID: 10628
#AppDomain: /LM/W3SVC/2/ROOT-1-130662075846774213
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
14:06:27.177 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
14:06:27.185 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
14:06:27.186 1 N - 使用数据库方式：独占，加大缓存权重
14:06:27.186 1 N - 一级缓存：关闭缓存
14:06:27.252 1 N - [DB]GetSchema("MetaDataCollections")
14:06:27.276 1 N - [DB]GetSchema("ReservedWords")
14:06:27.295 1 N - [DB]GetSchema("Databases", "tgm")
14:06:27.406 1 N - [DB]GetSchema("Tables")
14:06:27.550 1 N - [DB]GetSchema("Columns")
14:06:27.600 1 N - [DB]GetSchema("Indexes")
14:06:27.635 1 N - [DB]GetSchema("IndexColumns")
14:06:27.678 1 N - [DB]GetSchema("DataTypes")
14:06:27.806 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
14:06:27.866 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:06:27.867 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:06:27.867 1 N - DB待检查表架构的实体个数：8
14:06:28.001 1 N - 检查连接[DB/SqlServer]的数据库架构耗时195ms
14:06:28.002 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
14:06:28.034 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:06:28.066 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
14:06:44.438 7 W - [tgm]GetSchema("MetaDataCollections")
14:06:44.442 7 W - [tgm]GetSchema("ReservedWords")
14:06:44.448 7 W - [tgm]GetSchema("Databases", "tgm")
14:06:44.606 7 W - [tgm]GetSchema("Tables")
14:06:44.863 7 W - [tgm]GetSchema("Columns")
14:06:44.956 7 W - [tgm]GetSchema("Indexes")
14:06:45.040 7 W - [tgm]GetSchema("IndexColumns")
14:06:45.118 7 W - [tgm]GetSchema("DataTypes")
14:06:45.289 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:06:45.365 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
14:06:45.407 7 W - [tgm]的所有实体类（0个）：
14:06:45.407 7 W - [tgm]需要检查架构的实体类（0个）：
14:06:45.407 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时42ms
14:06:45.407 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
14:06:45.483 7 W - Select * From tgm_platform Where id=1
14:06:46.666 10 W - [tgm]GetSchema("Tables")
14:06:46.929 10 W - [tgm]GetSchema("Columns")
14:06:47.028 10 W - [tgm]GetSchema("Indexes")
14:06:47.117 10 W - [tgm]GetSchema("IndexColumns")
14:06:47.198 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:06:47.518 10 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
14:06:47.585 10 W - Select * From tgm_platform Where id=1
14:06:47.653 10 W - Select * From tgm_platform Where id=1
14:06:52.301 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:06:52.372 7 W - Select * From tgm_platform Order By  createtime desc
14:06:56.708 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:06:56.777 8 W - Select * From tgm_server Order By id Desc
14:06:56.908 8 W - [tgm]GetSchema("Tables")
14:06:57.151 8 W - [tgm]GetSchema("Columns")
14:06:57.242 8 W - [tgm]GetSchema("Indexes")
14:06:57.312 8 W - [tgm]GetSchema("IndexColumns")
14:06:57.390 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:06:57.464 8 W - Select Count(*) From tgm_record_pay
14:06:57.524 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:06:57.583 8 W - Select * From tgm_platform Order By id Desc
14:07:02.720 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:02.784 7 W - Select * From tgm_server Order By id Desc
14:07:02.849 7 W - Select Count(*) From tgm_record_pay
14:07:02.907 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:07:02.979 7 W - Select * From tgm_platform Order By id Desc
14:07:04.876 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:04.942 7 W - Select * From tgm_server Order By id Desc
14:07:05.010 7 W - Select Count(*) From tgm_record_pay
14:07:05.072 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:07:05.139 7 W - Select * From tgm_platform Order By id Desc
14:07:07.074 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:07.141 8 W - Select * From tgm_server Order By id Desc
14:07:07.213 8 W - Select Count(*) From tgm_record_pay
14:07:07.274 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:07:07.340 8 W - Select * From tgm_platform Order By id Desc
14:07:10.577 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:10.642 10 W - Select * From tgm_server Order By id Desc
14:07:10.708 10 W - Select Count(*) From tgm_record_pay
14:07:10.772 10 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:07:10.835 10 W - Select * From tgm_platform Order By id Desc
14:07:13.353 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:13.424 9 W - Select * From tgm_server Order By id Desc
14:07:13.489 9 W - Select Count(*) From tgm_record_pay
14:07:13.550 9 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:07:13.614 9 W - Select * From tgm_platform Order By id Desc
14:07:15.223 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:15.287 8 W - Select * From tgm_server Order By id Desc
14:07:15.351 8 W - Select Count(*) From tgm_record_pay
14:07:15.411 8 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
14:07:15.482 8 W - Select * From tgm_platform Order By id Desc
14:07:18.960 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:19.028 8 W - Select * From tgm_server Order By id Desc
14:07:19.088 8 W - Select Count(*) From tgm_record_pay
14:07:19.145 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:07:19.205 8 W - Select * From tgm_platform Order By id Desc
14:07:22.359 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:22.422 7 W - Select * From tgm_server Order By id Desc
14:07:22.493 7 W - Select Count(*) From tgm_record_pay
14:07:22.554 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:07:22.615 7 W - Select * From tgm_platform Order By id Desc
14:07:29.413 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:29.482 7 W - Select * From tgm_server Order By id Desc
14:07:29.547 7 W - Select Count(*) From tgm_record_pay
14:07:29.607 7 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
14:07:29.671 7 W - Select * From tgm_platform Order By id Desc
14:07:32.778 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:32.840 8 W - Select * From tgm_server Order By id Desc
14:07:32.900 8 W - Select Count(*) From tgm_record_pay
14:07:32.959 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:07:33.028 8 W - Select * From tgm_platform Order By id Desc
14:07:36.789 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:36.855 7 W - Select * From tgm_server Order By id Desc
14:07:36.931 7 W - Select Count(*) From tgm_record_pay
14:07:36.990 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:07:37.054 7 W - Select * From tgm_platform Order By id Desc
14:07:42.810 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:42.875 8 W - Select * From tgm_server Order By id Desc
14:07:42.941 8 W - Select Count(*) From tgm_record_pay
14:07:43.000 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:07:43.061 8 W - Select * From tgm_platform Order By id Desc
14:07:45.946 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:46.012 10 W - Select * From tgm_server Order By id Desc
14:07:46.077 10 W - Select Count(*) From tgm_record_pay
14:07:46.146 10 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:07:46.212 10 W - Select * From tgm_platform Order By id Desc
14:07:49.176 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:07:49.241 10 W - Select * From tgm_server Order By id Desc
14:07:49.310 10 W - Select Count(*) From tgm_record_pay
14:07:49.373 10 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
14:07:49.438 10 W - Select * From tgm_platform Order By id Desc
14:08:10.589 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:08:10.690 7 W - Select * From tgm_server Order By id Desc
14:08:10.756 7 W - Select Count(*) From tgm_record_pay
14:08:10.822 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:08:10.884 7 W - Select * From tgm_platform Order By id Desc
14:09:04.149 14 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:09:12.180 14 W - Select * From tgm_server Order By id Desc
14:09:21.523 14 W - Select Count(*) From tgm_record_pay

#Software: iisexpress
#ProcessID: 11180
#AppDomain: /LM/W3SVC/2/ROOT-1-130662078895776481
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
14:11:35.483 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
14:11:35.492 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
14:11:35.492 1 N - 使用数据库方式：独占，加大缓存权重
14:11:35.492 1 N - 一级缓存：关闭缓存
14:11:35.532 1 N - [DB]GetSchema("MetaDataCollections")
14:11:35.556 1 N - [DB]GetSchema("ReservedWords")
14:11:35.577 1 N - [DB]GetSchema("Databases", "tgm")
14:11:35.664 1 N - [DB]GetSchema("Tables")
14:11:35.805 1 N - [DB]GetSchema("Columns")
14:11:35.855 1 N - [DB]GetSchema("Indexes")
14:11:35.902 1 N - [DB]GetSchema("IndexColumns")
14:11:35.941 1 N - [DB]GetSchema("DataTypes")
14:11:36.067 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
14:11:36.139 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:11:36.140 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:11:36.140 1 N - DB待检查表架构的实体个数：8
14:11:36.263 1 N - 检查连接[DB/SqlServer]的数据库架构耗时196ms
14:11:36.263 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
14:11:36.298 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:11:36.326 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
14:11:46.135 9 W - [tgm]GetSchema("MetaDataCollections")
14:11:46.138 9 W - [tgm]GetSchema("ReservedWords")
14:11:46.144 9 W - [tgm]GetSchema("Databases", "tgm")
14:11:46.309 9 W - [tgm]GetSchema("Tables")
14:11:46.565 9 W - [tgm]GetSchema("Columns")
14:11:46.653 9 W - [tgm]GetSchema("Indexes")
14:11:46.731 9 W - [tgm]GetSchema("IndexColumns")
14:11:46.809 9 W - [tgm]GetSchema("DataTypes")
14:11:46.978 9 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:11:47.049 9 W - 开始检查连接[tgm/SqlServer]的数据库架构……
14:11:47.102 9 W - [tgm]的所有实体类（0个）：
14:11:47.102 9 W - [tgm]需要检查架构的实体类（0个）：
14:11:47.102 9 W - 检查连接[tgm/SqlServer]的数据库架构耗时53ms
14:11:47.102 9 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
14:11:47.183 9 W - Select * From tgm_platform Where id=1
14:11:48.559 8 W - [tgm]GetSchema("Tables")
14:11:48.815 8 W - [tgm]GetSchema("Columns")
14:11:48.904 8 W - [tgm]GetSchema("Indexes")
14:11:48.990 8 W - [tgm]GetSchema("IndexColumns")
14:11:49.070 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:11:49.388 8 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
14:11:49.456 8 W - Select * From tgm_platform Where id=1
14:11:49.526 8 W - Select * From tgm_platform Where id=1
14:11:54.266 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:11:54.335 7 W - Select * From tgm_platform Order By  createtime desc
14:12:04.219 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:12:04.286 8 W - Select * From tgm_server Order By id Desc
14:12:04.421 8 W - [tgm]GetSchema("Tables")
14:12:04.661 8 W - [tgm]GetSchema("Columns")
14:12:04.751 8 W - [tgm]GetSchema("Indexes")
14:12:04.821 8 W - [tgm]GetSchema("IndexColumns")
14:12:04.895 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:12:04.963 8 W - Select Count(*) From tgm_record_pay
14:12:05.026 8 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
14:12:05.091 8 W - Select * From tgm_platform Order By id Desc
14:12:15.123 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:12:15.194 8 W - Select * From tgm_server Order By id Desc
14:12:15.254 8 W - Select Count(*) From tgm_record_pay
14:12:15.312 8 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
14:12:15.374 8 W - Select * From tgm_platform Order By id Desc
14:12:22.340 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:12:22.411 7 W - Select * From tgm_server Order By id Desc
14:12:22.471 7 W - Select Count(*) From tgm_record_pay
14:12:22.530 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:12:22.593 7 W - Select * From tgm_platform Order By id Desc
14:12:27.721 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:12:27.787 8 W - Select * From tgm_server Order By id Desc
14:12:27.850 8 W - Select Count(*) From tgm_record_pay
14:12:27.913 8 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
14:12:27.976 8 W - Select * From tgm_platform Order By id Desc
14:12:30.661 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:12:30.725 8 W - Select * From tgm_server Order By id Desc
14:12:30.789 8 W - Select Count(*) From tgm_record_pay
14:12:30.849 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:12:30.912 8 W - Select * From tgm_platform Order By id Desc
14:12:34.363 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:12:34.428 7 W - Select * From tgm_server Order By id Desc
14:12:34.495 7 W - Select Count(*) From tgm_record_pay
14:12:34.553 7 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
14:12:34.616 7 W - Select * From tgm_platform Order By id Desc
14:12:38.219 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:12:38.284 7 W - Select * From tgm_platform Order By  createtime desc
14:12:42.683 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:12:42.749 7 W - Select * From tgm_platform Order By  createtime desc
14:12:44.159 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:12:44.224 10 W - Select * From tgm_server Order By id Desc
14:12:44.287 10 W - Select Count(*) From tgm_record_pay
14:12:44.353 10 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
14:12:44.416 10 W - Select * From tgm_platform Order By id Desc
14:12:50.065 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:12:50.130 7 W - Select * From tgm_server Order By id Desc
14:12:50.192 7 W - Select Count(*) From tgm_record_pay
14:12:50.251 7 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
14:12:50.319 7 W - Select * From tgm_platform Order By id Desc
14:12:51.692 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:12:51.756 7 W - Select * From tgm_server Order By id Desc
14:12:51.821 7 W - Select Count(*) From tgm_record_pay
14:12:51.887 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:12:51.952 7 W - Select * From tgm_platform Order By id Desc

#Software: iisexpress
#ProcessID: 7936
#AppDomain: /LM/W3SVC/2/ROOT-1-130662080576021009
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
14:14:20.037 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
14:14:20.046 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
14:14:20.046 1 N - 使用数据库方式：独占，加大缓存权重
14:14:20.046 1 N - 一级缓存：关闭缓存
14:14:20.113 1 N - [DB]GetSchema("MetaDataCollections")
14:14:20.138 1 N - [DB]GetSchema("ReservedWords")
14:14:20.152 1 N - [DB]GetSchema("Databases", "tgm")
14:14:20.242 1 N - [DB]GetSchema("Tables")
14:14:20.374 1 N - [DB]GetSchema("Columns")
14:14:20.434 1 N - [DB]GetSchema("Indexes")
14:14:20.469 1 N - [DB]GetSchema("IndexColumns")
14:14:20.509 1 N - [DB]GetSchema("DataTypes")
14:14:20.619 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
14:14:20.679 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:14:20.679 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:14:20.680 1 N - DB待检查表架构的实体个数：8
14:14:20.813 1 N - 检查连接[DB/SqlServer]的数据库架构耗时193ms
14:14:20.813 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
14:14:20.847 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:14:20.885 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
14:14:39.232 6 W - [tgm]GetSchema("MetaDataCollections")
14:14:39.235 6 W - [tgm]GetSchema("ReservedWords")
14:14:39.241 6 W - [tgm]GetSchema("Databases", "tgm")
14:14:39.397 6 W - [tgm]GetSchema("Tables")
14:14:39.651 6 W - [tgm]GetSchema("Columns")
14:14:39.740 6 W - [tgm]GetSchema("Indexes")
14:14:39.817 6 W - [tgm]GetSchema("IndexColumns")
14:14:39.893 6 W - [tgm]GetSchema("DataTypes")
14:14:40.070 6 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:14:40.138 6 W - 开始检查连接[tgm/SqlServer]的数据库架构……
14:14:40.215 6 W - [tgm]的所有实体类（0个）：
14:14:40.216 6 W - [tgm]需要检查架构的实体类（0个）：
14:14:40.216 6 W - 检查连接[tgm/SqlServer]的数据库架构耗时78ms
14:14:40.216 6 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
14:14:40.297 6 W - Select * From tgm_platform Where id=1
14:14:41.628 11 W - [tgm]GetSchema("Tables")
14:14:41.884 11 W - [tgm]GetSchema("Columns")
14:14:41.994 11 W - [tgm]GetSchema("Indexes")
14:14:42.072 11 W - [tgm]GetSchema("IndexColumns")
14:14:42.150 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:14:42.472 11 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
14:14:42.537 11 W - Select * From tgm_platform Where id=1
14:14:42.605 11 W - Select * From tgm_platform Where id=1
14:14:47.872 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:14:47.937 6 W - Select * From tgm_platform Order By  createtime desc

#Software: iisexpress
#ProcessID: 7104
#AppDomain: /LM/W3SVC/2/ROOT-1-130662081228961105
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
14:15:25.547 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
14:15:25.560 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
14:15:25.560 1 N - 使用数据库方式：独占，加大缓存权重
14:15:25.560 1 N - 一级缓存：关闭缓存
14:15:25.627 1 N - [DB]GetSchema("MetaDataCollections")
14:15:25.651 1 N - [DB]GetSchema("ReservedWords")
14:15:25.665 1 N - [DB]GetSchema("Databases", "tgm")
14:15:25.754 1 N - [DB]GetSchema("Tables")
14:15:25.881 1 N - [DB]GetSchema("Columns")
14:15:25.925 1 N - [DB]GetSchema("Indexes")
14:15:25.958 1 N - [DB]GetSchema("IndexColumns")
14:15:25.993 1 N - [DB]GetSchema("DataTypes")
14:15:26.097 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
14:15:26.167 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:15:26.168 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:15:26.168 1 N - DB待检查表架构的实体个数：8
14:15:26.292 1 N - 检查连接[DB/SqlServer]的数据库架构耗时195ms
14:15:26.292 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
14:15:26.319 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:15:26.348 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc

#Software: iisexpress
#ProcessID: 10576
#AppDomain: /LM/W3SVC/2/ROOT-1-130662081358944623
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
14:15:38.334 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
14:15:38.343 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
14:15:38.344 1 N - 使用数据库方式：独占，加大缓存权重
14:15:38.344 1 N - 一级缓存：关闭缓存
14:15:38.411 1 N - [DB]GetSchema("MetaDataCollections")
14:15:38.436 1 N - [DB]GetSchema("ReservedWords")
14:15:38.450 1 N - [DB]GetSchema("Databases", "tgm")
14:15:38.542 1 N - [DB]GetSchema("Tables")
14:15:38.682 1 N - [DB]GetSchema("Columns")
14:15:38.735 1 N - [DB]GetSchema("Indexes")
14:15:38.774 1 N - [DB]GetSchema("IndexColumns")
14:15:38.812 1 N - [DB]GetSchema("DataTypes")
14:15:38.923 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
14:15:38.990 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:15:38.990 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:15:38.991 1 N - DB待检查表架构的实体个数：8
14:15:39.124 1 N - 检查连接[DB/SqlServer]的数据库架构耗时201ms
14:15:39.124 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
14:15:39.155 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:15:39.188 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
14:15:48.363 7 W - [tgm]GetSchema("MetaDataCollections")
14:15:48.367 7 W - [tgm]GetSchema("ReservedWords")
14:15:48.373 7 W - [tgm]GetSchema("Databases", "tgm")
14:15:48.538 7 W - [tgm]GetSchema("Tables")
14:15:48.797 7 W - [tgm]GetSchema("Columns")
14:15:48.885 7 W - [tgm]GetSchema("Indexes")
14:15:48.960 7 W - [tgm]GetSchema("IndexColumns")
14:15:49.040 7 W - [tgm]GetSchema("DataTypes")
14:15:49.213 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:15:49.283 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
14:15:49.323 7 W - [tgm]的所有实体类（0个）：
14:15:49.323 7 W - [tgm]需要检查架构的实体类（0个）：
14:15:49.323 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时41ms
14:15:49.324 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
14:15:49.401 7 W - Select * From tgm_platform Where id=1
14:15:50.736 9 W - [tgm]GetSchema("Tables")
14:15:50.997 9 W - [tgm]GetSchema("Columns")
14:15:51.093 9 W - [tgm]GetSchema("Indexes")
14:15:51.174 9 W - [tgm]GetSchema("IndexColumns")
14:15:51.261 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:15:51.576 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
14:15:51.645 9 W - Select * From tgm_platform Where id=1
14:15:51.714 9 W - Select * From tgm_platform Where id=1
14:15:55.857 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:15:55.927 7 W - Select * From tgm_platform Order By  createtime desc
14:16:08.616 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:16:08.693 7 W - Select * From tgm_server Order By id Desc
14:16:08.821 7 W - [tgm]GetSchema("Tables")
14:16:09.071 7 W - [tgm]GetSchema("Columns")
14:16:09.158 7 W - [tgm]GetSchema("Indexes")
14:16:09.227 7 W - [tgm]GetSchema("IndexColumns")
14:16:09.304 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:16:09.369 7 W - Select Count(*) From tgm_record_pay
14:16:09.426 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:16:09.492 7 W - Select * From tgm_platform Order By id Desc
14:16:13.450 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:16:13.512 8 W - Select * From tgm_server Order By id Desc
14:16:13.584 8 W - Select Count(*) From tgm_record_pay
14:16:13.643 8 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
14:16:13.709 8 W - Select * From tgm_platform Order By id Desc
14:16:16.704 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:16:16.785 7 W - Select * From tgm_server Order By id Desc
14:16:16.847 7 W - Select Count(*) From tgm_record_pay
14:16:16.906 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:16:16.968 7 W - Select * From tgm_platform Order By id Desc
14:16:20.027 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:16:20.093 10 W - Select * From tgm_platform Order By  createtime desc
14:16:23.940 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:16:24.014 7 W - Select * From tgm_platform Order By  createtime desc
14:16:25.331 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:16:25.394 9 W - Select * From tgm_server Order By id Desc
14:16:25.460 9 W - Select Count(*) From tgm_record_pay
14:16:25.523 9 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:16:25.583 9 W - Select * From tgm_platform Order By id Desc
14:16:56.805 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:16:56.868 7 W - Select * From tgm_server Where [pid] =4  Order By  createtime desc
14:16:56.936 7 W - Select * From tgm_platform Where id=4
14:17:50.493 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:17:58.773 9 W - Select * From tgm_platform Where id=4
14:18:06.696 9 W - Select * From tgm_server Where id=4

#Software: iisexpress
#ProcessID: 10916
#AppDomain: /LM/W3SVC/2/ROOT-1-130662084211193374
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
14:20:26.739 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
14:20:26.747 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
14:20:26.748 1 N - 使用数据库方式：独占，加大缓存权重
14:20:26.748 1 N - 一级缓存：关闭缓存
14:20:26.775 1 N - [DB]GetSchema("MetaDataCollections")
14:20:26.821 1 N - [DB]GetSchema("ReservedWords")
14:20:26.835 1 N - [DB]GetSchema("Databases", "tgm")
14:20:26.940 1 N - [DB]GetSchema("Tables")
14:20:27.089 1 N - [DB]GetSchema("Columns")
14:20:27.135 1 N - [DB]GetSchema("Indexes")
14:20:27.173 1 N - [DB]GetSchema("IndexColumns")
14:20:27.211 1 N - [DB]GetSchema("DataTypes")
14:20:27.326 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
14:20:27.405 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:20:27.405 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
14:20:27.405 1 N - DB待检查表架构的实体个数：8
14:20:27.534 1 N - 检查连接[DB/SqlServer]的数据库架构耗时208ms
14:20:27.534 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
14:20:27.563 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:20:27.592 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
14:20:37.300 7 W - [tgm]GetSchema("MetaDataCollections")
14:20:37.303 7 W - [tgm]GetSchema("ReservedWords")
14:20:37.310 7 W - [tgm]GetSchema("Databases", "tgm")
14:20:37.478 7 W - [tgm]GetSchema("Tables")
14:20:37.737 7 W - [tgm]GetSchema("Columns")
14:20:37.829 7 W - [tgm]GetSchema("Indexes")
14:20:37.911 7 W - [tgm]GetSchema("IndexColumns")
14:20:37.989 7 W - [tgm]GetSchema("DataTypes")
14:20:38.165 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:20:38.240 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
14:20:38.300 7 W - [tgm]的所有实体类（0个）：
14:20:38.300 7 W - [tgm]需要检查架构的实体类（0个）：
14:20:38.300 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时60ms
14:20:38.300 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
14:20:38.379 7 W - Select * From tgm_platform Where id=1
14:20:39.787 8 W - [tgm]GetSchema("Tables")
14:20:40.050 8 W - [tgm]GetSchema("Columns")
14:20:40.141 8 W - [tgm]GetSchema("Indexes")
14:20:40.220 8 W - [tgm]GetSchema("IndexColumns")
14:20:40.302 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:20:40.633 8 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
14:20:40.700 8 W - Select * From tgm_platform Where id=1
14:20:40.769 8 W - Select * From tgm_platform Where id=1
14:20:45.960 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:20:46.027 8 W - Select * From tgm_platform Order By  createtime desc
14:21:00.111 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:21:00.184 9 W - Select * From tgm_server Order By id Desc
14:21:00.314 9 W - [tgm]GetSchema("Tables")
14:21:00.560 9 W - [tgm]GetSchema("Columns")
14:21:00.648 9 W - [tgm]GetSchema("Indexes")
14:21:00.727 9 W - [tgm]GetSchema("IndexColumns")
14:21:00.804 9 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
14:21:00.870 9 W - Select Count(*) From tgm_record_pay
14:21:00.935 9 W - Select Top 10 * From tgm_record_pay Order By id Desc
14:21:01.001 9 W - Select * From tgm_platform Order By id Desc
14:21:05.011 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:21:05.084 7 W - Select * From tgm_server Where [pid] =4  Order By  createtime desc
14:21:05.147 7 W - Select * From tgm_platform Where id=4
14:21:07.286 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:21:07.350 9 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
14:21:07.410 9 W - Select * From tgm_platform Where id=1
14:21:07.476 9 W - Select * From tgm_platform Where id=1
14:21:24.715 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
14:21:26.017 7 W - Select * From tgm_platform Where id=1
14:21:28.368 7 W - Select * From tgm_server Where id=7

#Software: iisexpress
#ProcessID: 10116
#AppDomain: /LM/W3SVC/2/ROOT-1-130662118244728330
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
15:17:10.364 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
15:17:10.377 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
15:17:10.377 1 N - 使用数据库方式：独占，加大缓存权重
15:17:10.377 1 N - 一级缓存：关闭缓存
15:17:10.407 1 N - [DB]GetSchema("MetaDataCollections")
15:17:10.438 1 N - [DB]GetSchema("ReservedWords")
15:17:10.452 1 N - [DB]GetSchema("Databases", "tgm")
15:17:10.529 1 N - [DB]GetSchema("Tables")
15:17:10.769 1 N - [DB]GetSchema("Columns")
15:17:10.820 1 N - [DB]GetSchema("Indexes")
15:17:10.856 1 N - [DB]GetSchema("IndexColumns")
15:17:10.895 1 N - [DB]GetSchema("DataTypes")
15:17:11.014 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
15:17:11.090 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:17:11.090 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:17:11.090 1 N - DB待检查表架构的实体个数：8
15:17:11.287 1 N - 检查连接[DB/SqlServer]的数据库架构耗时272ms
15:17:11.287 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
15:17:11.317 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:17:11.348 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
15:17:20.393 7 W - [tgm]GetSchema("MetaDataCollections")
15:17:20.397 7 W - [tgm]GetSchema("ReservedWords")
15:17:20.404 7 W - [tgm]GetSchema("Databases", "tgm")
15:17:20.569 7 W - [tgm]GetSchema("Tables")
15:17:21.007 7 W - [tgm]GetSchema("Columns")
15:17:21.123 7 W - [tgm]GetSchema("Indexes")
15:17:21.201 7 W - [tgm]GetSchema("IndexColumns")
15:17:21.276 7 W - [tgm]GetSchema("DataTypes")
15:17:21.449 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:17:21.519 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
15:17:21.570 7 W - [tgm]的所有实体类（0个）：
15:17:21.570 7 W - [tgm]需要检查架构的实体类（0个）：
15:17:21.571 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时52ms
15:17:21.571 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
15:17:21.647 7 W - Select * From tgm_platform Where id=1
15:17:22.884 9 W - [tgm]GetSchema("Tables")
15:17:23.272 9 W - [tgm]GetSchema("Columns")
15:17:23.370 9 W - [tgm]GetSchema("Indexes")
15:17:23.446 9 W - [tgm]GetSchema("IndexColumns")
15:17:23.526 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:17:23.945 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
15:17:24.020 9 W - Select * From tgm_platform Where id=1
15:17:24.090 9 W - Select * From tgm_platform Where id=1
15:17:30.614 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:17:30.681 8 W - Select * From tgm_platform Order By  createtime desc

#Software: iisexpress
#ProcessID: 10536
#AppDomain: /LM/W3SVC/2/ROOT-1-130662119554808881
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
15:19:21.285 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
15:19:21.294 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
15:19:21.294 1 N - 使用数据库方式：独占，加大缓存权重
15:19:21.294 1 N - 一级缓存：关闭缓存
15:19:21.323 1 N - [DB]GetSchema("MetaDataCollections")
15:19:21.350 1 N - [DB]GetSchema("ReservedWords")
15:19:21.364 1 N - [DB]GetSchema("Databases", "tgm")
15:19:21.454 1 N - [DB]GetSchema("Tables")
15:19:21.636 1 N - [DB]GetSchema("Columns")
15:19:21.684 1 N - [DB]GetSchema("Indexes")
15:19:21.718 1 N - [DB]GetSchema("IndexColumns")
15:19:21.756 1 N - [DB]GetSchema("DataTypes")
15:19:21.871 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
15:19:21.945 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:19:21.945 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:19:21.946 1 N - DB待检查表架构的实体个数：8
15:19:22.098 1 N - 检查连接[DB/SqlServer]的数据库架构耗时226ms
15:19:22.098 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
15:19:22.132 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:19:22.162 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
15:19:31.023 6 W - [tgm]GetSchema("MetaDataCollections")
15:19:31.027 6 W - [tgm]GetSchema("ReservedWords")
15:19:31.033 6 W - [tgm]GetSchema("Databases", "tgm")
15:19:31.197 6 W - [tgm]GetSchema("Tables")
15:19:31.519 6 W - [tgm]GetSchema("Columns")
15:19:31.609 6 W - [tgm]GetSchema("Indexes")
15:19:31.690 6 W - [tgm]GetSchema("IndexColumns")
15:19:31.770 6 W - [tgm]GetSchema("DataTypes")
15:19:31.937 6 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:19:32.010 6 W - 开始检查连接[tgm/SqlServer]的数据库架构……
15:19:32.063 6 W - [tgm]的所有实体类（0个）：
15:19:32.063 6 W - [tgm]需要检查架构的实体类（0个）：
15:19:32.063 6 W - 检查连接[tgm/SqlServer]的数据库架构耗时52ms
15:19:32.063 6 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
15:19:32.141 6 W - Select * From tgm_platform Where id=1
15:19:33.518 8 W - [tgm]GetSchema("Tables")
15:19:33.876 8 W - [tgm]GetSchema("Columns")
15:19:33.966 8 W - [tgm]GetSchema("Indexes")
15:19:34.042 8 W - [tgm]GetSchema("IndexColumns")
15:19:34.127 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:19:34.539 8 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
15:19:34.610 8 W - Select * From tgm_platform Where id=1
15:19:34.682 8 W - Select * From tgm_platform Where id=1
15:19:43.160 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:19:43.233 6 W - Select * From tgm_platform Order By  createtime desc
15:19:57.148 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:19:57.214 8 W - Select * From tgm_platform Order By  createtime desc
15:20:00.226 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:20:00.291 6 W - Select * From tgm_server Order By id Desc
15:20:00.421 6 W - [tgm]GetSchema("Tables")
15:20:00.745 6 W - [tgm]GetSchema("Columns")
15:20:00.830 6 W - [tgm]GetSchema("Indexes")
15:20:00.902 6 W - [tgm]GetSchema("IndexColumns")
15:20:00.977 6 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:20:01.044 6 W - Select Count(*) From tgm_record_pay
15:20:01.102 6 W - Select Top 10 * From tgm_record_pay Order By id Desc
15:20:01.163 6 W - Select * From tgm_platform Order By id Desc
15:20:15.033 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:20:15.099 6 W - Select * From tgm_platform Order By  createtime desc

#Software: iisexpress
#ProcessID: 10492
#AppDomain: /LM/W3SVC/2/ROOT-1-130662125057723024
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
15:28:31.118 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
15:28:31.127 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
15:28:31.128 1 N - 使用数据库方式：独占，加大缓存权重
15:28:31.128 1 N - 一级缓存：关闭缓存
15:28:31.155 1 N - [DB]GetSchema("MetaDataCollections")
15:28:31.180 1 N - [DB]GetSchema("ReservedWords")
15:28:31.193 1 N - [DB]GetSchema("Databases", "tgm")
15:28:31.272 1 N - [DB]GetSchema("Tables")
15:28:31.511 1 N - [DB]GetSchema("Columns")
15:28:31.564 1 N - [DB]GetSchema("Indexes")
15:28:31.599 1 N - [DB]GetSchema("IndexColumns")
15:28:31.640 1 N - [DB]GetSchema("DataTypes")
15:28:31.753 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
15:28:31.839 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:28:31.839 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:28:31.840 1 N - DB待检查表架构的实体个数：8
15:28:32.054 1 N - 检查连接[DB/SqlServer]的数据库架构耗时302ms
15:28:32.054 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
15:28:32.085 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:28:32.118 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
15:28:52.400 7 W - [tgm]GetSchema("MetaDataCollections")
15:28:52.404 7 W - [tgm]GetSchema("ReservedWords")
15:28:52.410 7 W - [tgm]GetSchema("Databases", "tgm")
15:28:52.575 7 W - [tgm]GetSchema("Tables")
15:28:52.886 7 W - [tgm]GetSchema("Columns")
15:28:52.973 7 W - [tgm]GetSchema("Indexes")
15:28:53.049 7 W - [tgm]GetSchema("IndexColumns")
15:28:53.124 7 W - [tgm]GetSchema("DataTypes")
15:28:53.299 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:28:53.369 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
15:28:53.422 7 W - [tgm]的所有实体类（0个）：
15:28:53.422 7 W - [tgm]需要检查架构的实体类（0个）：
15:28:53.422 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时53ms
15:28:53.422 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
15:28:53.497 7 W - Select * From tgm_platform Where id=1
15:28:54.898 9 W - [tgm]GetSchema("Tables")
15:28:55.272 9 W - [tgm]GetSchema("Columns")
15:28:55.363 9 W - [tgm]GetSchema("Indexes")
15:28:55.440 9 W - [tgm]GetSchema("IndexColumns")
15:28:55.519 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:28:56.000 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
15:28:56.069 9 W - Select * From tgm_platform Where id=1
15:28:56.139 9 W - Select * From tgm_platform Where id=1
15:29:03.473 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:29:03.542 8 W - Select * From tgm_platform Order By  createtime desc
15:29:11.802 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:29:11.872 9 W - Select * From tgm_platform Order By  createtime desc
15:29:13.240 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:29:13.308 8 W - Select * From tgm_platform Order By  createtime desc
15:29:16.302 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:29:16.369 7 W - Select * From tgm_server Order By id Desc
15:29:16.503 7 W - [tgm]GetSchema("Tables")
15:29:16.873 7 W - [tgm]GetSchema("Columns")
15:29:16.968 7 W - [tgm]GetSchema("Indexes")
15:29:17.048 7 W - [tgm]GetSchema("IndexColumns")
15:29:17.121 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:29:17.190 7 W - Select Count(*) From tgm_record_pay
15:29:17.260 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
15:29:17.324 7 W - Select * From tgm_platform Order By id Desc
15:35:15.326 15 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
15:35:15.400 15 W - Select * From tgm_platform Where id=1
15:35:16.627 17 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:35:16.693 17 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
15:35:16.758 17 W - Select * From tgm_platform Where id=1
15:35:16.821 17 W - Select * From tgm_platform Where id=1
15:35:21.470 20 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:35:21.542 20 W - Select * From tgm_platform Order By  createtime desc
15:35:33.003 18 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:35:33.074 18 W - Select * From tgm_platform Order By  createtime desc
15:35:36.288 18 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:35:36.358 18 W - Select * From tgm_server Order By id Desc
15:35:36.420 18 W - Select Count(*) From tgm_record_pay
15:35:36.482 18 W - Select Top 10 * From tgm_record_pay Order By id Desc
15:35:36.544 18 W - Select * From tgm_platform Order By id Desc
15:35:46.693 15 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:35:46.761 15 W - Select * From tgm_platform Order By  createtime desc
15:35:52.226 18 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:35:52.305 18 W - Select * From tgm_platform Order By  createtime desc
15:35:53.704 21 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:35:53.774 21 W - Select * From tgm_server Order By id Desc
15:35:53.838 21 W - Select Count(*) From tgm_record_pay
15:35:53.897 21 W - Select Top 10 * From tgm_record_pay Order By id Desc
15:35:53.960 21 W - Select * From tgm_platform Order By id Desc

#Software: iisexpress
#ProcessID: 7700
#AppDomain: /LM/W3SVC/2/ROOT-1-130662133211923834
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
15:42:03.981 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
15:42:03.990 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
15:42:03.991 1 N - 使用数据库方式：独占，加大缓存权重
15:42:03.991 1 N - 一级缓存：关闭缓存
15:42:04.070 1 N - [DB]GetSchema("MetaDataCollections")
15:42:04.117 1 N - [DB]GetSchema("ReservedWords")
15:42:04.155 1 N - [DB]GetSchema("Databases", "tgm")
15:42:04.310 1 N - [DB]GetSchema("Tables")
15:42:04.490 1 N - [DB]GetSchema("Columns")
15:42:04.558 1 N - [DB]GetSchema("Indexes")
15:42:04.613 1 N - [DB]GetSchema("IndexColumns")
15:42:04.677 1 N - [DB]GetSchema("DataTypes")
15:42:04.797 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
15:42:04.867 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:42:04.867 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:42:04.867 1 N - DB待检查表架构的实体个数：8
15:42:05.059 1 N - 检查连接[DB/SqlServer]的数据库架构耗时262ms
15:42:05.059 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
15:42:05.090 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:42:05.296 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
15:42:14.205 7 W - [tgm]GetSchema("MetaDataCollections")
15:42:14.209 7 W - [tgm]GetSchema("ReservedWords")
15:42:14.215 7 W - [tgm]GetSchema("Databases", "tgm")
15:42:14.378 7 W - [tgm]GetSchema("Tables")
15:42:14.630 7 W - [tgm]GetSchema("Columns")
15:42:14.722 7 W - [tgm]GetSchema("Indexes")
15:42:14.795 7 W - [tgm]GetSchema("IndexColumns")
15:42:14.869 7 W - [tgm]GetSchema("DataTypes")
15:42:15.042 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:42:15.111 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
15:42:15.153 7 W - [tgm]的所有实体类（0个）：
15:42:15.153 7 W - [tgm]需要检查架构的实体类（0个）：
15:42:15.153 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时42ms
15:42:15.153 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
15:42:15.230 7 W - Select * From tgm_platform Where id=1
15:42:16.404 9 W - [tgm]GetSchema("Tables")
15:42:16.670 9 W - [tgm]GetSchema("Columns")
15:42:16.766 9 W - [tgm]GetSchema("Indexes")
15:42:16.843 9 W - [tgm]GetSchema("IndexColumns")
15:42:16.919 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:42:17.256 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
15:42:17.322 9 W - Select * From tgm_platform Where id=1
15:42:17.395 9 W - Select * From tgm_platform Where id=1
15:42:21.910 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:42:21.977 8 W - Select * From tgm_platform Order By  createtime desc
15:42:31.679 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:42:31.742 10 W - Select * From tgm_platform Order By  createtime desc

#Software: iisexpress
#ProcessID: 10032
#AppDomain: /LM/W3SVC/2/ROOT-1-130662133846690765
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
15:43:09.705 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
15:43:09.714 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
15:43:09.714 1 N - 使用数据库方式：独占，加大缓存权重
15:43:09.714 1 N - 一级缓存：关闭缓存
15:43:09.742 1 N - [DB]GetSchema("MetaDataCollections")
15:43:09.767 1 N - [DB]GetSchema("ReservedWords")
15:43:09.781 1 N - [DB]GetSchema("Databases", "tgm")
15:43:09.880 1 N - [DB]GetSchema("Tables")
15:43:10.022 1 N - [DB]GetSchema("Columns")
15:43:10.074 1 N - [DB]GetSchema("Indexes")
15:43:10.124 1 N - [DB]GetSchema("IndexColumns")
15:43:10.161 1 N - [DB]GetSchema("DataTypes")
15:43:10.275 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
15:43:10.357 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:43:10.357 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:43:10.357 1 N - DB待检查表架构的实体个数：8
15:43:10.504 1 N - 检查连接[DB/SqlServer]的数据库架构耗时228ms
15:43:10.504 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
15:43:10.531 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:43:10.559 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
15:43:26.202 10 W - [tgm]GetSchema("MetaDataCollections")
15:43:26.206 10 W - [tgm]GetSchema("ReservedWords")
15:43:26.212 10 W - [tgm]GetSchema("Databases", "tgm")
15:43:26.374 10 W - [tgm]GetSchema("Tables")
15:43:26.786 10 W - [tgm]GetSchema("Columns")
15:43:26.880 10 W - [tgm]GetSchema("Indexes")
15:43:26.963 10 W - [tgm]GetSchema("IndexColumns")
15:43:27.041 10 W - [tgm]GetSchema("DataTypes")
15:43:27.214 10 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:43:27.282 10 W - 开始检查连接[tgm/SqlServer]的数据库架构……
15:43:27.335 10 W - [tgm]的所有实体类（0个）：
15:43:27.335 10 W - [tgm]需要检查架构的实体类（0个）：
15:43:27.335 10 W - 检查连接[tgm/SqlServer]的数据库架构耗时52ms
15:43:27.335 10 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
15:43:27.411 10 W - Select * From tgm_platform Where id=1
15:43:28.817 8 W - [tgm]GetSchema("Tables")
15:43:29.223 8 W - [tgm]GetSchema("Columns")
15:43:29.313 8 W - [tgm]GetSchema("Indexes")
15:43:29.399 8 W - [tgm]GetSchema("IndexColumns")
15:43:29.478 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:43:29.888 8 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
15:43:29.958 8 W - Select * From tgm_platform Where id=1
15:43:30.033 8 W - Select * From tgm_platform Where id=1
15:43:34.977 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:43:35.047 7 W - Select * From tgm_platform Order By  createtime desc

#Software: iisexpress
#ProcessID: 10440
#AppDomain: /LM/W3SVC/2/ROOT-1-130662136762025880
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
15:48:01.113 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
15:48:01.123 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
15:48:01.124 1 N - 使用数据库方式：独占，加大缓存权重
15:48:01.124 1 N - 一级缓存：关闭缓存
15:48:01.153 1 N - [DB]GetSchema("MetaDataCollections")
15:48:01.199 1 N - [DB]GetSchema("ReservedWords")
15:48:01.213 1 N - [DB]GetSchema("Databases", "tgm")
15:48:01.290 1 N - [DB]GetSchema("Tables")
15:48:01.510 1 N - [DB]GetSchema("Columns")
15:48:01.557 1 N - [DB]GetSchema("Indexes")
15:48:01.595 1 N - [DB]GetSchema("IndexColumns")
15:48:01.639 1 N - [DB]GetSchema("DataTypes")
15:48:01.753 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
15:48:01.827 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:48:01.827 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:48:01.828 1 N - DB待检查表架构的实体个数：8
15:48:02.134 1 N - 检查连接[DB/SqlServer]的数据库架构耗时381ms
15:48:02.134 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
15:48:02.163 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:48:02.192 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
15:48:12.529 8 W - [tgm]GetSchema("MetaDataCollections")
15:48:12.533 8 W - [tgm]GetSchema("ReservedWords")
15:48:12.539 8 W - [tgm]GetSchema("Databases", "tgm")
15:48:12.697 8 W - [tgm]GetSchema("Tables")
15:48:12.990 8 W - [tgm]GetSchema("Columns")
15:48:13.078 8 W - [tgm]GetSchema("Indexes")
15:48:13.158 8 W - [tgm]GetSchema("IndexColumns")
15:48:13.235 8 W - [tgm]GetSchema("DataTypes")
15:48:13.403 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:48:13.477 8 W - 开始检查连接[tgm/SqlServer]的数据库架构……
15:48:13.529 8 W - [tgm]的所有实体类（0个）：
15:48:13.530 8 W - [tgm]需要检查架构的实体类（0个）：
15:48:13.530 8 W - 检查连接[tgm/SqlServer]的数据库架构耗时53ms
15:48:13.530 8 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
15:48:13.606 8 W - Select * From tgm_platform Where id=1
15:48:15.022 7 W - [tgm]GetSchema("Tables")
15:48:15.362 7 W - [tgm]GetSchema("Columns")
15:48:15.459 7 W - [tgm]GetSchema("Indexes")
15:48:15.540 7 W - [tgm]GetSchema("IndexColumns")
15:48:15.623 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:48:15.957 7 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
15:48:16.025 7 W - Select * From tgm_platform Where id=1
15:48:16.099 7 W - Select * From tgm_platform Where id=1
15:48:22.179 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:48:22.247 7 W - Select * From tgm_platform Order By  createtime desc
15:48:28.407 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:48:28.472 9 W - Select * From tgm_server Where [pid] =4  Order By  createtime desc
15:48:28.539 9 W - Select * From tgm_platform Where id=4
15:48:30.535 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:48:30.601 7 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
15:48:30.664 7 W - Select * From tgm_platform Where id=1
15:48:30.734 7 W - Select * From tgm_platform Where id=1

#Software: iisexpress
#ProcessID: 9144
#AppDomain: /LM/W3SVC/2/ROOT-1-130662138324521109
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
15:50:34.895 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
15:50:34.904 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
15:50:34.904 1 N - 使用数据库方式：独占，加大缓存权重
15:50:34.904 1 N - 一级缓存：关闭缓存
15:50:34.972 1 N - [DB]GetSchema("MetaDataCollections")
15:50:35.000 1 N - [DB]GetSchema("ReservedWords")
15:50:35.013 1 N - [DB]GetSchema("Databases", "tgm")
15:50:35.097 1 N - [DB]GetSchema("Tables")
15:50:35.249 1 N - [DB]GetSchema("Columns")
15:50:35.304 1 N - [DB]GetSchema("Indexes")
15:50:35.340 1 N - [DB]GetSchema("IndexColumns")
15:50:35.378 1 N - [DB]GetSchema("DataTypes")
15:50:35.494 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
15:50:35.562 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:50:35.562 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:50:35.562 1 N - DB待检查表架构的实体个数：8
15:50:35.701 1 N - 检查连接[DB/SqlServer]的数据库架构耗时207ms
15:50:35.702 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
15:50:35.733 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:50:35.768 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc

#Software: iisexpress
#ProcessID: 6876
#AppDomain: /LM/W3SVC/2/ROOT-1-130662138535891339
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
15:50:58.380 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
15:50:58.389 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
15:50:58.389 1 N - 使用数据库方式：独占，加大缓存权重
15:50:58.389 1 N - 一级缓存：关闭缓存
15:50:58.416 1 N - [DB]GetSchema("MetaDataCollections")
15:50:58.465 1 N - [DB]GetSchema("ReservedWords")
15:50:58.479 1 N - [DB]GetSchema("Databases", "tgm")
15:50:58.561 1 N - [DB]GetSchema("Tables")
15:50:58.812 1 N - [DB]GetSchema("Columns")
15:50:58.860 1 N - [DB]GetSchema("Indexes")
15:50:58.896 1 N - [DB]GetSchema("IndexColumns")
15:50:58.939 1 N - [DB]GetSchema("DataTypes")
15:50:59.051 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
15:50:59.133 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:50:59.133 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:50:59.134 1 N - DB待检查表架构的实体个数：8
15:50:59.345 1 N - 检查连接[DB/SqlServer]的数据库架构耗时293ms
15:50:59.345 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
15:50:59.375 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:50:59.406 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
15:51:12.173 7 W - [tgm]GetSchema("MetaDataCollections")
15:51:12.177 7 W - [tgm]GetSchema("ReservedWords")
15:51:12.183 7 W - [tgm]GetSchema("Databases", "tgm")
15:51:12.359 7 W - [tgm]GetSchema("Tables")
15:51:12.613 7 W - [tgm]GetSchema("Columns")
15:51:12.698 7 W - [tgm]GetSchema("Indexes")
15:51:12.773 7 W - [tgm]GetSchema("IndexColumns")
15:51:12.852 7 W - [tgm]GetSchema("DataTypes")
15:51:13.031 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:51:13.098 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
15:51:13.150 7 W - [tgm]的所有实体类（0个）：
15:51:13.150 7 W - [tgm]需要检查架构的实体类（0个）：
15:51:13.150 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时52ms
15:51:13.150 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
15:51:13.229 7 W - Select * From tgm_platform Where id=1
15:51:14.591 9 W - [tgm]GetSchema("Tables")
15:51:14.844 9 W - [tgm]GetSchema("Columns")
15:51:14.942 9 W - [tgm]GetSchema("Indexes")
15:51:15.019 9 W - [tgm]GetSchema("IndexColumns")
15:51:15.101 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:51:15.413 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
15:51:15.477 9 W - Select * From tgm_platform Where id=1
15:51:15.554 9 W - Select * From tgm_platform Where id=1
15:51:20.436 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:51:20.501 11 W - Select * From tgm_platform Order By  createtime desc
15:52:27.552 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:52:27.616 8 W - Select * From tgm_server Where [pid] =4  Order By  createtime desc
15:52:27.674 8 W - Select * From tgm_platform Where id=4
15:52:29.105 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:52:29.169 10 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
15:52:29.229 10 W - Select * From tgm_platform Where id=1
15:52:29.299 10 W - Select * From tgm_platform Where id=1

#Software: iisexpress
#ProcessID: 10328
#AppDomain: /LM/W3SVC/2/ROOT-1-130662140122978010
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
15:53:34.729 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
15:53:34.739 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
15:53:34.739 1 N - 使用数据库方式：独占，加大缓存权重
15:53:34.739 1 N - 一级缓存：关闭缓存
15:53:34.805 1 N - [DB]GetSchema("MetaDataCollections")
15:53:34.831 1 N - [DB]GetSchema("ReservedWords")
15:53:34.844 1 N - [DB]GetSchema("Databases", "tgm")
15:53:34.932 1 N - [DB]GetSchema("Tables")
15:53:35.081 1 N - [DB]GetSchema("Columns")
15:53:35.134 1 N - [DB]GetSchema("Indexes")
15:53:35.179 1 N - [DB]GetSchema("IndexColumns")
15:53:35.217 1 N - [DB]GetSchema("DataTypes")
15:53:35.327 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
15:53:35.392 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:53:35.392 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
15:53:35.392 1 N - DB待检查表架构的实体个数：8
15:53:35.524 1 N - 检查连接[DB/SqlServer]的数据库架构耗时197ms
15:53:35.524 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
15:53:35.558 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:53:35.595 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
15:54:02.934 8 W - [tgm]GetSchema("MetaDataCollections")
15:54:02.937 8 W - [tgm]GetSchema("ReservedWords")
15:54:02.945 8 W - [tgm]GetSchema("Databases", "tgm")
15:54:03.109 8 W - [tgm]GetSchema("Tables")
15:54:03.364 8 W - [tgm]GetSchema("Columns")
15:54:03.452 8 W - [tgm]GetSchema("Indexes")
15:54:03.534 8 W - [tgm]GetSchema("IndexColumns")
15:54:03.612 8 W - [tgm]GetSchema("DataTypes")
15:54:03.780 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:54:03.847 8 W - 开始检查连接[tgm/SqlServer]的数据库架构……
15:54:03.889 8 W - [tgm]的所有实体类（0个）：
15:54:03.889 8 W - [tgm]需要检查架构的实体类（0个）：
15:54:03.889 8 W - 检查连接[tgm/SqlServer]的数据库架构耗时42ms
15:54:03.889 8 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
15:54:03.963 8 W - Select * From tgm_platform Where id=1
15:54:05.242 7 W - [tgm]GetSchema("Tables")
15:54:05.492 7 W - [tgm]GetSchema("Columns")
15:54:05.581 7 W - [tgm]GetSchema("Indexes")
15:54:05.655 7 W - [tgm]GetSchema("IndexColumns")
15:54:05.739 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:54:06.052 7 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
15:54:06.119 7 W - Select * From tgm_platform Where id=1
15:54:06.190 7 W - Select * From tgm_platform Where id=1
15:54:10.675 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:54:10.744 7 W - Select * From tgm_platform Order By  createtime desc
15:54:13.757 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:54:13.823 11 W - Select * From tgm_server Order By id Desc
15:54:13.958 11 W - [tgm]GetSchema("Tables")
15:54:14.203 11 W - [tgm]GetSchema("Columns")
15:54:14.287 11 W - [tgm]GetSchema("Indexes")
15:54:14.356 11 W - [tgm]GetSchema("IndexColumns")
15:54:14.426 11 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
15:54:14.493 11 W - Select Count(*) From tgm_record_pay
15:54:14.551 11 W - Select Top 10 * From tgm_record_pay Order By id Desc
15:54:14.611 11 W - Select * From tgm_platform Order By id Desc
15:54:18.808 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:54:18.872 7 W - Select * From tgm_server Order By id Desc
15:54:18.934 7 W - Select Count(*) From tgm_record_pay
15:54:18.992 7 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
15:54:19.063 7 W - Select * From tgm_platform Order By id Desc
15:54:31.000 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:54:31.074 8 W - Select * From tgm_platform Order By  createtime desc
15:54:36.692 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:54:36.761 12 W - Select * From tgm_platform Order By  createtime desc
15:54:38.131 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
15:54:38.192 8 W - Select * From tgm_server Order By id Desc
15:54:38.252 8 W - Select Count(*) From tgm_record_pay
15:54:38.314 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
15:54:38.379 8 W - Select * From tgm_platform Order By id Desc

#Software: iisexpress
#ProcessID: 10316
#AppDomain: /LM/W3SVC/2/ROOT-1-130662144980458162
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
16:01:44.770 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
16:01:44.779 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
16:01:44.779 1 N - 使用数据库方式：独占，加大缓存权重
16:01:44.779 1 N - 一级缓存：关闭缓存
16:01:44.808 1 N - [DB]GetSchema("MetaDataCollections")
16:01:44.833 1 N - [DB]GetSchema("ReservedWords")
16:01:44.847 1 N - [DB]GetSchema("Databases", "tgm")
16:01:44.940 1 N - [DB]GetSchema("Tables")
16:01:45.177 1 N - [DB]GetSchema("Columns")
16:01:45.225 1 N - [DB]GetSchema("Indexes")
16:01:45.259 1 N - [DB]GetSchema("IndexColumns")
16:01:45.300 1 N - [DB]GetSchema("DataTypes")
16:01:45.417 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
16:01:45.492 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
16:01:45.492 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
16:01:45.493 1 N - DB待检查表架构的实体个数：8
16:01:45.673 1 N - 检查连接[DB/SqlServer]的数据库架构耗时255ms
16:01:45.674 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
16:01:45.702 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:01:45.734 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
16:01:54.549 7 W - [tgm]GetSchema("MetaDataCollections")
16:01:54.552 7 W - [tgm]GetSchema("ReservedWords")
16:01:54.560 7 W - [tgm]GetSchema("Databases", "tgm")
16:01:54.722 7 W - [tgm]GetSchema("Tables")
16:01:54.954 7 W - [tgm]GetSchema("Columns")
16:01:55.039 7 W - [tgm]GetSchema("Indexes")
16:01:55.116 7 W - [tgm]GetSchema("IndexColumns")
16:01:55.189 7 W - [tgm]GetSchema("DataTypes")
16:01:55.352 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:01:55.428 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
16:01:55.480 7 W - [tgm]的所有实体类（0个）：
16:01:55.480 7 W - [tgm]需要检查架构的实体类（0个）：
16:01:55.480 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时52ms
16:01:55.480 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
16:01:55.559 7 W - Select * From tgm_platform Where id=1
16:01:56.944 6 W - [tgm]GetSchema("Tables")
16:01:57.187 6 W - [tgm]GetSchema("Columns")
16:01:57.277 6 W - [tgm]GetSchema("Indexes")
16:01:57.353 6 W - [tgm]GetSchema("IndexColumns")
16:01:57.429 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:01:57.726 6 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:01:57.794 6 W - Select * From tgm_platform Where id=1
16:01:57.874 6 W - Select * From tgm_platform Where id=1
16:02:03.683 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:02:03.750 6 W - Select * From tgm_platform Order By  createtime desc

#Software: iisexpress
#ProcessID: 7124
#AppDomain: /LM/W3SVC/2/ROOT-1-130662145654317842
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
16:02:47.921 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
16:02:47.929 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
16:02:47.929 1 N - 使用数据库方式：独占，加大缓存权重
16:02:47.929 1 N - 一级缓存：关闭缓存
16:02:47.993 1 N - [DB]GetSchema("MetaDataCollections")
16:02:48.020 1 N - [DB]GetSchema("ReservedWords")
16:02:48.033 1 N - [DB]GetSchema("Databases", "tgm")
16:02:48.121 1 N - [DB]GetSchema("Tables")
16:02:48.296 1 N - [DB]GetSchema("Columns")
16:02:48.341 1 N - [DB]GetSchema("Indexes")
16:02:48.377 1 N - [DB]GetSchema("IndexColumns")
16:02:48.420 1 N - [DB]GetSchema("DataTypes")
16:02:48.538 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
16:02:48.601 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
16:02:48.601 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
16:02:48.602 1 N - DB待检查表架构的实体个数：8
16:02:48.843 1 N - 检查连接[DB/SqlServer]的数据库架构耗时304ms
16:02:48.843 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
16:02:48.876 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:02:48.906 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
16:02:57.550 8 W - [tgm]GetSchema("MetaDataCollections")
16:02:57.554 8 W - [tgm]GetSchema("ReservedWords")
16:02:57.561 8 W - [tgm]GetSchema("Databases", "tgm")
16:02:57.722 8 W - [tgm]GetSchema("Tables")
16:02:57.958 8 W - [tgm]GetSchema("Columns")
16:02:58.042 8 W - [tgm]GetSchema("Indexes")
16:02:58.120 8 W - [tgm]GetSchema("IndexColumns")
16:02:58.196 8 W - [tgm]GetSchema("DataTypes")
16:02:58.368 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:02:58.443 8 W - 开始检查连接[tgm/SqlServer]的数据库架构……
16:02:58.484 8 W - [tgm]的所有实体类（0个）：
16:02:58.484 8 W - [tgm]需要检查架构的实体类（0个）：
16:02:58.484 8 W - 检查连接[tgm/SqlServer]的数据库架构耗时41ms
16:02:58.484 8 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
16:02:58.561 8 W - Select * From tgm_platform Where id=1
16:02:59.761 9 W - [tgm]GetSchema("Tables")
16:03:00.003 9 W - [tgm]GetSchema("Columns")
16:03:00.089 9 W - [tgm]GetSchema("Indexes")
16:03:00.165 9 W - [tgm]GetSchema("IndexColumns")
16:03:00.251 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:03:00.551 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:03:00.616 9 W - Select * From tgm_platform Where id=1
16:03:00.685 9 W - Select * From tgm_platform Where id=1
16:03:05.025 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:03:05.095 7 W - Select * From tgm_platform Order By  createtime desc

#Software: iisexpress
#ProcessID: 10368
#AppDomain: /LM/W3SVC/2/ROOT-1-130662146571060765
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
16:04:19.769 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
16:04:19.778 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
16:04:19.779 1 N - 使用数据库方式：独占，加大缓存权重
16:04:19.779 1 N - 一级缓存：关闭缓存
16:04:19.844 1 N - [DB]GetSchema("MetaDataCollections")
16:04:19.889 1 N - [DB]GetSchema("ReservedWords")
16:04:19.902 1 N - [DB]GetSchema("Databases", "tgm")
16:04:20.000 1 N - [DB]GetSchema("Tables")
16:04:20.155 1 N - [DB]GetSchema("Columns")
16:04:20.199 1 N - [DB]GetSchema("Indexes")
16:04:20.233 1 N - [DB]GetSchema("IndexColumns")
16:04:20.270 1 N - [DB]GetSchema("DataTypes")
16:04:20.391 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
16:04:20.461 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
16:04:20.461 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
16:04:20.462 1 N - DB待检查表架构的实体个数：8
16:04:20.577 1 N - 检查连接[DB/SqlServer]的数据库架构耗时186ms
16:04:20.577 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
16:04:20.606 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:04:20.636 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
16:04:31.194 8 W - [tgm]GetSchema("MetaDataCollections")
16:04:31.197 8 W - [tgm]GetSchema("ReservedWords")
16:04:31.203 8 W - [tgm]GetSchema("Databases", "tgm")
16:04:31.374 8 W - [tgm]GetSchema("Tables")
16:04:31.777 8 W - [tgm]GetSchema("Columns")
16:04:31.862 8 W - [tgm]GetSchema("Indexes")
16:04:31.938 8 W - [tgm]GetSchema("IndexColumns")
16:04:32.019 8 W - [tgm]GetSchema("DataTypes")
16:04:32.185 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:04:32.254 8 W - 开始检查连接[tgm/SqlServer]的数据库架构……
16:04:32.296 8 W - [tgm]的所有实体类（0个）：
16:04:32.296 8 W - [tgm]需要检查架构的实体类（0个）：
16:04:32.296 8 W - 检查连接[tgm/SqlServer]的数据库架构耗时42ms
16:04:32.296 8 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
16:04:32.375 8 W - Select * From tgm_platform Where id=1
16:04:33.706 9 W - [tgm]GetSchema("Tables")
16:04:34.082 9 W - [tgm]GetSchema("Columns")
16:04:34.176 9 W - [tgm]GetSchema("Indexes")
16:04:34.256 9 W - [tgm]GetSchema("IndexColumns")
16:04:34.334 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:04:34.751 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:04:34.825 9 W - Select * From tgm_platform Where id=1
16:04:34.896 9 W - Select * From tgm_platform Where id=1
16:04:39.300 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:04:39.367 7 W - Select * From tgm_platform Order By  createtime desc
16:05:27.515 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:05:27.587 11 W - Select * From tgm_server Order By id Desc
16:05:27.725 11 W - [tgm]GetSchema("Tables")
16:05:28.148 11 W - [tgm]GetSchema("Columns")
16:05:28.226 11 W - [tgm]GetSchema("Indexes")
16:05:28.301 11 W - [tgm]GetSchema("IndexColumns")
16:05:28.379 11 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:05:28.443 11 W - Select Count(*) From tgm_record_pay
16:05:28.501 11 W - Select Top 10 * From tgm_record_pay Order By id Desc
16:05:28.564 11 W - Select * From tgm_platform Order By id Desc
16:05:28.631 11 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:05:28.705 11 W - [7_1_DY-04]GetSchema("MetaDataCollections")
16:05:28.708 11 W - [7_1_DY-04]GetSchema("ReservedWords")
16:05:28.713 11 W - [7_1_DY-04]GetSchema("Databases", "tgg")
16:05:28.856 11 W - [7_1_DY-04]GetSchema("Tables")
16:05:29.208 11 W - [7_1_DY-04]GetSchema("Columns")
16:05:29.378 11 W - [7_1_DY-04]GetSchema("Indexes")
16:05:29.512 11 W - [7_1_DY-04]GetSchema("IndexColumns")
16:05:29.591 11 W - [7_1_DY-04]GetSchema("DataTypes")
16:05:29.755 11 W - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
16:05:29.803 11 W - [7_1_DY-04]的所有实体类（0个）：
16:05:29.803 11 W - [7_1_DY-04]需要检查架构的实体类（0个）：
16:05:29.803 11 W - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时48ms
16:05:29.803 11 W - Select * From tg_user_login_log Order By id Desc
16:05:29.870 11 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:05:30.360 11 W - 创建表：tg_user_login_log(玩家登陆日志表)
16:05:30.366 11 W - Create Table tg_user_login_log(
	id bigint IDENTITY(1,1) Primary Key,
	user_id bigint NOT NULL Default 0,
	login_ip nvarchar(50) NOT NULL Default N'127.0.0.1',
	login_state int NOT NULL Default 0,
	login_time bigint NOT NULL Default 0,
	logout_time bigint NOT NULL Default 0,
	login_count_day int NOT NULL Default 0,
	login_count_total int NOT NULL Default 0,
	login_time_longer_day bigint NOT NULL Default 0,
	login_time_longer_total bigint NOT NULL Default 0,
	login_open_time bigint NOT NULL Default 0
)
16:05:30.442 11 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'玩家登陆日志表' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_user_login_log'
16:05:30.507 11 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'编号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_user_login_log', @level2type=N'COLUMN',@level2name=N'id'
16:05:30.574 11 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'玩家编号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_user_login_log', @level2type=N'COLUMN',@level2name=N'user_id'
16:05:30.639 11 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'登陆IP' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_user_login_log', @level2type=N'COLUMN',@level2name=N'login_ip'
16:05:30.708 11 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'登陆状态' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_user_login_log', @level2type=N'COLUMN',@level2name=N'login_state'
16:05:30.774 11 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'上线时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_user_login_log', @level2type=N'COLUMN',@level2name=N'login_time'
16:05:30.839 11 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'下线时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_user_login_log', @level2type=N'COLUMN',@level2name=N'logout_time'
16:05:30.904 11 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'每日登录次数' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_user_login_log', @level2type=N'COLUMN',@level2name=N'login_count_day'
16:05:30.970 11 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'登陆总次数' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_user_login_log', @level2type=N'COLUMN',@level2name=N'login_count_total'
16:05:31.039 11 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'每日在线时长' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_user_login_log', @level2type=N'COLUMN',@level2name=N'login_time_longer_day'
16:05:31.103 11 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'总在线时长' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_user_login_log', @level2type=N'COLUMN',@level2name=N'login_time_longer_total'
16:05:31.167 11 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'防沉迷到达时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_user_login_log', @level2type=N'COLUMN',@level2name=N'login_open_time'
16:05:31.234 11 W - Select * From tg_user_login_log Order By id Desc
16:05:31.301 11 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:05:31.380 11 W - [1_1_DY-02]GetSchema("MetaDataCollections")
16:05:31.383 11 W - [1_1_DY-02]GetSchema("ReservedWords")
16:05:31.388 11 W - [1_1_DY-02]GetSchema("Databases", "tg_test")
16:05:31.542 11 W - [1_1_DY-02]GetSchema("Tables")
16:05:32.432 11 W - [1_1_DY-02]GetSchema("Columns")
16:05:32.608 11 W - [1_1_DY-02]GetSchema("Indexes")
16:05:32.738 11 W - [1_1_DY-02]GetSchema("IndexColumns")
16:05:32.845 11 W - [1_1_DY-02]GetSchema("DataTypes")
16:05:33.021 11 W - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
16:05:33.062 11 W - [1_1_DY-02]的所有实体类（0个）：
16:05:33.062 11 W - [1_1_DY-02]需要检查架构的实体类（0个）：
16:05:33.062 11 W - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时41ms
16:05:33.062 11 W - Select * From tg_user_login_log Order By id Desc
16:06:09.386 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:06:09.451 11 W - Select * From tgm_server Order By id Desc
16:06:09.512 11 W - Select Count(*) From tgm_record_pay
16:06:09.574 11 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
16:06:09.646 11 W - Select * From tgm_platform Order By id Desc
16:06:09.706 11 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:06:09.771 11 W - Select * From tg_user_login_log Order By id Desc
16:06:09.832 11 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:06:09.900 11 W - Select * From tg_user_login_log Order By id Desc
16:06:09.964 11 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:06:10.031 11 W - Select * From tg_user_login_log Order By id Desc
16:06:18.633 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:06:18.699 11 W - Select * From tgm_server Order By id Desc
16:06:18.762 11 W - Select Count(*) From tgm_record_pay
16:06:18.820 11 W - Select Top 10 * From tgm_record_pay Order By id Desc
16:06:18.891 11 W - Select * From tgm_platform Order By id Desc
16:06:18.952 11 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:06:19.023 11 W - Select * From tg_user_login_log Order By id Desc
16:06:19.085 11 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:06:19.148 11 W - Select * From tg_user_login_log Order By id Desc
16:06:19.212 11 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:06:19.275 11 W - Select * From tg_user_login_log Order By id Desc

#Software: iisexpress
#ProcessID: 9500
#AppDomain: /LM/W3SVC/2/ROOT-1-130662149257245401
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
16:08:48.206 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
16:08:48.215 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
16:08:48.216 1 N - 使用数据库方式：独占，加大缓存权重
16:08:48.216 1 N - 一级缓存：关闭缓存
16:08:48.280 1 N - [DB]GetSchema("MetaDataCollections")
16:08:48.305 1 N - [DB]GetSchema("ReservedWords")
16:08:48.319 1 N - [DB]GetSchema("Databases", "tgm")
16:08:48.408 1 N - [DB]GetSchema("Tables")
16:08:48.578 1 N - [DB]GetSchema("Columns")
16:08:48.622 1 N - [DB]GetSchema("Indexes")
16:08:48.657 1 N - [DB]GetSchema("IndexColumns")
16:08:48.710 1 N - [DB]GetSchema("DataTypes")
16:08:48.834 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
16:08:48.896 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
16:08:48.896 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
16:08:48.896 1 N - DB待检查表架构的实体个数：8
16:08:49.116 1 N - 检查连接[DB/SqlServer]的数据库架构耗时282ms
16:08:49.116 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
16:08:49.146 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:08:49.178 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
16:08:58.452 7 W - [tgm]GetSchema("MetaDataCollections")
16:08:58.456 7 W - [tgm]GetSchema("ReservedWords")
16:08:58.463 7 W - [tgm]GetSchema("Databases", "tgm")
16:08:58.636 7 W - [tgm]GetSchema("Tables")
16:08:58.874 7 W - [tgm]GetSchema("Columns")
16:08:58.957 7 W - [tgm]GetSchema("Indexes")
16:08:59.034 7 W - [tgm]GetSchema("IndexColumns")
16:08:59.110 7 W - [tgm]GetSchema("DataTypes")
16:08:59.286 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:08:59.356 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
16:08:59.405 7 W - [tgm]的所有实体类（0个）：
16:08:59.405 7 W - [tgm]需要检查架构的实体类（0个）：
16:08:59.405 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时48ms
16:08:59.405 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
16:08:59.484 7 W - Select * From tgm_platform Where id=1
16:09:00.802 9 W - [tgm]GetSchema("Tables")
16:09:01.044 9 W - [tgm]GetSchema("Columns")
16:09:01.131 9 W - [tgm]GetSchema("Indexes")
16:09:01.210 9 W - [tgm]GetSchema("IndexColumns")
16:09:01.294 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:09:01.591 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:09:01.657 9 W - Select * From tgm_platform Where id=1
16:09:01.727 9 W - Select * From tgm_platform Where id=1
16:09:07.896 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:09:07.964 7 W - Select * From tgm_platform Order By  createtime desc
16:09:38.863 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:09:38.930 7 W - Select * From tgm_platform Order By  createtime desc
16:09:50.397 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:09:56.308 7 W - Select * From tgm_server Order By id Desc
16:10:06.700 7 W - [tgm]GetSchema("Tables")
16:10:06.921 7 W - [tgm]GetSchema("Columns")
16:10:06.999 7 W - [tgm]GetSchema("Indexes")
16:10:07.070 7 W - [tgm]GetSchema("IndexColumns")
16:10:07.142 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:10:07.216 7 W - Select Count(*) From tgm_record_pay
16:10:07.275 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
16:10:19.456 7 W - Select * From tgm_platform Order By id Desc
16:11:23.893 7 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:11:27.112 7 W - [7_1_DY-04]GetSchema("MetaDataCollections")
16:11:27.115 7 W - [7_1_DY-04]GetSchema("ReservedWords")
16:11:27.121 7 W - [7_1_DY-04]GetSchema("Databases", "tgg")
16:11:27.291 7 W - [7_1_DY-04]GetSchema("Tables")
16:11:34.369 7 W - [7_1_DY-04]GetSchema("Columns")
16:11:34.523 7 W - [7_1_DY-04]GetSchema("Indexes")
16:11:34.603 7 W - [7_1_DY-04]GetSchema("IndexColumns")
16:11:34.683 7 W - [7_1_DY-04]GetSchema("DataTypes")
16:11:34.850 7 W - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
16:11:34.892 7 W - [7_1_DY-04]的所有实体类（0个）：
16:11:34.892 7 W - [7_1_DY-04]需要检查架构的实体类（0个）：
16:11:34.892 7 W - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时42ms
16:11:34.892 7 W - Select * From tg_user_login_log Order By id Desc
16:11:34.963 7 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:11:35.110 7 W - [tgm]GetSchema("Tables")
16:11:35.332 7 W - [tgm]GetSchema("Columns")
16:11:35.411 7 W - [tgm]GetSchema("Indexes")
16:11:35.490 7 W - [tgm]GetSchema("IndexColumns")
16:11:35.568 7 W - Select * From tg_user_login_log Order By id Desc
16:11:35.630 7 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:11:35.698 7 W - [1_1_DY-02]GetSchema("MetaDataCollections")
16:11:35.701 7 W - [1_1_DY-02]GetSchema("ReservedWords")
16:11:35.707 7 W - [1_1_DY-02]GetSchema("Databases", "tg_test")
16:11:35.851 7 W - [1_1_DY-02]GetSchema("Tables")
16:11:36.189 7 W - [1_1_DY-02]GetSchema("Columns")
16:11:36.352 7 W - [1_1_DY-02]GetSchema("Indexes")
16:11:36.427 7 W - [1_1_DY-02]GetSchema("IndexColumns")
16:11:36.504 7 W - [1_1_DY-02]GetSchema("DataTypes")
16:11:36.671 7 W - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
16:11:36.714 7 W - [1_1_DY-02]的所有实体类（0个）：
16:11:36.714 7 W - [1_1_DY-02]需要检查架构的实体类（0个）：
16:11:36.714 7 W - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时42ms
16:11:36.714 7 W - Select * From tg_user_login_log Order By id Desc
16:11:39.162 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:11:39.255 8 W - Select * From tgm_platform Order By  createtime desc
16:11:40.829 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:11:40.903 7 W - Select * From tgm_platform Order By  createtime desc
16:11:43.864 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:11:43.929 7 W - Select * From tgm_server Order By id Desc
16:11:44.008 7 W - Select Count(*) From tgm_record_pay
16:11:44.071 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
16:11:44.133 7 W - Select * From tgm_platform Order By id Desc
16:12:11.838 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:12:11.911 7 W - Select * From tgm_server Order By id Desc
16:12:11.975 7 W - Select Count(*) From tgm_record_pay
16:12:12.035 7 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
16:12:12.100 7 W - Select * From tgm_platform Order By id Desc
16:12:15.837 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:12:15.903 7 W - Select * From tgm_platform Order By  createtime desc
16:12:19.596 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:12:22.249 9 W - Select * From tgm_server Order By id Desc
16:12:24.076 9 W - Select Count(*) From tgm_record_pay
16:12:24.132 9 W - Select Top 10 * From tgm_record_pay Order By id Desc
16:12:24.895 9 W - Select * From tgm_platform Order By id Desc
16:12:30.492 9 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:12:30.575 9 W - Select * From tg_user_login_log Order By id Desc
16:12:38.560 9 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:12:38.632 9 W - Select * From tg_user_login_log Order By id Desc
16:12:47.039 9 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:12:47.979 9 W - Select * From tg_user_login_log Order By id Desc
16:13:38.363 9 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:13:41.841 9 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:14:44.225 9 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:14:49.463 9 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:15:04.713 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:15:04.776 7 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
16:15:04.837 7 W - Select * From tgm_platform Where id=1
16:15:04.915 7 W - Select * From tgm_platform Where id=1
16:15:07.602 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:15:07.669 8 W - Select * From tgm_platform Where id=1
16:15:07.736 8 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
16:15:07.807 8 W - Select Count(*) From tgm_record_pay Where sid in (1,7) and pay_state=1
16:15:07.867 8 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid in (1,7) and pay_state=1) XCode_T1 Where rowNumber Between 1 And 10
16:15:07.932 8 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:15:07.997 8 W - Select * From tg_user_login_log Order By id Desc
16:15:08.066 8 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:15:08.133 8 W - Select * From tg_user_login_log Order By id Desc
16:15:46.643 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:15:46.781 7 W - [tgm]GetSchema("Tables")
16:15:47.014 7 W - [tgm]GetSchema("Columns")
16:15:47.097 7 W - [tgm]GetSchema("Indexes")
16:15:47.176 7 W - [tgm]GetSchema("IndexColumns")
16:15:47.255 7 W - Select * From tgm_notice Where end_time>635573673467138695 and player_id=1 Order By id Desc
16:15:48.285 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:15:48.362 8 W - Select * From tgm_platform Order By  createtime desc
16:15:54.130 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:15:54.195 9 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
16:15:54.257 9 W - Select * From tgm_platform Where id=1
16:15:54.326 9 W - Select * From tgm_platform Where id=1
16:16:21.308 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:16:21.382 7 W - Select * From tgm_role Where id=1
16:16:21.464 7 W - Select * From tgm_platform Where id=1
16:16:21.544 7 W - SET NOCOUNT ON;Insert Into tgm_notice(pid, sid, player_id, start_time, end_time, content) Values(1, 7, 1, 635573700500000000, 635573718510000000, N'工坊');Select SCOPE_IDENTITY()
16:16:21.618 7 W - Select Top 1 * From tgm_server Where  name='TGM.API.Entity.Model.Server' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:16:21.787 7 W - [tgm]GetSchema("Tables")
16:16:22.061 7 W - 创建表：tg_system_notice()
16:16:22.066 7 W - Create Table tg_system_notice(
	id int IDENTITY(1,1) Primary Key,
	base_Id int NOT NULL,
	start_time bigint NOT NULL,
	end_time bigint NOT NULL,
	time_interval int NOT NULL,
	content varchar(500) NOT NULL,
	[state] int NOT NULL Default 0,
	[level] int NOT NULL
)
16:16:22.189 7 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'主键Id' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_system_notice', @level2type=N'COLUMN',@level2name=N'id'
16:16:22.260 7 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'基表Id' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_system_notice', @level2type=N'COLUMN',@level2name=N'base_Id'
16:16:22.329 7 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'开始时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_system_notice', @level2type=N'COLUMN',@level2name=N'start_time'
16:16:22.397 7 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'结束时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_system_notice', @level2type=N'COLUMN',@level2name=N'end_time'
16:16:22.465 7 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'时间间隔' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_system_notice', @level2type=N'COLUMN',@level2name=N'time_interval'
16:16:22.537 7 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'内容' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_system_notice', @level2type=N'COLUMN',@level2name=N'content'
16:16:22.604 7 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'状态' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_system_notice', @level2type=N'COLUMN',@level2name=N'state'
16:16:22.669 7 W - EXEC dbo.sp_addextendedproperty @name=N'MS_Description', @value=N'优先级别' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'tg_system_notice', @level2type=N'COLUMN',@level2name=N'level'
16:16:22.737 7 W - SET NOCOUNT ON;Insert Into tg_system_notice(base_Id, start_time, end_time, time_interval, content, [state], [level]) Values(0, 635573700500000000, 635573718510000000, 5, '工坊', 1, 2);Select SCOPE_IDENTITY()
16:16:23.777 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:16:23.846 9 W - Select * From tgm_notice Where end_time>635573673838462708 and player_id=1 Order By id Desc
16:16:23.934 9 W - Select * From tgm_platform Where id in (1) Order By id Desc
16:16:24.011 9 W - Select * From tgm_server Where id in (7) Order By id Desc
16:16:25.057 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:16:25.124 7 W - Select * From tgm_platform Order By  createtime desc
16:16:51.131 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:16:51.207 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:16:51.274 7 W - Select Count(*) From tgm_platform
16:16:51.347 7 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_platform) XCode_T1 Where rowNumber Between 1 And 10
16:17:00.908 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:17:00.976 9 W - Select * From tgm_platform Order By  createtime desc
16:17:06.476 22 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:17:11.876 22 W - Select * From tgm_server Order By id Desc
16:17:33.087 22 W - Select Count(*) From tgm_record_pay
16:17:33.149 22 W - Select Top 10 * From tgm_record_pay Order By id Desc
16:17:35.858 22 W - Select * From tgm_platform Order By id Desc
16:18:20.602 22 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:18:22.305 22 W - Select * From tg_user_login_log Order By id Desc
16:20:14.978 22 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:20:15.053 22 W - Select * From tg_user_login_log Order By id Desc
16:20:15.127 22 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:20:15.208 22 W - Select * From tg_user_login_log Order By id Desc
16:20:55.557 26 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:20:55.624 26 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
16:20:55.694 26 W - Select * From tgm_platform Where id=1
16:20:55.763 26 W - Select * From tgm_platform Where id=1
16:21:05.481 22 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:21:07.039 22 W - Select * From tgm_platform Where id=1
16:21:13.040 22 W - Select * From tgm_server Where id=7
16:21:24.272 22 W - Select Count(*) From tgm_record_pay Where sid = 7
16:21:24.333 22 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid = 7) XCode_T1 Where rowNumber Between 1 And 10
16:21:39.384 27 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:21:40.499 27 W - Select * From tgm_platform Where id=1
16:21:45.040 27 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
16:21:58.560 27 W - Select Count(*) From tgm_record_pay Where sid in (1,7) and pay_state=1
16:21:58.620 27 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid in (1,7) and pay_state=1) XCode_T1 Where rowNumber Between 1 And 10
16:22:24.874 27 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:22:25.679 27 W - Select * From tg_user_login_log Order By id Desc
16:23:55.216 27 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:23:55.317 27 W - Select * From tg_user_login_log Order By id Desc
16:24:02.797 29 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:24:02.874 29 W - Select * From tgm_platform Order By  createtime desc
16:24:07.544 27 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:24:07.619 27 W - Select * From tgm_platform Where id=1
16:24:07.681 27 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
16:24:07.741 27 W - Select Count(*) From tgm_record_pay Where sid in (1,7) and pay_state=1
16:24:07.786 27 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid in (1,7) and pay_state=1) XCode_T1 Where rowNumber Between 1 And 10
16:24:07.862 27 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:24:07.931 27 W - Select * From tg_user_login_log Order By id Desc
16:24:07.995 27 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:24:08.061 27 W - Select * From tg_user_login_log Order By id Desc
16:25:09.858 28 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:25:09.924 28 W - Select * From tgm_platform Order By  createtime desc
16:25:11.277 28 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:25:11.351 28 W - Select * From tgm_server Order By id Desc
16:25:11.414 28 W - Select Count(*) From tgm_record_pay
16:25:11.480 28 W - Select Top 10 * From tgm_record_pay Order By id Desc
16:25:11.548 28 W - Select * From tgm_platform Order By id Desc
16:25:11.612 28 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:25:11.680 28 W - Select * From tg_user_login_log Order By id Desc
16:25:11.744 28 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:25:11.808 28 W - Select * From tg_user_login_log Order By id Desc
16:25:11.874 28 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:25:11.938 28 W - Select * From tg_user_login_log Order By id Desc
16:25:17.575 32 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:25:17.646 32 W - Select * From tgm_platform Order By  createtime desc
16:25:19.045 29 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:25:19.108 29 W - Select * From tgm_server Order By id Desc
16:25:19.174 29 W - Select Count(*) From tgm_record_pay
16:25:19.221 29 W - Select Top 10 * From tgm_record_pay Order By id Desc
16:25:19.307 29 W - Select * From tgm_platform Order By id Desc
16:25:19.371 29 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:25:19.434 29 W - Select * From tg_user_login_log Order By id Desc
16:25:19.501 29 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:25:19.570 29 W - Select * From tg_user_login_log Order By id Desc
16:25:19.637 29 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:25:19.699 29 W - Select * From tg_user_login_log Order By id Desc
16:25:27.871 27 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:25:27.934 27 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
16:25:27.996 27 W - Select * From tgm_platform Where id=1
16:25:28.071 27 W - Select * From tgm_platform Where id=1
16:25:30.300 27 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:25:30.371 27 W - Select * From tgm_platform Where id=1
16:25:30.442 27 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
16:25:30.507 27 W - Select Count(*) From tgm_record_pay Where sid in (1,7) and pay_state=1
16:25:30.571 27 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid in (1,7) and pay_state=1) XCode_T1 Where rowNumber Between 1 And 10
16:25:30.636 27 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:25:30.705 27 W - Select * From tg_user_login_log Order By id Desc
16:25:30.774 27 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:25:30.844 27 W - Select * From tg_user_login_log Order By id Desc
16:25:43.059 27 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:25:43.126 27 W - Select * From tgm_platform Order By  createtime desc
16:25:44.444 32 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:25:44.511 32 W - Select * From tgm_server Order By id Desc
16:25:44.575 32 W - Select Count(*) From tgm_record_pay
16:25:44.637 32 W - Select Top 10 * From tgm_record_pay Order By id Desc
16:25:44.700 32 W - Select * From tgm_platform Order By id Desc
16:25:50.673 27 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:25:50.736 27 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
16:25:50.797 27 W - Select * From tgm_platform Where id=1
16:25:50.864 27 W - Select * From tgm_platform Where id=1
16:26:28.510 29 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:26:28.577 29 W - Select * From tgm_platform Where id=1
16:26:28.642 29 W - Select * From tgm_server Where id=7
16:26:28.709 29 W - Select Count(*) From tgm_record_pay Where sid = 7 and player_name='平良遥'
16:26:28.774 29 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid = 7 and player_name='平良遥') XCode_T1 Where rowNumber Between 1 And 10
16:27:07.817 27 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:27:09.773 27 W - Select * From tgm_platform Where id=1
16:27:12.711 27 W - Select * From tgm_server Where id=7
16:27:37.475 27 W - Select Count(*) From tgm_record_pay Where sid = 7 and player_name='平良遥'
16:27:38.315 27 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid = 7 and player_name='平良遥') XCode_T1 Where rowNumber Between 1 And 10

#Software: iisexpress
#ProcessID: 5824
#AppDomain: /LM/W3SVC/2/ROOT-1-130662165121883005
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
16:35:17.861 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
16:35:17.870 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
16:35:17.870 1 N - 使用数据库方式：独占，加大缓存权重
16:35:17.870 1 N - 一级缓存：关闭缓存
16:35:17.898 1 N - [DB]GetSchema("MetaDataCollections")
16:35:17.926 1 N - [DB]GetSchema("ReservedWords")
16:35:17.940 1 N - [DB]GetSchema("Databases", "tgm")
16:35:18.029 1 N - [DB]GetSchema("Tables")
16:35:18.225 1 N - [DB]GetSchema("Columns")
16:35:18.266 1 N - [DB]GetSchema("Indexes")
16:35:18.297 1 N - [DB]GetSchema("IndexColumns")
16:35:18.331 1 N - [DB]GetSchema("DataTypes")
16:35:18.445 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
16:35:18.551 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
16:35:18.551 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
16:35:18.551 1 N - DB待检查表架构的实体个数：8
16:35:18.750 1 N - 检查连接[DB/SqlServer]的数据库架构耗时305ms
16:35:18.751 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
16:35:18.781 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:35:18.815 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
16:35:29.227 7 W - [tgm]GetSchema("MetaDataCollections")
16:35:29.231 7 W - [tgm]GetSchema("ReservedWords")
16:35:29.237 7 W - [tgm]GetSchema("Databases", "tgm")
16:35:29.401 7 W - [tgm]GetSchema("Tables")
16:35:29.642 7 W - [tgm]GetSchema("Columns")
16:35:29.726 7 W - [tgm]GetSchema("Indexes")
16:35:29.801 7 W - [tgm]GetSchema("IndexColumns")
16:35:29.878 7 W - [tgm]GetSchema("DataTypes")
16:35:30.052 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:35:30.122 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
16:35:30.175 7 W - [tgm]的所有实体类（0个）：
16:35:30.175 7 W - [tgm]需要检查架构的实体类（0个）：
16:35:30.175 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时52ms
16:35:30.175 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
16:35:30.256 7 W - Select * From tgm_platform Where id=1
16:35:31.675 9 W - [tgm]GetSchema("Tables")
16:35:31.917 9 W - [tgm]GetSchema("Columns")
16:35:32.006 9 W - [tgm]GetSchema("Indexes")
16:35:32.084 9 W - [tgm]GetSchema("IndexColumns")
16:35:32.163 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:35:32.482 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:35:32.548 9 W - Select * From tgm_platform Where id=1
16:35:32.622 9 W - Select * From tgm_platform Where id=1
16:35:48.449 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:35:48.522 7 W - Select * From tgm_platform Order By  createtime desc
16:35:52.290 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:35:52.358 7 W - Select * From tgm_server Order By id Desc
16:35:52.493 7 W - [tgm]GetSchema("Tables")
16:35:52.726 7 W - [tgm]GetSchema("Columns")
16:35:52.808 7 W - [tgm]GetSchema("Indexes")
16:35:52.885 7 W - [tgm]GetSchema("IndexColumns")
16:35:52.960 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:35:53.025 7 W - Select Count(*) From tgm_record_pay
16:35:53.086 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
16:35:53.148 7 W - Select * From tgm_platform Order By id Desc
16:36:09.862 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:36:09.931 8 W - Select * From tgm_server Order By id Desc
16:36:09.994 8 W - Select Count(*) From tgm_record_pay
16:36:10.055 8 W - Select * From (Select *, row_number() over(Order By id Desc) as rowNumber From tgm_record_pay) XCode_T1 Where rowNumber Between 11 And 20
16:36:10.119 8 W - Select * From tgm_platform Order By id Desc

#Software: iisexpress
#ProcessID: 10164
#AppDomain: /LM/W3SVC/2/ROOT-1-130662168015493121
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
16:40:07.560 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
16:40:07.569 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
16:40:07.569 1 N - 使用数据库方式：独占，加大缓存权重
16:40:07.569 1 N - 一级缓存：关闭缓存
16:40:07.598 1 N - [DB]GetSchema("MetaDataCollections")
16:40:07.622 1 N - [DB]GetSchema("ReservedWords")
16:40:07.636 1 N - [DB]GetSchema("Databases", "tgm")
16:40:07.717 1 N - [DB]GetSchema("Tables")
16:40:08.096 1 N - [DB]GetSchema("Columns")
16:40:08.145 1 N - [DB]GetSchema("Indexes")
16:40:08.199 1 N - [DB]GetSchema("IndexColumns")
16:40:08.235 1 N - [DB]GetSchema("DataTypes")
16:40:08.343 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
16:40:08.427 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
16:40:08.427 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
16:40:08.428 1 N - DB待检查表架构的实体个数：8
16:40:08.626 1 N - 检查连接[DB/SqlServer]的数据库架构耗时281ms
16:40:08.626 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
16:40:08.658 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:40:08.688 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
16:40:18.323 9 W - [tgm]GetSchema("MetaDataCollections")
16:40:18.327 9 W - [tgm]GetSchema("ReservedWords")
16:40:18.332 9 W - [tgm]GetSchema("Databases", "tgm")
16:40:18.500 9 W - [tgm]GetSchema("Tables")
16:40:18.825 9 W - [tgm]GetSchema("Columns")
16:40:18.909 9 W - [tgm]GetSchema("Indexes")
16:40:18.984 9 W - [tgm]GetSchema("IndexColumns")
16:40:19.060 9 W - [tgm]GetSchema("DataTypes")
16:40:19.228 9 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:40:19.297 9 W - 开始检查连接[tgm/SqlServer]的数据库架构……
16:40:19.349 9 W - [tgm]的所有实体类（0个）：
16:40:19.349 9 W - [tgm]需要检查架构的实体类（0个）：
16:40:19.349 9 W - 检查连接[tgm/SqlServer]的数据库架构耗时52ms
16:40:19.349 9 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
16:40:19.424 9 W - Select * From tgm_platform Where id=1
16:40:20.836 8 W - [tgm]GetSchema("Tables")
16:40:21.205 8 W - [tgm]GetSchema("Columns")
16:40:21.291 8 W - [tgm]GetSchema("Indexes")
16:40:21.376 8 W - [tgm]GetSchema("IndexColumns")
16:40:21.453 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:40:21.945 8 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:40:22.011 8 W - Select * From tgm_platform Where id=1
16:40:22.082 8 W - Select * From tgm_platform Where id=1
16:40:30.463 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:40:30.538 7 W - Select * From tgm_platform Order By  createtime desc
16:40:33.791 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:40:33.857 7 W - Select * From tgm_server Order By id Desc
16:40:33.985 7 W - [tgm]GetSchema("Tables")
16:40:34.349 7 W - [tgm]GetSchema("Columns")
16:40:34.428 7 W - [tgm]GetSchema("Indexes")
16:40:34.503 7 W - [tgm]GetSchema("IndexColumns")
16:40:34.573 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
16:40:34.639 7 W - Select Count(*) From tgm_record_pay
16:40:34.697 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
16:40:34.758 7 W - Select * From tgm_platform Order By id Desc
16:40:34.825 7 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:40:34.896 7 W - [7_1_DY-04]GetSchema("MetaDataCollections")
16:40:34.899 7 W - [7_1_DY-04]GetSchema("ReservedWords")
16:40:34.904 7 W - [7_1_DY-04]GetSchema("Databases", "tgg")
16:40:35.046 7 W - [7_1_DY-04]GetSchema("Tables")
16:40:35.605 7 W - [7_1_DY-04]GetSchema("Columns")
16:40:35.761 7 W - [7_1_DY-04]GetSchema("Indexes")
16:40:35.877 7 W - [7_1_DY-04]GetSchema("IndexColumns")
16:40:35.960 7 W - [7_1_DY-04]GetSchema("DataTypes")
16:40:36.131 7 W - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
16:40:36.220 7 W - [7_1_DY-04]的所有实体类（0个）：
16:40:36.220 7 W - [7_1_DY-04]需要检查架构的实体类（0个）：
16:40:36.220 7 W - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时89ms
16:40:36.220 7 W - Select * From tg_user_login_log Order By id Desc
16:40:36.285 7 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:40:36.708 7 W - Select * From tg_user_login_log Order By id Desc
16:40:36.770 7 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
16:40:36.852 7 W - [1_1_DY-02]GetSchema("MetaDataCollections")
16:40:36.855 7 W - [1_1_DY-02]GetSchema("ReservedWords")
16:40:36.860 7 W - [1_1_DY-02]GetSchema("Databases", "tgg")
16:40:37.019 7 W - [1_1_DY-02]GetSchema("Tables")
16:40:37.564 7 W - [1_1_DY-02]GetSchema("Columns")
16:40:37.725 7 W - [1_1_DY-02]GetSchema("Indexes")
16:40:37.808 7 W - [1_1_DY-02]GetSchema("IndexColumns")
16:40:37.892 7 W - [1_1_DY-02]GetSchema("DataTypes")
16:40:38.061 7 W - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
16:40:38.113 7 W - [1_1_DY-02]的所有实体类（0个）：
16:40:38.113 7 W - [1_1_DY-02]需要检查架构的实体类（0个）：
16:40:38.113 7 W - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时51ms
16:40:38.113 7 W - Select * From tg_user_login_log Order By id Desc
16:40:57.290 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:40:57.356 7 W - Select * From tgm_platform Order By  createtime desc
16:41:00.374 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:41:00.442 9 W - Select * From tgm_server Order By id Desc
16:41:00.505 9 W - Select Count(*) From tgm_record_pay
16:41:00.568 9 W - Select Top 10 * From tgm_record_pay Order By id Desc
16:41:00.630 9 W - Select * From tgm_platform Order By id Desc
16:41:26.736 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
16:41:26.803 7 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
16:41:26.865 7 W - Select * From tgm_platform Where id=1
16:41:26.933 7 W - Select * From tgm_platform Where id=1

#Software: iisexpress
#ProcessID: 9672
#AppDomain: /LM/W3SVC/2/ROOT-1-130662184114504648
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
17:06:54.133 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
17:06:54.142 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
17:06:54.142 1 N - 使用数据库方式：独占，加大缓存权重
17:06:54.142 1 N - 一级缓存：关闭缓存
17:06:54.209 1 N - [DB]GetSchema("MetaDataCollections")
17:06:54.236 1 N - [DB]GetSchema("ReservedWords")
17:06:54.250 1 N - [DB]GetSchema("Databases", "tgm")
17:06:54.368 1 N - [DB]GetSchema("Tables")
17:06:54.524 1 N - [DB]GetSchema("Columns")
17:06:54.568 1 N - [DB]GetSchema("Indexes")
17:06:54.608 1 N - [DB]GetSchema("IndexColumns")
17:06:54.650 1 N - [DB]GetSchema("DataTypes")
17:06:54.767 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
17:06:54.828 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
17:06:54.828 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
17:06:54.829 1 N - DB待检查表架构的实体个数：8
17:06:54.996 1 N - 检查连接[DB/SqlServer]的数据库架构耗时229ms
17:06:54.996 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
17:06:55.027 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
17:06:55.062 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
17:07:04.414 7 W - [tgm]GetSchema("MetaDataCollections")
17:07:04.417 7 W - [tgm]GetSchema("ReservedWords")
17:07:04.423 7 W - [tgm]GetSchema("Databases", "tgm")
17:07:04.610 7 W - [tgm]GetSchema("Tables")
17:07:04.915 7 W - [tgm]GetSchema("Columns")
17:07:05.009 7 W - [tgm]GetSchema("Indexes")
17:07:05.087 7 W - [tgm]GetSchema("IndexColumns")
17:07:05.164 7 W - [tgm]GetSchema("DataTypes")
17:07:05.342 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
17:07:05.414 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
17:07:05.455 7 W - [tgm]的所有实体类（0个）：
17:07:05.455 7 W - [tgm]需要检查架构的实体类（0个）：
17:07:05.455 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时42ms
17:07:05.455 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
17:07:05.535 7 W - Select * From tgm_platform Where id=1
17:07:06.858 9 W - [tgm]GetSchema("Tables")
17:07:07.103 9 W - [tgm]GetSchema("Columns")
17:07:07.190 9 W - [tgm]GetSchema("Indexes")
17:07:07.269 9 W - [tgm]GetSchema("IndexColumns")
17:07:07.347 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:07:07.656 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:07:07.721 9 W - Select * From tgm_platform Where id=1
17:07:07.798 9 W - Select * From tgm_platform Where id=1
17:07:12.830 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:07:12.903 9 W - Select * From tgm_platform Order By  createtime desc
17:07:15.646 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:07:15.711 8 W - Select * From tgm_server Order By id Desc
17:07:15.847 8 W - [tgm]GetSchema("Tables")
17:07:16.089 8 W - [tgm]GetSchema("Columns")
17:07:16.172 8 W - [tgm]GetSchema("Indexes")
17:07:16.244 8 W - [tgm]GetSchema("IndexColumns")
17:07:16.318 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
17:07:16.383 8 W - Select Count(*) From tgm_record_pay
17:07:16.441 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:07:16.503 8 W - Select * From tgm_platform Order By id Desc
17:07:16.565 8 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:07:16.641 8 W - [7_1_DY-04]GetSchema("MetaDataCollections")
17:07:16.644 8 W - [7_1_DY-04]GetSchema("ReservedWords")
17:07:16.650 8 W - [7_1_DY-04]GetSchema("Databases", "tgg")
17:07:16.796 8 W - [7_1_DY-04]GetSchema("Tables")
17:07:17.150 8 W - [7_1_DY-04]GetSchema("Columns")
17:07:17.308 8 W - [7_1_DY-04]GetSchema("Indexes")
17:07:17.401 8 W - [7_1_DY-04]GetSchema("IndexColumns")
17:07:17.480 8 W - [7_1_DY-04]GetSchema("DataTypes")
17:07:17.655 8 W - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
17:07:17.695 8 W - [7_1_DY-04]的所有实体类（0个）：
17:07:17.695 8 W - [7_1_DY-04]需要检查架构的实体类（0个）：
17:07:17.696 8 W - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时41ms
17:07:17.696 8 W - Select * From tg_user_login_log Order By id Desc
17:07:17.769 8 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:07:18.075 8 W - Select * From tg_user_login_log Order By id Desc
17:07:18.136 8 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:07:18.206 8 W - [1_1_DY-02]GetSchema("MetaDataCollections")
17:07:18.209 8 W - [1_1_DY-02]GetSchema("ReservedWords")
17:07:18.214 8 W - [1_1_DY-02]GetSchema("Databases", "tgg")
17:07:18.365 8 W - [1_1_DY-02]GetSchema("Tables")
17:07:18.645 8 W - [1_1_DY-02]GetSchema("Columns")
17:07:18.796 8 W - [1_1_DY-02]GetSchema("Indexes")
17:07:18.872 8 W - [1_1_DY-02]GetSchema("IndexColumns")
17:07:18.949 8 W - [1_1_DY-02]GetSchema("DataTypes")
17:07:19.116 8 W - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
17:07:19.157 8 W - [1_1_DY-02]的所有实体类（0个）：
17:07:19.157 8 W - [1_1_DY-02]需要检查架构的实体类（0个）：
17:07:19.157 8 W - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时41ms
17:07:19.157 8 W - Select * From tg_user_login_log Order By id Desc
17:07:27.361 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:07:27.431 7 W - Select * From tgm_platform Order By  createtime desc
17:07:30.378 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:07:30.449 8 W - Select * From tgm_server Order By id Desc
17:07:30.514 8 W - Select Count(*) From tgm_record_pay
17:07:30.573 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:07:30.634 8 W - Select * From tgm_platform Order By id Desc
17:07:35.414 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:07:35.484 7 W - Select * From tgm_platform Order By  createtime desc
17:07:36.842 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:07:36.906 7 W - Select * From tgm_server Order By id Desc
17:07:36.970 7 W - Select Count(*) From tgm_record_pay
17:07:37.034 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:07:37.097 7 W - Select * From tgm_platform Order By id Desc
17:07:37.158 7 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:07:37.223 7 W - Select * From tg_user_login_log Order By id Desc
17:07:37.291 7 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:07:37.356 7 W - Select * From tg_user_login_log Order By id Desc
17:07:37.418 7 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:07:37.484 7 W - Select * From tg_user_login_log Order By id Desc
17:07:55.833 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:07:55.900 9 W - Select * From tgm_platform Order By  createtime desc
17:07:57.262 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:07:57.333 8 W - Select * From tgm_server Order By id Desc
17:07:57.398 8 W - Select Count(*) From tgm_record_pay
17:07:57.458 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:07:57.521 8 W - Select * From tgm_platform Order By id Desc
17:08:04.088 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:08:04.156 8 W - Select * From tgm_platform Order By  createtime desc
17:08:05.579 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:08:05.643 11 W - Select * From tgm_server Order By id Desc
17:08:05.709 11 W - Select Count(*) From tgm_record_pay
17:08:05.768 11 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:08:05.831 11 W - Select * From tgm_platform Order By id Desc
17:08:24.442 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:08:24.511 8 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
17:08:24.572 8 W - Select * From tgm_platform Where id=1
17:08:24.637 8 W - Select * From tgm_platform Where id=1
17:08:41.064 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:08:41.134 12 W - Select * From tgm_platform Where id=1
17:08:41.198 12 W - Select * From tgm_server Where id=1
17:08:41.266 12 W - Select Count(*) From tgm_record_pay Where sid = 1 and player_name='平良遥'
17:08:41.325 12 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid = 1 and player_name='平良遥') XCode_T1 Where rowNumber Between 1 And 10
17:08:49.004 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:08:49.069 8 W - Select * From tgm_platform Where id=1
17:08:49.131 8 W - Select * From tgm_server Where id=1
17:08:49.199 8 W - Select Count(*) From tgm_record_pay Where sid = 1 and player_name='平良遥'
17:08:49.257 8 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid = 1 and player_name='平良遥') XCode_T1 Where rowNumber Between 11 And 20
17:08:51.641 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:08:51.703 8 W - Select * From tgm_platform Where id=1
17:08:51.772 8 W - Select * From tgm_server Where id=1
17:08:51.835 8 W - Select Count(*) From tgm_record_pay Where sid = 1 and player_name='平良遥'
17:08:51.892 8 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid = 1 and player_name='平良遥') XCode_T1 Where rowNumber Between 1 And 10
17:09:24.926 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:09:24.991 9 W - Select * From tgm_platform Order By  createtime desc
17:09:26.348 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:09:26.412 9 W - Select * From tgm_server Order By id Desc
17:09:26.481 9 W - Select Count(*) From tgm_record_pay
17:09:26.540 9 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:09:26.602 9 W - Select * From tgm_platform Order By id Desc
17:09:26.665 9 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:09:26.729 9 W - Select * From tg_user_login_log Order By id Desc
17:09:26.797 9 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:09:26.864 9 W - Select * From tg_user_login_log Order By id Desc
17:09:26.927 9 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:09:26.991 9 W - Select * From tg_user_login_log Order By id Desc
17:12:44.391 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:12:44.459 12 W - Select * From tgm_platform Order By  createtime desc
17:12:45.838 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:12:45.887 12 W - Select * From tgm_server Order By id Desc
17:12:45.970 12 W - Select Count(*) From tgm_record_pay
17:12:46.033 12 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:12:46.096 12 W - Select * From tgm_platform Order By id Desc
17:12:56.985 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:12:57.055 12 W - Select * From tgm_platform Order By  createtime desc
17:12:58.371 18 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:12:58.436 18 W - Select * From tgm_server Order By id Desc
17:12:58.507 18 W - Select Count(*) From tgm_record_pay
17:12:58.567 18 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:12:58.634 18 W - Select * From tgm_platform Order By id Desc
17:12:58.697 18 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:12:58.764 18 W - Select * From tg_user_login_log Order By id Desc
17:12:58.827 18 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:12:58.898 18 W - Select * From tg_user_login_log Order By id Desc
17:12:58.958 18 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:12:59.023 18 W - Select * From tg_user_login_log Order By id Desc
17:16:54.860 25 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:16:54.928 25 W - Select * From tgm_platform Order By  createtime desc
17:16:56.382 21 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:16:56.450 21 W - Select * From tgm_server Order By id Desc
17:16:56.519 21 W - Select Count(*) From tgm_record_pay
17:16:56.581 21 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:16:56.647 21 W - Select * From tgm_platform Order By id Desc
17:16:56.715 21 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:16:56.789 21 W - Select * From tg_user_login_log Order By id Desc
17:16:56.853 21 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:16:56.919 21 W - Select * From tg_user_login_log Order By id Desc
17:16:56.998 21 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:16:57.065 21 W - Select * From tg_user_login_log Order By id Desc
17:17:07.724 20 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:17:07.792 20 W - Select * From tgm_platform Order By  createtime desc
17:17:09.140 20 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:17:09.206 20 W - Select * From tgm_server Order By id Desc
17:17:09.272 20 W - Select Count(*) From tgm_record_pay
17:17:09.336 20 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:17:09.398 20 W - Select * From tgm_platform Order By id Desc
17:17:10.805 22 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:17:10.875 22 W - Select * From tgm_platform Order By  createtime desc
17:17:12.169 24 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:17:12.238 24 W - Select * From tgm_server Order By id Desc
17:17:12.300 24 W - Select Count(*) From tgm_record_pay
17:17:12.363 24 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:17:12.430 24 W - Select * From tgm_platform Order By id Desc
17:17:12.493 24 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:17:12.559 24 W - Select * From tg_user_login_log Order By id Desc
17:17:12.626 24 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:17:12.693 24 W - Select * From tg_user_login_log Order By id Desc
17:17:12.754 24 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:17:12.819 24 W - Select * From tg_user_login_log Order By id Desc

#Software: iisexpress
#ProcessID: 8696
#AppDomain: /LM/W3SVC/2/ROOT-1-130662191181828285
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
17:18:40.777 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
17:18:40.787 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
17:18:40.787 1 N - 使用数据库方式：独占，加大缓存权重
17:18:40.787 1 N - 一级缓存：关闭缓存
17:18:40.857 1 N - [DB]GetSchema("MetaDataCollections")
17:18:40.882 1 N - [DB]GetSchema("ReservedWords")
17:18:40.897 1 N - [DB]GetSchema("Databases", "tgm")
17:18:40.994 1 N - [DB]GetSchema("Tables")
17:18:41.131 1 N - [DB]GetSchema("Columns")
17:18:41.174 1 N - [DB]GetSchema("Indexes")
17:18:41.209 1 N - [DB]GetSchema("IndexColumns")
17:18:41.249 1 N - [DB]GetSchema("DataTypes")
17:18:41.366 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
17:18:41.430 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
17:18:41.430 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
17:18:41.431 1 N - DB待检查表架构的实体个数：8
17:18:41.554 1 N - 检查连接[DB/SqlServer]的数据库架构耗时188ms
17:18:41.554 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
17:18:41.583 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
17:18:41.613 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
17:19:02.435 7 W - [tgm]GetSchema("MetaDataCollections")
17:19:02.439 7 W - [tgm]GetSchema("ReservedWords")
17:19:02.446 7 W - [tgm]GetSchema("Databases", "tgm")
17:19:02.604 7 W - [tgm]GetSchema("Tables")
17:19:02.884 7 W - [tgm]GetSchema("Columns")
17:19:02.968 7 W - [tgm]GetSchema("Indexes")
17:19:03.046 7 W - [tgm]GetSchema("IndexColumns")
17:19:03.126 7 W - [tgm]GetSchema("DataTypes")
17:19:03.293 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
17:19:03.365 7 W - 开始检查连接[tgm/SqlServer]的数据库架构……
17:19:03.407 7 W - [tgm]的所有实体类（0个）：
17:19:03.407 7 W - [tgm]需要检查架构的实体类（0个）：
17:19:03.407 7 W - 检查连接[tgm/SqlServer]的数据库架构耗时42ms
17:19:03.407 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
17:19:03.486 7 W - Select * From tgm_platform Where id=1
17:19:04.809 8 W - [tgm]GetSchema("Tables")
17:19:05.120 8 W - [tgm]GetSchema("Columns")
17:19:05.212 8 W - [tgm]GetSchema("Indexes")
17:19:05.296 8 W - [tgm]GetSchema("IndexColumns")
17:19:05.382 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:19:05.795 8 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:19:05.864 8 W - Select * From tgm_platform Where id=1
17:19:05.936 8 W - Select * From tgm_platform Where id=1
17:19:10.515 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:19:10.587 6 W - Select * From tgm_platform Order By  createtime desc
17:19:15.756 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:19:20.594 6 W - Select * From tgm_server Order By id Desc
17:19:20.728 6 W - [tgm]GetSchema("Tables")
17:19:21.023 6 W - [tgm]GetSchema("Columns")
17:19:21.105 6 W - [tgm]GetSchema("Indexes")
17:19:21.184 6 W - [tgm]GetSchema("IndexColumns")
17:19:21.257 6 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
17:19:21.323 6 W - Select Count(*) From tgm_record_pay
17:19:21.382 6 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:19:21.448 6 W - Select * From tgm_platform Order By id Desc
17:19:21.514 6 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:19:21.594 6 W - [7_1_DY-04]GetSchema("MetaDataCollections")
17:19:21.597 6 W - [7_1_DY-04]GetSchema("ReservedWords")
17:19:21.603 6 W - [7_1_DY-04]GetSchema("Databases", "tgg")
17:19:21.787 6 W - [7_1_DY-04]GetSchema("Tables")
17:19:22.097 6 W - [7_1_DY-04]GetSchema("Columns")
17:19:22.273 6 W - [7_1_DY-04]GetSchema("Indexes")
17:19:22.353 6 W - [7_1_DY-04]GetSchema("IndexColumns")
17:19:22.431 6 W - [7_1_DY-04]GetSchema("DataTypes")
17:19:22.604 6 W - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
17:19:22.645 6 W - [7_1_DY-04]的所有实体类（0个）：
17:19:22.645 6 W - [7_1_DY-04]需要检查架构的实体类（0个）：
17:19:22.645 6 W - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时41ms
17:19:22.645 6 W - Select * From tg_user_login_log Order By id Desc
17:19:22.714 6 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:19:23.060 6 W - Select * From tg_user_login_log Order By id Desc
17:19:23.123 6 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:19:23.194 6 W - [1_1_DY-02]GetSchema("MetaDataCollections")
17:19:23.197 6 W - [1_1_DY-02]GetSchema("ReservedWords")
17:19:23.203 6 W - [1_1_DY-02]GetSchema("Databases", "tgg")
17:19:23.353 6 W - [1_1_DY-02]GetSchema("Tables")
17:19:23.634 6 W - [1_1_DY-02]GetSchema("Columns")
17:19:23.789 6 W - [1_1_DY-02]GetSchema("Indexes")
17:19:23.890 6 W - [1_1_DY-02]GetSchema("IndexColumns")
17:19:23.968 6 W - [1_1_DY-02]GetSchema("DataTypes")
17:19:24.141 6 W - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
17:19:24.182 6 W - [1_1_DY-02]的所有实体类（0个）：
17:19:24.182 6 W - [1_1_DY-02]需要检查架构的实体类（0个）：
17:19:24.182 6 W - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时41ms
17:19:24.182 6 W - Select * From tg_user_login_log Order By id Desc
17:20:46.719 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:20:46.787 6 W - Select * From tgm_platform Order By  createtime desc
17:20:49.825 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:20:49.894 6 W - Select * From tgm_server Order By id Desc
17:20:49.963 6 W - Select Count(*) From tgm_record_pay
17:20:50.021 6 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:20:50.090 6 W - Select * From tgm_platform Order By id Desc
17:21:31.528 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:21:31.594 12 W - Select * From tgm_platform Order By  createtime desc
17:21:32.970 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:21:33.033 7 W - Select * From tgm_server Order By id Desc
17:21:33.096 7 W - Select Count(*) From tgm_record_pay
17:21:33.152 7 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:21:33.215 7 W - Select * From tgm_platform Order By id Desc
17:21:33.289 7 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:21:33.354 7 W - Select * From tg_user_login_log Order By id Desc
17:21:33.421 7 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:21:33.486 7 W - Select * From tg_user_login_log Order By id Desc
17:21:33.551 7 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:21:33.615 7 W - Select * From tg_user_login_log Order By id Desc
17:21:51.508 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:21:51.579 7 W - Select * From tgm_platform Order By  createtime desc
17:21:52.939 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:21:53.008 12 W - Select * From tgm_server Order By id Desc
17:21:53.072 12 W - Select Count(*) From tgm_record_pay
17:21:53.135 12 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:21:53.203 12 W - Select * From tgm_platform Order By id Desc
17:21:54.440 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:21:54.507 8 W - Select * From tgm_platform Order By  createtime desc
17:21:55.863 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:21:55.929 12 W - Select * From tgm_server Order By id Desc
17:21:55.991 12 W - Select Count(*) From tgm_record_pay
17:21:56.049 12 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:21:56.121 12 W - Select * From tgm_platform Order By id Desc
17:21:56.183 12 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:21:56.249 12 W - Select * From tg_user_login_log Order By id Desc
17:21:56.311 12 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:21:56.379 12 W - Select * From tg_user_login_log Order By id Desc
17:21:56.444 12 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:21:56.509 12 W - Select * From tg_user_login_log Order By id Desc
17:22:09.341 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:22:09.410 7 W - Select * From tgm_platform Order By  createtime desc
17:22:10.748 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:22:10.812 12 W - Select * From tgm_server Order By id Desc
17:22:10.877 12 W - Select Count(*) From tgm_record_pay
17:22:10.939 12 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:22:11.007 12 W - Select * From tgm_platform Order By id Desc
17:22:12.419 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:22:12.495 8 W - Select * From tgm_platform Order By  createtime desc
17:22:19.867 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:22:19.941 8 W - Select * From tgm_server Order By id Desc
17:22:20.003 8 W - Select Count(*) From tgm_record_pay
17:22:20.063 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:22:20.123 8 W - Select * From tgm_platform Order By id Desc
17:22:20.196 8 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:22:20.261 8 W - Select * From tg_user_login_log Order By id Desc
17:22:20.333 8 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:22:20.396 8 W - Select * From tg_user_login_log Order By id Desc
17:22:20.459 8 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:22:20.536 8 W - Select * From tg_user_login_log Order By id Desc

#Software: iisexpress
#ProcessID: 8380
#AppDomain: /LM/W3SVC/2/ROOT-1-130662193948593073
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
17:23:21.971 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
17:23:21.979 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
17:23:21.979 1 N - 使用数据库方式：独占，加大缓存权重
17:23:21.979 1 N - 一级缓存：关闭缓存
17:23:22.008 1 N - [DB]GetSchema("MetaDataCollections")
17:23:22.053 1 N - [DB]GetSchema("ReservedWords")
17:23:22.068 1 N - [DB]GetSchema("Databases", "tgm")
17:23:22.154 1 N - [DB]GetSchema("Tables")
17:23:22.279 1 N - [DB]GetSchema("Columns")
17:23:22.323 1 N - [DB]GetSchema("Indexes")
17:23:22.354 1 N - [DB]GetSchema("IndexColumns")
17:23:22.388 1 N - [DB]GetSchema("DataTypes")
17:23:22.497 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
17:23:22.579 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
17:23:22.579 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
17:23:22.579 1 N - DB待检查表架构的实体个数：8
17:23:22.721 1 N - 检查连接[DB/SqlServer]的数据库架构耗时224ms
17:23:22.721 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
17:23:22.751 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
17:23:22.787 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
17:23:32.531 5 W - [tgm]GetSchema("MetaDataCollections")
17:23:32.535 5 W - [tgm]GetSchema("ReservedWords")
17:23:32.541 5 W - [tgm]GetSchema("Databases", "tgm")
17:23:32.710 5 W - [tgm]GetSchema("Tables")
17:23:33.018 5 W - [tgm]GetSchema("Columns")
17:23:33.106 5 W - [tgm]GetSchema("Indexes")
17:23:33.185 5 W - [tgm]GetSchema("IndexColumns")
17:23:33.273 5 W - [tgm]GetSchema("DataTypes")
17:23:33.448 5 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
17:23:33.519 5 W - 开始检查连接[tgm/SqlServer]的数据库架构……
17:23:33.582 5 W - [tgm]的所有实体类（0个）：
17:23:33.582 5 W - [tgm]需要检查架构的实体类（0个）：
17:23:33.582 5 W - 检查连接[tgm/SqlServer]的数据库架构耗时62ms
17:23:33.582 5 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
17:23:33.664 5 W - Select * From tgm_platform Where id=1
17:23:35.110 6 W - [tgm]GetSchema("Tables")
17:23:35.373 6 W - [tgm]GetSchema("Columns")
17:23:35.464 6 W - [tgm]GetSchema("Indexes")
17:23:35.548 6 W - [tgm]GetSchema("IndexColumns")
17:23:35.629 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:23:36.000 6 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:23:36.071 6 W - Select * From tgm_platform Where id=1
17:23:36.149 6 W - Select * From tgm_platform Where id=1
17:23:41.350 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:23:41.424 5 W - Select * From tgm_platform Order By  createtime desc
17:23:44.706 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:23:44.776 5 W - Select * From tgm_server Order By id Desc
17:23:44.912 5 W - [tgm]GetSchema("Tables")
17:23:45.165 5 W - [tgm]GetSchema("Columns")
17:23:45.249 5 W - [tgm]GetSchema("Indexes")
17:23:45.319 5 W - [tgm]GetSchema("IndexColumns")
17:23:45.391 5 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
17:23:45.458 5 W - Select Count(*) From tgm_record_pay
17:23:45.525 5 W - Select Top 10 * From tgm_record_pay Order By id Desc
17:23:45.587 5 W - Select * From tgm_platform Order By id Desc
17:23:45.651 5 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:23:45.723 5 W - [7_1_DY-04]GetSchema("MetaDataCollections")
17:23:45.726 5 W - [7_1_DY-04]GetSchema("ReservedWords")
17:23:45.733 5 W - [7_1_DY-04]GetSchema("Databases", "tgg")
17:23:45.882 5 W - [7_1_DY-04]GetSchema("Tables")
17:23:46.319 5 W - [7_1_DY-04]GetSchema("Columns")
17:23:46.490 5 W - [7_1_DY-04]GetSchema("Indexes")
17:23:46.607 5 W - [7_1_DY-04]GetSchema("IndexColumns")
17:23:46.685 5 W - [7_1_DY-04]GetSchema("DataTypes")
17:23:46.859 5 W - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
17:23:46.911 5 W - [7_1_DY-04]的所有实体类（0个）：
17:23:46.911 5 W - [7_1_DY-04]需要检查架构的实体类（0个）：
17:23:46.911 5 W - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时52ms
17:23:46.911 5 W - Select * From tg_user_login_log Order By id Desc
17:23:46.979 5 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:23:47.281 5 W - Select * From tg_user_login_log Order By id Desc
17:23:47.343 5 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:23:47.413 5 W - [1_1_DY-02]GetSchema("MetaDataCollections")
17:23:47.416 5 W - [1_1_DY-02]GetSchema("ReservedWords")
17:23:47.423 5 W - [1_1_DY-02]GetSchema("Databases", "tgg")
17:23:47.572 5 W - [1_1_DY-02]GetSchema("Tables")
17:23:47.942 5 W - [1_1_DY-02]GetSchema("Columns")
17:23:48.122 5 W - [1_1_DY-02]GetSchema("Indexes")
17:23:48.196 5 W - [1_1_DY-02]GetSchema("IndexColumns")
17:23:48.278 5 W - [1_1_DY-02]GetSchema("DataTypes")
17:23:48.457 5 W - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
17:23:48.508 5 W - [1_1_DY-02]的所有实体类（0个）：
17:23:48.508 5 W - [1_1_DY-02]需要检查架构的实体类（0个）：
17:23:48.508 5 W - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时51ms
17:23:48.508 5 W - Select * From tg_user_login_log Order By id Desc
17:24:06.300 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:24:06.369 6 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
17:24:06.432 6 W - Select * From tgm_platform Where id=1
17:24:06.496 6 W - Select * From tgm_platform Where id=1
17:24:13.191 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:24:13.258 5 W - Select * From tgm_platform Where id=1
17:24:13.324 5 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
17:24:13.384 5 W - Select Count(*) From tgm_record_pay Where sid in (1,7) and pay_state=1
17:24:13.446 5 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid in (1,7) and pay_state=1) XCode_T1 Where rowNumber Between 1 And 10
17:24:13.517 5 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:24:13.583 5 W - Select * From tg_user_login_log Order By id Desc
17:24:13.646 5 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:24:13.716 5 W - Select * From tg_user_login_log Order By id Desc
17:24:21.935 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:24:22.000 5 W - Select * From tgm_platform Where id=1
17:24:22.067 5 W - Select * From tgm_server Where id=7
17:24:22.135 5 W - Select Count(*) From tgm_record_pay Where sid = 7
17:24:22.193 5 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid = 7) XCode_T1 Where rowNumber Between 1 And 10
17:24:22.256 5 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:24:22.319 5 W - Select * From tg_user_login_log Order By id Desc
17:24:32.760 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:24:32.822 5 W - Select * From tgm_platform Where id=1
17:24:32.887 5 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
17:24:32.949 5 W - Select Count(*) From tgm_record_pay Where sid in (1,7) and pay_state=1
17:24:33.006 5 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid in (1,7) and pay_state=1) XCode_T1 Where rowNumber Between 1 And 10
17:24:33.069 5 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:24:33.138 5 W - Select * From tg_user_login_log Order By id Desc
17:24:33.200 5 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:24:33.265 5 W - Select * From tg_user_login_log Order By id Desc
17:25:09.542 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:25:09.610 5 W - Select * From tgm_platform Where id=1
17:25:09.673 5 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
17:25:09.735 5 W - Select Count(*) From tgm_record_pay Where createtime>=635568516440000000 and createtime<=635568525440000000 and sid in (1,7) and pay_state=1
17:25:09.794 5 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where createtime>=635568516440000000 and createtime<=635568525440000000 and sid in (1,7) and pay_state=1) XCode_T1 Where rowNumber Between 1 And 10
17:25:09.862 5 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:25:09.926 5 W - Select * From tg_user_login_log Order By id Desc
17:25:09.987 5 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:25:10.053 5 W - Select * From tg_user_login_log Order By id Desc
17:25:46.000 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:25:47.890 7 W - Select * From tgm_platform Where id=1
17:26:06.046 7 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
17:26:18.167 7 W - Select Count(*) From tgm_record_pay Where createtime>=635568516440000000 and createtime<=635568525440000000 and sid in (1,7) and pay_state=1
17:26:18.238 7 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where createtime>=635568516440000000 and createtime<=635568525440000000 and sid in (1,7) and pay_state=1) XCode_T1 Where rowNumber Between 1 And 10
17:26:57.079 7 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:26:57.150 7 W - Select * From tg_user_login_log Order By id Desc
17:26:57.214 7 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:26:57.279 7 W - Select * From tg_user_login_log Order By id Desc
17:27:20.495 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:27:20.575 5 W - Select * From tgm_platform Where id=1
17:27:20.639 5 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
17:27:20.704 5 W - Select Count(*) From tgm_record_pay Where sid in (1,7) and pay_state=1
17:27:20.764 5 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where sid in (1,7) and pay_state=1) XCode_T1 Where rowNumber Between 1 And 10
17:27:20.825 5 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:27:20.891 5 W - Select * From tg_user_login_log Order By id Desc
17:27:20.967 5 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:27:21.033 5 W - Select * From tg_user_login_log Order By id Desc
17:27:45.803 13 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
17:27:45.870 13 W - Select * From tgm_platform Where id=1
17:27:45.953 13 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
17:27:46.051 13 W - Select Count(*) From tgm_record_pay Where createtime>=635568516440000000 and createtime<=635568528440000000 and sid in (1,7) and pay_state=1
17:27:46.113 13 W - Select * From (Select *, row_number() over(Order By  createtime desc) as rowNumber From tgm_record_pay Where createtime>=635568516440000000 and createtime<=635568528440000000 and sid in (1,7) and pay_state=1) XCode_T1 Where rowNumber Between 1 And 10
17:27:46.181 13 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:27:46.249 13 W - Select * From tg_user_login_log Order By id Desc
17:27:46.322 13 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
17:27:46.394 13 W - Select * From tg_user_login_log Order By id Desc

#Software: iisexpress
#ProcessID: 7888
#AppDomain: /LM/W3SVC/2/ROOT-1-130662217045566509
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
18:01:50.863 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
18:01:50.871 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
18:01:50.872 1 N - 使用数据库方式：独占，加大缓存权重
18:01:50.872 1 N - 一级缓存：关闭缓存
18:01:50.901 1 N - [DB]GetSchema("MetaDataCollections")
18:01:50.946 1 N - [DB]GetSchema("ReservedWords")
18:01:50.960 1 N - [DB]GetSchema("Databases", "tgm")
18:01:51.042 1 N - [DB]GetSchema("Tables")
18:01:51.166 1 N - [DB]GetSchema("Columns")
18:01:51.211 1 N - [DB]GetSchema("Indexes")
18:01:51.247 1 N - [DB]GetSchema("IndexColumns")
18:01:51.292 1 N - [DB]GetSchema("DataTypes")
18:01:51.408 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:01:51.445 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
18:01:51.523 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
18:01:51.523 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
18:01:51.523 1 N - DB待检查表架构的实体个数：8
18:01:51.662 1 N - 检查连接[DB/SqlServer]的数据库架构耗时217ms
18:01:51.662 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
18:01:51.689 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
18:01:51.713 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

18:01:51.734 1 N - 初始化数据库及脚本
18:01:51.741 1 N - [tgm]GetSchema("MetaDataCollections")
18:01:51.745 1 N - [tgm]GetSchema("ReservedWords")
18:01:51.750 1 N - [tgm]GetSchema("Databases", "tgm")
18:01:51.817 1 N - [tgm]GetSchema("Tables")
18:01:51.958 1 N - [tgm]GetSchema("Columns")
18:01:52.010 1 N - [tgm]GetSchema("Indexes")
18:01:52.046 1 N - [tgm]GetSchema("IndexColumns")
18:01:52.084 1 N - [tgm]GetSchema("DataTypes")
18:01:52.178 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
18:01:52.235 1 N - [tgm]的所有实体类（0个）：
18:01:52.235 1 N - [tgm]需要检查架构的实体类（0个）：
18:01:52.235 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时57ms
18:01:52.235 1 N - Select * From tgm_server Order By id Desc
18:01:52.272 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
18:01:52.275 1 N - [7_1_DY-04]GetSchema("ReservedWords")
18:01:52.281 1 N - [7_1_DY-04]GetSchema("Databases", "tgg")
18:01:52.352 1 N - [7_1_DY-04]GetSchema("Tables")
18:01:52.563 1 N - [7_1_DY-04]GetSchema("Columns")
18:01:52.683 1 N - [7_1_DY-04]GetSchema("Indexes")
18:01:52.729 1 N - [7_1_DY-04]GetSchema("IndexColumns")
18:01:52.772 1 N - [7_1_DY-04]GetSchema("DataTypes")
18:01:52.869 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
18:01:52.916 1 N - [7_1_DY-04]的所有实体类（0个）：
18:01:52.916 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
18:01:52.916 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时47ms
18:01:52.916 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:01:52.941 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
18:01:53.127 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573737129751812);Select SCOPE_IDENTITY()
18:01:53.169 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
18:01:53.173 1 N - [6_4_DY-03]GetSchema("ReservedWords")
18:01:53.178 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
18:01:53.246 1 N - [6_4_DY-03]GetSchema("Tables")
18:01:53.528 1 N - [6_4_DY-03]GetSchema("Columns")
18:01:53.667 1 N - [6_4_DY-03]GetSchema("Indexes")
18:01:53.724 1 N - [6_4_DY-03]GetSchema("IndexColumns")
18:01:53.773 1 N - [6_4_DY-03]GetSchema("DataTypes")
18:01:53.864 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
18:01:53.911 1 N - [6_4_DY-03]的所有实体类（0个）：
18:01:53.911 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
18:01:53.911 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时47ms
18:01:53.911 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:01:53.938 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
18:01:53.960 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573737139591603);Select SCOPE_IDENTITY()
18:01:53.988 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
18:01:53.991 1 N - [1_1_DY-02]GetSchema("ReservedWords")
18:01:53.997 1 N - [1_1_DY-02]GetSchema("Databases", "tgg")
18:01:54.067 1 N - [1_1_DY-02]GetSchema("Tables")
18:01:54.301 1 N - [1_1_DY-02]GetSchema("Columns")
18:01:54.420 1 N - [1_1_DY-02]GetSchema("Indexes")
18:01:54.464 1 N - [1_1_DY-02]GetSchema("IndexColumns")
18:01:54.505 1 N - [1_1_DY-02]GetSchema("DataTypes")
18:01:54.596 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
18:01:54.642 1 N - [1_1_DY-02]的所有实体类（0个）：
18:01:54.642 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
18:01:54.642 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时46ms
18:01:54.642 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:01:54.669 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
18:01:54.691 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573737146909317);Select SCOPE_IDENTITY()
18:02:24.718 7 W - [tgm]GetSchema("Tables")
18:02:25.006 7 W - [tgm]GetSchema("Columns")
18:02:25.091 7 W - [tgm]GetSchema("Indexes")
18:02:25.167 7 W - [tgm]GetSchema("IndexColumns")
18:02:25.249 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:02:25.322 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
18:02:25.393 7 W - Select * From tgm_platform Where id=1
18:02:26.784 9 W - [tgm]GetSchema("Tables")
18:02:27.065 9 W - [tgm]GetSchema("Columns")
18:02:27.148 9 W - [tgm]GetSchema("Indexes")
18:02:27.225 9 W - [tgm]GetSchema("IndexColumns")
18:02:27.307 9 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:02:27.377 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:02:27.442 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
18:02:27.504 9 W - Select * From tgm_platform Where id=1
18:02:27.579 9 W - Select * From tgm_platform Where id=1
18:02:51.751 7 Y - Select * From tgm_server Order By id Desc
18:02:51.791 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:02:51.815 7 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:02:51.833 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573737718326061);Select SCOPE_IDENTITY()
18:02:51.852 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:02:51.873 7 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:02:51.891 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573737718906442);Select SCOPE_IDENTITY()
18:02:51.912 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:02:51.937 7 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:02:51.955 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573737719546855);Select SCOPE_IDENTITY()
18:03:02.789 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:03:02.855 8 W - Select * From tgm_platform Order By  createtime desc
18:03:06.469 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:03:06.535 10 W - Select * From tgm_server Order By id Desc
18:03:06.672 10 W - [tgm]GetSchema("Tables")
18:03:06.961 10 W - [tgm]GetSchema("Columns")
18:03:07.039 10 W - [tgm]GetSchema("Indexes")
18:03:07.111 10 W - [tgm]GetSchema("IndexColumns")
18:03:07.185 10 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:03:07.248 10 W - Select Count(*) From tgm_record_pay
18:03:07.308 10 W - Select Top 10 * From tgm_record_pay Order By id Desc
18:03:07.374 10 W - Select * From tgm_platform Order By id Desc
18:03:08.689 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:03:08.754 10 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
18:03:08.817 10 W - Select * From tgm_platform Where id=1
18:03:08.887 10 W - Select * From tgm_platform Where id=1
18:03:51.747 8 Y - Select * From tgm_server Order By id Desc
18:03:51.792 8 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:03:51.824 8 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:03:51.845 8 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573738318445756);Select SCOPE_IDENTITY()
18:03:51.865 8 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:03:51.886 8 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:03:51.903 8 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573738319026143);Select SCOPE_IDENTITY()
18:03:51.928 8 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:03:51.949 8 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:03:51.967 8 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573738319656550);Select SCOPE_IDENTITY()
18:04:46.676 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:04:46.754 9 W - Select * From tgm_platform Order By  createtime desc
18:04:49.570 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:04:49.632 9 W - Select * From tgm_server Order By id Desc
18:04:49.710 9 W - Select Count(*) From tgm_record_pay
18:04:49.773 9 W - Select Top 10 * From tgm_record_pay Order By id Desc
18:04:49.835 9 W - Select * From tgm_platform Order By id Desc
18:04:49.898 9 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
18:04:50.054 9 W - [7_1_DY-04]GetSchema("Tables")
18:04:50.382 9 W - [7_1_DY-04]GetSchema("Columns")
18:04:50.554 9 W - [7_1_DY-04]GetSchema("Indexes")
18:04:50.632 9 W - [7_1_DY-04]GetSchema("IndexColumns")
18:04:50.726 9 W - Select * From tg_user_login_log Order By id Desc
18:04:50.789 9 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
18:04:50.929 9 W - [tgm]GetSchema("Tables")
18:04:51.179 9 W - [tgm]GetSchema("Columns")
18:04:51.273 9 W - [tgm]GetSchema("Indexes")
18:04:51.351 9 W - [tgm]GetSchema("IndexColumns")
18:04:51.445 9 W - Select * From tg_user_login_log Order By id Desc
18:04:51.507 9 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
18:04:51.648 9 W - [1_1_DY-02]GetSchema("Tables")
18:04:51.789 10 Y - Select * From tgm_server Order By id Desc
18:04:51.820 10 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:04:51.835 10 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:04:51.867 10 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573738918516169);Select SCOPE_IDENTITY()
18:04:51.882 10 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:04:51.914 10 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:04:51.945 10 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573738919453713);Select SCOPE_IDENTITY()
18:04:52.039 9 W - [1_1_DY-02]GetSchema("Columns")
18:04:52.117 10 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:04:52.132 10 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:04:52.148 10 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573738921485069);Select SCOPE_IDENTITY()
18:04:52.195 9 W - [1_1_DY-02]GetSchema("Indexes")
18:04:52.273 9 W - [1_1_DY-02]GetSchema("IndexColumns")
18:04:52.367 9 W - Select * From tg_user_login_log Order By id Desc
18:04:58.119 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:04:58.338 11 W - Select * From tgm_role Where id=1
18:04:58.494 11 W - [tgm]GetSchema("Tables")
18:04:58.744 11 W - [tgm]GetSchema("Columns")
18:04:58.838 11 W - [tgm]GetSchema("Indexes")
18:04:58.910 11 W - [tgm]GetSchema("IndexColumns")
18:04:58.988 11 W - Select * From tgm_resource Order By id Desc
18:05:00.410 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:05:00.489 10 W - Select * From tgm_platform Order By  createtime desc
18:05:16.569 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:05:16.647 10 W - Select * From tgm_server Where [pid] =4  Order By  createtime desc
18:05:16.710 10 W - Select * From tgm_platform Where id=4
18:05:20.396 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:05:20.459 9 W - Select * From tgm_role Where id=1
18:05:20.537 9 W - Select * From tgm_platform Where id=4
18:05:20.600 9 W - Select * From tgm_server Where id=6
18:05:20.662 9 W - Select * From tgm_resource Where pid=4 and sid=6 and state=1 Order By id Desc
18:05:22.037 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:05:22.115 10 W - Select * From tgm_platform Order By  createtime desc
18:05:26.473 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:05:26.535 11 W - Select * From tgm_server Where [pid] =4  Order By  createtime desc
18:05:26.598 11 W - Select * From tgm_platform Where id=4
18:05:30.618 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:05:30.680 11 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
18:05:30.743 11 W - Select * From tgm_platform Where id=1
18:05:30.821 11 W - Select * From tgm_platform Where id=1
18:05:35.092 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:05:35.171 9 W - Select * From tgm_role Where id=1
18:05:35.233 9 W - Select * From tgm_platform Where id=1
18:05:35.296 9 W - Select * From tgm_server Where id=7
18:05:35.358 9 W - Select * From tgm_resource Where pid=1 and sid=7 and state=1 Order By id Desc
18:05:36.514 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:05:36.593 11 W - Select * From tgm_platform Order By  createtime desc
18:05:51.801 11 Y - Select * From tgm_server Order By id Desc
18:05:51.832 11 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:05:51.848 11 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:05:51.879 11 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573739518797677);Select SCOPE_IDENTITY()
18:05:51.895 11 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:05:51.911 11 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:05:51.942 11 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573739519266431);Select SCOPE_IDENTITY()
18:05:51.957 11 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:05:51.973 11 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:05:51.989 11 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573739519891469);Select SCOPE_IDENTITY()
18:06:51.804 11 Y - Select * From tgm_server Order By id Desc
18:06:51.835 11 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:06:51.882 11 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:06:51.913 11 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573740119138603);Select SCOPE_IDENTITY()
18:06:51.960 11 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:06:51.991 11 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:06:52.007 11 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573740120076144);Select SCOPE_IDENTITY()
18:06:52.038 11 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:06:52.054 11 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:06:52.070 11 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573740120701172);Select SCOPE_IDENTITY()
18:07:35.490 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:07:35.552 12 W - Select * From tgm_platform Order By  createtime desc
18:07:37.037 13 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:07:37.115 13 W - Select * From tgm_server Order By id Desc
18:07:37.193 13 W - Select Count(*) From tgm_record_pay
18:07:37.255 13 W - Select Top 10 * From tgm_record_pay Order By id Desc
18:07:37.333 13 W - Select * From tgm_platform Order By id Desc
18:07:37.396 13 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
18:07:37.458 13 W - Select * From tg_user_login_log Order By id Desc
18:07:37.521 13 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
18:07:37.599 13 W - Select * From tg_user_login_log Order By id Desc
18:07:37.662 13 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
18:07:37.724 13 W - Select * From tg_user_login_log Order By id Desc
18:07:40.565 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:07:40.643 12 W - Select * From tgm_platform Order By  createtime desc
18:07:42.049 13 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:07:42.127 13 W - Select * From tgm_server Order By id Desc
18:07:42.190 13 W - Select Count(*) From tgm_record_pay
18:07:42.252 13 W - Select Top 10 * From tgm_record_pay Order By id Desc
18:07:42.315 13 W - Select * From tgm_platform Order By id Desc
18:07:51.861 9 Y - Select * From tgm_server Order By id Desc
18:07:51.935 9 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:07:52.009 9 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:07:52.081 9 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573740720790382);Select SCOPE_IDENTITY()
18:07:52.162 9 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:07:52.250 9 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:07:52.339 9 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573740722701662);Select SCOPE_IDENTITY()
18:07:52.421 9 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:07:52.444 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:07:52.517 12 W - Select * From tgm_role Where id=1
18:07:52.583 12 W - Select * From tgm_resource Order By id Desc
18:07:52.584 9 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:07:52.728 9 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573740727264746);Select SCOPE_IDENTITY()
18:07:53.733 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:07:53.797 9 W - Select * From tgm_platform Order By  createtime desc
18:08:51.872 12 Y - Select * From tgm_server Order By id Desc
18:08:51.916 12 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:08:51.959 12 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:08:51.980 12 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573741319793510);Select SCOPE_IDENTITY()
18:08:52.005 12 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:08:52.030 12 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:08:52.052 12 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573741320523980);Select SCOPE_IDENTITY()
18:08:52.077 12 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:08:52.102 12 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:08:52.124 12 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573741321244473);Select SCOPE_IDENTITY()
18:09:51.875 12 Y - Select * From tgm_server Order By id Desc
18:09:51.921 12 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:09:51.937 12 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:09:51.953 12 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573741919531553);Select SCOPE_IDENTITY()
18:09:51.984 12 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:09:52.000 12 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:09:52.015 12 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573741920156585);Select SCOPE_IDENTITY()
18:09:52.046 12 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:09:52.062 12 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:09:52.078 12 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573741920781671);Select SCOPE_IDENTITY()
18:10:51.888 12 Y - Select * From tgm_server Order By id Desc
18:10:51.935 12 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:10:51.966 12 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:10:51.982 12 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573742519824774);Select SCOPE_IDENTITY()
18:10:51.998 12 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:10:52.029 12 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:10:52.044 12 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573742520449806);Select SCOPE_IDENTITY()
18:10:52.060 12 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:10:52.091 12 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:10:52.107 12 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573742521074838);Select SCOPE_IDENTITY()
18:11:51.901 18 Y - Select * From tgm_server Order By id Desc
18:11:51.917 18 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:11:51.948 18 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:11:51.964 18 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573743119642486);Select SCOPE_IDENTITY()
18:11:51.995 18 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:11:52.026 18 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:11:52.042 18 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573743120423753);Select SCOPE_IDENTITY()
18:11:52.058 18 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:11:52.089 18 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:11:52.104 18 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573743121048804);Select SCOPE_IDENTITY()
18:12:51.909 16 Y - Select * From tgm_server Order By id Desc
18:12:51.925 16 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:12:51.940 16 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:12:51.971 16 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573743719719967);Select SCOPE_IDENTITY()
18:12:51.987 16 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:12:52.003 16 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:12:52.034 16 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573743720345002);Select SCOPE_IDENTITY()
18:12:52.050 16 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:12:52.065 16 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:12:52.097 16 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573743720813773);Select SCOPE_IDENTITY()
18:13:02.246 12 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:13:02.325 12 W - Select * From tgm_platform Order By  createtime desc
18:13:03.793 21 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:13:03.872 21 W - Select * From tgm_server Order By id Desc
18:13:03.934 21 W - Select Count(*) From tgm_record_pay
18:13:03.997 21 W - Select Top 10 * From tgm_record_pay Order By id Desc
18:13:04.075 21 W - Select * From tgm_platform Order By id Desc

#Software: iisexpress
#ProcessID: 3740
#AppDomain: /LM/W3SVC/2/ROOT-1-130662229043689512
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
18:21:50.898 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
18:21:50.907 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
18:21:50.907 1 N - 使用数据库方式：独占，加大缓存权重
18:21:50.907 1 N - 一级缓存：关闭缓存
18:21:50.934 1 N - [DB]GetSchema("MetaDataCollections")
18:21:50.960 1 N - [DB]GetSchema("ReservedWords")
18:21:50.975 1 N - [DB]GetSchema("Databases", "tgm")
18:21:51.062 1 N - [DB]GetSchema("Tables")
18:21:51.227 1 N - [DB]GetSchema("Columns")
18:21:51.272 1 N - [DB]GetSchema("Indexes")
18:21:51.304 1 N - [DB]GetSchema("IndexColumns")
18:21:51.356 1 N - [DB]GetSchema("DataTypes")
18:21:51.476 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:21:51.517 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
18:21:51.598 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
18:21:51.598 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
18:21:51.599 1 N - DB待检查表架构的实体个数：8
18:21:51.719 1 N - 检查连接[DB/SqlServer]的数据库架构耗时202ms
18:21:51.719 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
18:21:51.753 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
18:21:51.779 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

18:21:51.801 1 N - 初始化数据库及脚本
18:21:51.809 1 N - [tgm]GetSchema("MetaDataCollections")
18:21:51.812 1 N - [tgm]GetSchema("ReservedWords")
18:21:51.819 1 N - [tgm]GetSchema("Databases", "tgm")
18:21:51.912 1 N - [tgm]GetSchema("Tables")
18:21:52.065 1 N - [tgm]GetSchema("Columns")
18:21:52.108 1 N - [tgm]GetSchema("Indexes")
18:21:52.143 1 N - [tgm]GetSchema("IndexColumns")
18:21:52.181 1 N - [tgm]GetSchema("DataTypes")
18:21:52.277 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
18:21:52.334 1 N - [tgm]的所有实体类（0个）：
18:21:52.335 1 N - [tgm]需要检查架构的实体类（0个）：
18:21:52.335 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时58ms
18:21:52.335 1 N - Select * From tgm_server Order By id Desc
18:21:52.377 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
18:21:52.380 1 N - [7_1_DY-04]GetSchema("ReservedWords")
18:21:52.386 1 N - [7_1_DY-04]GetSchema("Databases", "tgg")
18:21:52.458 1 N - [7_1_DY-04]GetSchema("Tables")
18:21:52.721 1 N - [7_1_DY-04]GetSchema("Columns")
18:21:52.842 1 N - [7_1_DY-04]GetSchema("Indexes")
18:21:52.886 1 N - [7_1_DY-04]GetSchema("IndexColumns")
18:21:52.934 1 N - [7_1_DY-04]GetSchema("DataTypes")
18:21:53.037 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
18:21:53.084 1 N - [7_1_DY-04]的所有实体类（0个）：
18:21:53.084 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
18:21:53.084 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时47ms
18:21:53.084 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:21:53.110 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
18:21:53.342 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573749131398457);Select SCOPE_IDENTITY()
18:21:53.387 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
18:21:53.390 1 N - [6_4_DY-03]GetSchema("ReservedWords")
18:21:53.395 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
18:21:53.461 1 N - [6_4_DY-03]GetSchema("Tables")
18:21:53.728 1 N - [6_4_DY-03]GetSchema("Columns")
18:21:53.855 1 N - [6_4_DY-03]GetSchema("Indexes")
18:21:53.903 1 N - [6_4_DY-03]GetSchema("IndexColumns")
18:21:53.953 1 N - [6_4_DY-03]GetSchema("DataTypes")
18:21:54.048 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
18:21:54.096 1 N - [6_4_DY-03]的所有实体类（0个）：
18:21:54.096 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
18:21:54.096 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时47ms
18:21:54.096 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:21:54.123 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
18:21:54.145 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573749141445697);Select SCOPE_IDENTITY()
18:21:54.174 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
18:21:54.177 1 N - [1_1_DY-02]GetSchema("ReservedWords")
18:21:54.182 1 N - [1_1_DY-02]GetSchema("Databases", "tgg")
18:21:54.255 1 N - [1_1_DY-02]GetSchema("Tables")
18:21:54.422 1 N - [1_1_DY-02]GetSchema("Columns")
18:21:54.552 1 N - [1_1_DY-02]GetSchema("Indexes")
18:21:54.588 1 N - [1_1_DY-02]GetSchema("IndexColumns")
18:21:54.630 1 N - [1_1_DY-02]GetSchema("DataTypes")
18:21:54.721 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
18:21:54.769 1 N - [1_1_DY-02]的所有实体类（0个）：
18:21:54.769 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
18:21:54.769 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时47ms
18:21:54.769 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:21:54.793 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
18:21:54.813 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573749148112644);Select SCOPE_IDENTITY()
18:22:01.116 7 W - [tgm]GetSchema("Tables")
18:22:01.393 7 W - [tgm]GetSchema("Columns")
18:22:01.476 7 W - [tgm]GetSchema("Indexes")
18:22:01.557 7 W - [tgm]GetSchema("IndexColumns")
18:22:01.633 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:22:01.704 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
18:22:01.780 7 W - Select * From tgm_platform Where id=1
18:22:03.186 9 W - [tgm]GetSchema("Tables")
18:22:03.475 9 W - [tgm]GetSchema("Columns")
18:22:03.562 9 W - [tgm]GetSchema("Indexes")
18:22:03.646 9 W - [tgm]GetSchema("IndexColumns")
18:22:03.725 9 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:22:03.796 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:22:03.870 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
18:22:03.941 9 W - Select * From tgm_platform Where id=1
18:22:04.017 9 W - Select * From tgm_platform Where id=1
18:22:10.807 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:22:10.875 8 W - Select * From tgm_platform Order By  createtime desc
18:22:51.808 7 Y - Select * From tgm_server Order By id Desc
18:22:51.848 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:22:51.871 7 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:22:51.890 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 2050, 2050, 635573749718887413);Select SCOPE_IDENTITY()
18:22:51.911 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:22:51.932 7 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:22:51.951 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 1002000, 1002000, 635573749719507813);Select SCOPE_IDENTITY()
18:22:51.971 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:22:51.992 7 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:22:52.010 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 4, 6, 8, 5, 5, 7, 0, 0, 0, 23020, 23020, 635573749720098203);Select SCOPE_IDENTITY()

#Software: iisexpress
#ProcessID: 9616
#AppDomain: /LM/W3SVC/2/ROOT-1-130662232812771189
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
18:28:03.796 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
18:28:03.805 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
18:28:03.805 1 N - 使用数据库方式：独占，加大缓存权重
18:28:03.805 1 N - 一级缓存：关闭缓存
18:28:03.871 1 N - [DB]GetSchema("MetaDataCollections")
18:28:03.918 1 N - [DB]GetSchema("ReservedWords")
18:28:03.931 1 N - [DB]GetSchema("Databases", "tgm")
18:28:04.034 1 N - [DB]GetSchema("Tables")
18:28:04.186 1 N - [DB]GetSchema("Columns")
18:28:04.233 1 N - [DB]GetSchema("Indexes")
18:28:04.278 1 N - [DB]GetSchema("IndexColumns")
18:28:04.320 1 N - [DB]GetSchema("DataTypes")
18:28:04.442 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:28:04.483 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
18:28:04.551 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
18:28:04.551 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
18:28:04.552 1 N - DB待检查表架构的实体个数：8
18:28:04.704 1 N - 检查连接[DB/SqlServer]的数据库架构耗时222ms
18:28:04.705 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
18:28:04.735 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
18:28:04.760 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

18:28:04.784 1 N - 初始化数据库及脚本
18:28:04.792 1 N - [tgm]GetSchema("MetaDataCollections")
18:28:04.795 1 N - [tgm]GetSchema("ReservedWords")
18:28:04.801 1 N - [tgm]GetSchema("Databases", "tgm")
18:28:04.881 1 N - [tgm]GetSchema("Tables")
18:28:05.039 1 N - [tgm]GetSchema("Columns")
18:28:05.082 1 N - [tgm]GetSchema("Indexes")
18:28:05.122 1 N - [tgm]GetSchema("IndexColumns")
18:28:05.160 1 N - [tgm]GetSchema("DataTypes")
18:28:05.252 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
18:28:05.287 1 N - [tgm]的所有实体类（0个）：
18:28:05.287 1 N - [tgm]需要检查架构的实体类（0个）：
18:28:05.287 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时35ms
18:28:05.287 1 N - Select * From tgm_server Order By id Desc
18:28:05.324 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
18:28:05.327 1 N - [7_1_DY-04]GetSchema("ReservedWords")
18:28:05.333 1 N - [7_1_DY-04]GetSchema("Databases", "tgg")
18:28:05.407 1 N - [7_1_DY-04]GetSchema("Tables")
18:28:05.651 1 N - [7_1_DY-04]GetSchema("Columns")
18:28:05.774 1 N - [7_1_DY-04]GetSchema("Indexes")
18:28:05.811 1 N - [7_1_DY-04]GetSchema("IndexColumns")
18:28:05.850 1 N - [7_1_DY-04]GetSchema("DataTypes")
18:28:05.940 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
18:28:05.975 1 N - [7_1_DY-04]的所有实体类（0个）：
18:28:05.975 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
18:28:05.975 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时35ms
18:28:05.975 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:28:06.016 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
18:28:06.175 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 2050, 2050, 635573752860454232);Select SCOPE_IDENTITY()
18:28:06.217 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
18:28:06.220 1 N - [6_4_DY-03]GetSchema("ReservedWords")
18:28:06.226 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
18:28:06.293 1 N - [6_4_DY-03]GetSchema("Tables")
18:28:06.547 1 N - [6_4_DY-03]GetSchema("Columns")
18:28:06.674 1 N - [6_4_DY-03]GetSchema("Indexes")
18:28:06.718 1 N - [6_4_DY-03]GetSchema("IndexColumns")
18:28:06.757 1 N - [6_4_DY-03]GetSchema("DataTypes")
18:28:06.845 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
18:28:06.881 1 N - [6_4_DY-03]的所有实体类（0个）：
18:28:06.881 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
18:28:06.881 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时35ms
18:28:06.881 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:28:06.906 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
18:28:06.926 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573752869250337);Select SCOPE_IDENTITY()
18:28:06.956 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
18:28:06.959 1 N - [1_1_DY-02]GetSchema("ReservedWords")
18:28:06.965 1 N - [1_1_DY-02]GetSchema("Databases", "tgg")
18:28:07.035 1 N - [1_1_DY-02]GetSchema("Tables")
18:28:07.229 1 N - [1_1_DY-02]GetSchema("Columns")
18:28:07.357 1 N - [1_1_DY-02]GetSchema("Indexes")
18:28:07.407 1 N - [1_1_DY-02]GetSchema("IndexColumns")
18:28:07.451 1 N - [1_1_DY-02]GetSchema("DataTypes")
18:28:07.540 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
18:28:07.574 1 N - [1_1_DY-02]的所有实体类（0个）：
18:28:07.574 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
18:28:07.575 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时35ms
18:28:07.575 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:28:07.600 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
18:28:07.621 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 23020, 23020, 635573752876209042);Select SCOPE_IDENTITY()
18:28:17.276 9 W - [tgm]GetSchema("Tables")
18:28:17.514 9 W - [tgm]GetSchema("Columns")
18:28:17.600 9 W - [tgm]GetSchema("Indexes")
18:28:17.673 9 W - [tgm]GetSchema("IndexColumns")
18:28:17.756 9 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:28:17.826 9 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
18:28:17.897 9 W - Select * From tgm_platform Where id=1
18:28:19.212 8 W - [tgm]GetSchema("Tables")
18:28:19.487 8 W - [tgm]GetSchema("Columns")
18:28:19.573 8 W - [tgm]GetSchema("Indexes")
18:28:19.649 8 W - [tgm]GetSchema("IndexColumns")
18:28:19.732 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:28:19.805 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:28:19.869 8 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
18:28:19.934 8 W - Select * From tgm_platform Where id=1
18:28:20.008 8 W - Select * From tgm_platform Where id=1
18:28:29.829 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:28:29.897 7 W - Select * From tgm_platform Order By  createtime desc

#Software: iisexpress
#ProcessID: 10716
#AppDomain: /LM/W3SVC/2/ROOT-1-130662233685202487
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
18:29:31.007 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
18:29:31.016 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
18:29:31.016 1 N - 使用数据库方式：独占，加大缓存权重
18:29:31.016 1 N - 一级缓存：关闭缓存
18:29:31.081 1 N - [DB]GetSchema("MetaDataCollections")
18:29:31.106 1 N - [DB]GetSchema("ReservedWords")
18:29:31.119 1 N - [DB]GetSchema("Databases", "tgm")
18:29:31.212 1 N - [DB]GetSchema("Tables")
18:29:31.407 1 N - [DB]GetSchema("Columns")
18:29:31.454 1 N - [DB]GetSchema("Indexes")
18:29:31.492 1 N - [DB]GetSchema("IndexColumns")
18:29:31.537 1 N - [DB]GetSchema("DataTypes")
18:29:31.657 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:29:31.694 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
18:29:31.756 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
18:29:31.756 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
18:29:31.757 1 N - DB待检查表架构的实体个数：8
18:29:31.879 1 N - 检查连接[DB/SqlServer]的数据库架构耗时184ms
18:29:31.879 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
18:29:31.908 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
18:29:31.937 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

18:29:31.962 1 N - 初始化数据库及脚本
18:29:31.969 1 N - [tgm]GetSchema("MetaDataCollections")
18:29:31.972 1 N - [tgm]GetSchema("ReservedWords")
18:29:31.978 1 N - [tgm]GetSchema("Databases", "tgm")
18:29:32.050 1 N - [tgm]GetSchema("Tables")
18:29:32.194 1 N - [tgm]GetSchema("Columns")
18:29:32.240 1 N - [tgm]GetSchema("Indexes")
18:29:32.279 1 N - [tgm]GetSchema("IndexColumns")
18:29:32.327 1 N - [tgm]GetSchema("DataTypes")
18:29:32.416 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
18:29:32.454 1 N - [tgm]的所有实体类（0个）：
18:29:32.454 1 N - [tgm]需要检查架构的实体类（0个）：
18:29:32.454 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时38ms
18:29:32.454 1 N - Select * From tgm_server Order By id Desc
18:29:32.494 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
18:29:32.497 1 N - [7_1_DY-04]GetSchema("ReservedWords")
18:29:32.502 1 N - [7_1_DY-04]GetSchema("Databases", "tgg")
18:29:32.571 1 N - [7_1_DY-04]GetSchema("Tables")
18:29:32.774 1 N - [7_1_DY-04]GetSchema("Columns")
18:29:32.895 1 N - [7_1_DY-04]GetSchema("Indexes")
18:29:32.930 1 N - [7_1_DY-04]GetSchema("IndexColumns")
18:29:32.970 1 N - [7_1_DY-04]GetSchema("DataTypes")
18:29:33.068 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
18:29:33.101 1 N - [7_1_DY-04]的所有实体类（0个）：
18:29:33.101 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
18:29:33.101 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时34ms
18:29:33.101 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:29:33.143 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
18:29:33.313 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 2050, 2050, 635573753731723904);Select SCOPE_IDENTITY()
18:29:33.358 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
18:29:33.362 1 N - [6_4_DY-03]GetSchema("ReservedWords")
18:29:33.367 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
18:29:33.436 1 N - [6_4_DY-03]GetSchema("Tables")
18:29:33.656 1 N - [6_4_DY-03]GetSchema("Columns")
18:29:33.791 1 N - [6_4_DY-03]GetSchema("Indexes")
18:29:33.837 1 N - [6_4_DY-03]GetSchema("IndexColumns")
18:29:33.878 1 N - [6_4_DY-03]GetSchema("DataTypes")
18:29:33.969 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
18:29:34.004 1 N - [6_4_DY-03]的所有实体类（0个）：
18:29:34.004 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
18:29:34.004 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时35ms
18:29:34.004 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:29:34.031 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
18:29:34.053 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573753740526742);Select SCOPE_IDENTITY()
18:29:34.081 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
18:29:34.084 1 N - [1_1_DY-02]GetSchema("ReservedWords")
18:29:34.091 1 N - [1_1_DY-02]GetSchema("Databases", "tgg")
18:29:34.164 1 N - [1_1_DY-02]GetSchema("Tables")
18:29:34.333 1 N - [1_1_DY-02]GetSchema("Columns")
18:29:34.456 1 N - [1_1_DY-02]GetSchema("Indexes")
18:29:34.511 1 N - [1_1_DY-02]GetSchema("IndexColumns")
18:29:34.564 1 N - [1_1_DY-02]GetSchema("DataTypes")
18:29:34.656 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
18:29:34.689 1 N - [1_1_DY-02]的所有实体类（0个）：
18:29:34.690 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
18:29:34.690 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时34ms
18:29:34.690 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:29:34.715 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
18:29:34.735 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 23020, 23020, 635573753747347567);Select SCOPE_IDENTITY()
18:29:40.922 8 W - [tgm]GetSchema("Tables")
18:29:41.163 8 W - [tgm]GetSchema("Columns")
18:29:41.246 8 W - [tgm]GetSchema("Indexes")
18:29:41.328 8 W - [tgm]GetSchema("IndexColumns")
18:29:41.403 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:29:41.472 8 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
18:29:41.542 8 W - Select * From tgm_platform Where id=1
18:29:42.716 9 W - [tgm]GetSchema("Tables")
18:29:42.986 9 W - [tgm]GetSchema("Columns")
18:29:43.071 9 W - [tgm]GetSchema("Indexes")
18:29:43.147 9 W - [tgm]GetSchema("IndexColumns")
18:29:43.225 9 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:29:43.301 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:29:43.368 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
18:29:43.433 9 W - Select * From tgm_platform Where id=1
18:29:43.502 9 W - Select * From tgm_platform Where id=1
18:29:48.183 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:29:48.248 7 W - Select * From tgm_platform Order By  createtime desc

#Software: iisexpress
#ProcessID: 9800
#AppDomain: /LM/W3SVC/2/ROOT-1-130662234290631748
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
18:30:31.566 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
18:30:31.575 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
18:30:31.576 1 N - 使用数据库方式：独占，加大缓存权重
18:30:31.576 1 N - 一级缓存：关闭缓存
18:30:31.640 1 N - [DB]GetSchema("MetaDataCollections")
18:30:31.664 1 N - [DB]GetSchema("ReservedWords")
18:30:31.680 1 N - [DB]GetSchema("Databases", "tgm")
18:30:31.790 1 N - [DB]GetSchema("Tables")
18:30:31.935 1 N - [DB]GetSchema("Columns")
18:30:31.978 1 N - [DB]GetSchema("Indexes")
18:30:32.013 1 N - [DB]GetSchema("IndexColumns")
18:30:32.067 1 N - [DB]GetSchema("DataTypes")
18:30:32.185 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:30:32.220 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
18:30:32.282 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
18:30:32.282 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
18:30:32.282 1 N - DB待检查表架构的实体个数：8
18:30:32.428 1 N - 检查连接[DB/SqlServer]的数据库架构耗时208ms
18:30:32.429 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
18:30:32.458 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
18:30:32.490 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

18:30:32.514 1 N - 初始化数据库及脚本
18:30:32.521 1 N - [tgm]GetSchema("MetaDataCollections")
18:30:32.524 1 N - [tgm]GetSchema("ReservedWords")
18:30:32.530 1 N - [tgm]GetSchema("Databases", "tgm")
18:30:32.600 1 N - [tgm]GetSchema("Tables")
18:30:32.756 1 N - [tgm]GetSchema("Columns")
18:30:32.802 1 N - [tgm]GetSchema("Indexes")
18:30:32.841 1 N - [tgm]GetSchema("IndexColumns")
18:30:32.889 1 N - [tgm]GetSchema("DataTypes")
18:30:32.977 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
18:30:33.013 1 N - [tgm]的所有实体类（0个）：
18:30:33.013 1 N - [tgm]需要检查架构的实体类（0个）：
18:30:33.013 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时37ms
18:30:33.013 1 N - Select * From tgm_server Order By id Desc
18:30:33.052 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
18:30:33.055 1 N - [7_1_DY-04]GetSchema("ReservedWords")
18:30:33.061 1 N - [7_1_DY-04]GetSchema("Databases", "tgg")
18:30:33.129 1 N - [7_1_DY-04]GetSchema("Tables")
18:30:33.327 1 N - [7_1_DY-04]GetSchema("Columns")
18:30:33.471 1 N - [7_1_DY-04]GetSchema("Indexes")
18:30:33.507 1 N - [7_1_DY-04]GetSchema("IndexColumns")
18:30:33.551 1 N - [7_1_DY-04]GetSchema("DataTypes")
18:30:33.637 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
18:30:33.671 1 N - [7_1_DY-04]的所有实体类（0个）：
18:30:33.671 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
18:30:33.671 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时34ms
18:30:33.671 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:30:33.713 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
18:30:33.882 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 2050, 2050, 635573754337404524);Select SCOPE_IDENTITY()
18:30:33.922 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
18:30:33.925 1 N - [6_4_DY-03]GetSchema("ReservedWords")
18:30:33.931 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
18:30:34.001 1 N - [6_4_DY-03]GetSchema("Tables")
18:30:34.189 1 N - [6_4_DY-03]GetSchema("Columns")
18:30:34.322 1 N - [6_4_DY-03]GetSchema("Indexes")
18:30:34.379 1 N - [6_4_DY-03]GetSchema("IndexColumns")
18:30:34.420 1 N - [6_4_DY-03]GetSchema("DataTypes")
18:30:34.514 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
18:30:34.555 1 N - [6_4_DY-03]的所有实体类（0个）：
18:30:34.555 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
18:30:34.555 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时41ms
18:30:34.555 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:30:34.580 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
18:30:34.600 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573754345998177);Select SCOPE_IDENTITY()
18:30:34.628 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
18:30:34.631 1 N - [1_1_DY-02]GetSchema("ReservedWords")
18:30:34.637 1 N - [1_1_DY-02]GetSchema("Databases", "tgg")
18:30:34.711 1 N - [1_1_DY-02]GetSchema("Tables")
18:30:34.923 1 N - [1_1_DY-02]GetSchema("Columns")
18:30:35.041 1 N - [1_1_DY-02]GetSchema("Indexes")
18:30:35.078 1 N - [1_1_DY-02]GetSchema("IndexColumns")
18:30:35.119 1 N - [1_1_DY-02]GetSchema("DataTypes")
18:30:35.209 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
18:30:35.243 1 N - [1_1_DY-02]的所有实体类（0个）：
18:30:35.244 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
18:30:35.244 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时34ms
18:30:35.244 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:30:35.268 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
18:30:35.290 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 23020, 23020, 635573754352897503);Select SCOPE_IDENTITY()
18:30:48.054 7 W - [tgm]GetSchema("Tables")
18:30:48.337 7 W - [tgm]GetSchema("Columns")
18:30:48.419 7 W - [tgm]GetSchema("Indexes")
18:30:48.491 7 W - [tgm]GetSchema("IndexColumns")
18:30:48.569 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:30:48.652 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
18:30:48.721 7 W - Select * From tgm_platform Where id=1
18:30:50.097 9 W - [tgm]GetSchema("Tables")
18:30:50.363 9 W - [tgm]GetSchema("Columns")
18:30:50.468 9 W - [tgm]GetSchema("Indexes")
18:30:50.548 9 W - [tgm]GetSchema("IndexColumns")
18:30:50.625 9 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
18:30:50.709 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:30:50.774 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
18:30:50.842 9 W - Select * From tgm_platform Where id=1
18:30:50.910 9 W - Select * From tgm_platform Where id=1
18:30:57.227 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:30:57.294 7 W - Select * From tgm_platform Order By  createtime desc
18:31:03.371 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:31:03.435 7 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
18:31:03.494 7 W - Select * From tgm_platform Where id=1
18:31:03.560 7 W - Select * From tgm_platform Where id=1
18:31:22.667 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:31:22.731 7 W - Select * From tgm_platform Order By  createtime desc
18:31:31.974 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:31:32.034 8 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
18:31:32.106 8 W - Select * From tgm_platform Where id=1
18:31:32.172 8 W - Select * From tgm_platform Where id=1
18:31:32.659 7 Y - Select * From tgm_server Order By id Desc
18:31:32.726 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:31:32.780 7 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
18:31:32.827 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 2050, 2050, 635573754928248420);Select SCOPE_IDENTITY()
18:31:32.870 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:31:32.920 7 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
18:31:32.972 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573754929719380);Select SCOPE_IDENTITY()
18:31:33.001 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
18:31:33.022 7 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
18:31:33.042 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 23020, 23020, 635573754930419856);Select SCOPE_IDENTITY()
18:31:54.657 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:31:54.721 7 W - Select * From tgm_platform Order By  createtime desc
18:31:56.883 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
18:31:56.946 9 W - Select * From tgm_role Where id=1
18:31:57.018 9 W - Select * From tgm_platform Where id=1
18:31:57.146 9 W - [tgm]GetSchema("Tables")
18:31:57.381 9 W - [tgm]GetSchema("Columns")
18:31:57.464 9 W - [tgm]GetSchema("Indexes")
18:31:57.535 9 W - [tgm]GetSchema("IndexColumns")
18:31:57.622 9 W - SET NOCOUNT ON;Insert Into tgm_resource(name, pid, sid, player_name, user_code, [time], type, [state], content, gold, coin, exp, honor, fame, spirit, army, devote, props) Values(N'房东', 1, 1, N'分测', N'', 635573755170791668, 2, 1, '份的萨芬', 123, 0, 0, 0, 0, 0, 0, 0, '');Select SCOPE_IDENTITY()

#Software: iisexpress
#ProcessID: 10756
#AppDomain: /LM/W3SVC/2/ROOT-1-130662252490247649
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
19:00:51.635 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
19:00:51.645 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
19:00:51.645 1 N - 使用数据库方式：独占，加大缓存权重
19:00:51.645 1 N - 一级缓存：关闭缓存
19:00:51.710 1 N - [DB]GetSchema("MetaDataCollections")
19:00:51.742 1 N - [DB]GetSchema("ReservedWords")
19:00:51.756 1 N - [DB]GetSchema("Databases", "tgm")
19:00:51.845 1 N - [DB]GetSchema("Tables")
19:00:51.970 1 N - [DB]GetSchema("Columns")
19:00:52.016 1 N - [DB]GetSchema("Indexes")
19:00:52.051 1 N - [DB]GetSchema("IndexColumns")
19:00:52.090 1 N - [DB]GetSchema("DataTypes")
19:00:52.206 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:00:52.245 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
19:00:52.322 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:00:52.322 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:00:52.322 1 N - DB待检查表架构的实体个数：8
19:00:52.439 1 N - 检查连接[DB/SqlServer]的数据库架构耗时193ms
19:00:52.439 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
19:00:52.466 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
19:00:52.490 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

19:00:52.539 1 N - 初始化数据库及脚本
19:00:52.546 1 N - [tgm]GetSchema("MetaDataCollections")
19:00:52.549 1 N - [tgm]GetSchema("ReservedWords")
19:00:52.555 1 N - [tgm]GetSchema("Databases", "tgm")
19:00:52.623 1 N - [tgm]GetSchema("Tables")
19:00:52.761 1 N - [tgm]GetSchema("Columns")
19:00:52.803 1 N - [tgm]GetSchema("Indexes")
19:00:52.841 1 N - [tgm]GetSchema("IndexColumns")
19:00:52.875 1 N - [tgm]GetSchema("DataTypes")
19:00:52.962 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
19:00:53.000 1 N - [tgm]的所有实体类（0个）：
19:00:53.000 1 N - [tgm]需要检查架构的实体类（0个）：
19:00:53.001 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时38ms
19:00:53.001 1 N - Select * From tgm_server Order By id Desc
19:00:53.035 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
19:00:53.038 1 N - [7_1_DY-04]GetSchema("ReservedWords")
19:00:53.043 1 N - [7_1_DY-04]GetSchema("Databases", "tgg")
19:00:53.114 1 N - [7_1_DY-04]GetSchema("Tables")
19:00:53.321 1 N - [7_1_DY-04]GetSchema("Columns")
19:00:53.447 1 N - [7_1_DY-04]GetSchema("Indexes")
19:00:53.485 1 N - [7_1_DY-04]GetSchema("IndexColumns")
19:00:53.527 1 N - [7_1_DY-04]GetSchema("DataTypes")
19:00:53.628 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
19:00:53.663 1 N - [7_1_DY-04]的所有实体类（0个）：
19:00:53.663 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
19:00:53.663 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时35ms
19:00:53.663 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:00:53.705 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
19:00:53.887 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 2050, 2050, 635573772537399050);Select SCOPE_IDENTITY()
19:00:53.945 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
19:00:53.948 1 N - [6_4_DY-03]GetSchema("ReservedWords")
19:00:53.954 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
19:00:54.041 1 N - [6_4_DY-03]GetSchema("Tables")
19:00:54.248 1 N - [6_4_DY-03]GetSchema("Columns")
19:00:54.372 1 N - [6_4_DY-03]GetSchema("Indexes")
19:00:54.409 1 N - [6_4_DY-03]GetSchema("IndexColumns")
19:00:54.450 1 N - [6_4_DY-03]GetSchema("DataTypes")
19:00:54.539 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
19:00:54.573 1 N - [6_4_DY-03]的所有实体类（0个）：
19:00:54.573 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
19:00:54.573 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时34ms
19:00:54.573 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:00:54.597 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
19:00:54.618 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573772546174898);Select SCOPE_IDENTITY()
19:00:54.659 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
19:00:54.663 1 N - [1_1_DY-02]GetSchema("ReservedWords")
19:00:54.668 1 N - [1_1_DY-02]GetSchema("Databases", "tgg")
19:00:54.760 1 N - [1_1_DY-02]GetSchema("Tables")
19:00:54.918 1 N - [1_1_DY-02]GetSchema("Columns")
19:00:55.035 1 N - [1_1_DY-02]GetSchema("Indexes")
19:00:55.086 1 N - [1_1_DY-02]GetSchema("IndexColumns")
19:00:55.130 1 N - [1_1_DY-02]GetSchema("DataTypes")
19:00:55.229 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
19:00:55.265 1 N - [1_1_DY-02]的所有实体类（0个）：
19:00:55.265 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
19:00:55.265 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时36ms
19:00:55.265 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:00:55.292 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
19:00:55.316 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 23020, 23020, 635573772553159556);Select SCOPE_IDENTITY()
19:01:08.659 7 W - [tgm]GetSchema("Tables")
19:01:08.905 7 W - [tgm]GetSchema("Columns")
19:01:08.990 7 W - [tgm]GetSchema("Indexes")
19:01:09.073 7 W - [tgm]GetSchema("IndexColumns")
19:01:09.153 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:01:09.228 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
19:01:09.299 7 W - Select * From tgm_platform Where id=1
19:01:10.634 9 W - [tgm]GetSchema("Tables")
19:01:10.876 9 W - [tgm]GetSchema("Columns")
19:01:10.962 9 W - [tgm]GetSchema("Indexes")
19:01:11.048 9 W - [tgm]GetSchema("IndexColumns")
19:01:11.125 9 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:01:11.201 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:01:11.268 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:01:11.337 9 W - Select * From tgm_platform Where id=1
19:01:11.406 9 W - Select * From tgm_platform Where id=1
19:01:17.547 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:01:17.613 8 W - Select * From tgm_platform Order By  createtime desc
19:01:48.858 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:01:48.924 9 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
19:01:48.988 9 W - Select * From tgm_platform Where id=1
19:01:49.058 9 W - Select * From tgm_platform Where id=1
19:01:52.545 7 Y - Select * From tgm_server Order By id Desc
19:01:52.584 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:01:52.608 7 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:01:52.629 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 2050, 2050, 635573773126282736);Select SCOPE_IDENTITY()
19:01:52.649 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:01:52.670 7 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:01:52.688 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573773126873119);Select SCOPE_IDENTITY()
19:01:52.709 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:01:52.729 7 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:01:52.750 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 23020, 23020, 635573773127493536);Select SCOPE_IDENTITY()
19:02:08.839 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:02:08.907 7 W - Select * From tgm_platform Order By  createtime desc
19:02:11.083 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:02:11.148 7 W - Select * From tgm_role Where id=1
19:02:11.216 7 W - Select * From tgm_platform Where id=1
19:02:11.345 7 W - [tgm]GetSchema("Tables")
19:02:11.582 7 W - [tgm]GetSchema("Columns")
19:02:11.662 7 W - [tgm]GetSchema("Indexes")
19:02:11.734 7 W - [tgm]GetSchema("IndexColumns")
19:02:11.816 7 W - SET NOCOUNT ON;Insert Into tgm_resource(name, pid, sid, player_name, user_code, [time], type, [state], content, gold, coin, exp, honor, fame, spirit, army, devote, props) Values('', 1, 1, N'华国锋', N'', 635573773312786400, 2, 1, '发士大夫', 122, 0, 0, 0, 0, 0, 0, 0, '');Select SCOPE_IDENTITY()

#Software: iisexpress
#ProcessID: 6960
#AppDomain: /LM/W3SVC/2/ROOT-1-130662254623866238
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
19:04:28.864 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
19:04:28.873 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
19:04:28.874 1 N - 使用数据库方式：独占，加大缓存权重
19:04:28.874 1 N - 一级缓存：关闭缓存
19:04:28.922 1 N - [DB]GetSchema("MetaDataCollections")
19:04:29.053 1 N - [DB]GetSchema("ReservedWords")
19:04:29.072 1 N - [DB]GetSchema("Databases", "tgm")
19:04:29.177 1 N - [DB]GetSchema("Tables")
19:04:29.311 1 N - [DB]GetSchema("Columns")
19:04:29.367 1 N - [DB]GetSchema("Indexes")
19:04:29.410 1 N - [DB]GetSchema("IndexColumns")
19:04:29.453 1 N - [DB]GetSchema("DataTypes")
19:04:29.574 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:04:29.610 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
19:04:29.697 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:04:29.697 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:04:29.698 1 N - DB待检查表架构的实体个数：8
19:04:29.861 1 N - 检查连接[DB/SqlServer]的数据库架构耗时251ms
19:04:29.861 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
19:04:29.890 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
19:04:29.914 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

19:04:29.938 1 N - 初始化数据库及脚本
19:04:29.945 1 N - [tgm]GetSchema("MetaDataCollections")
19:04:29.949 1 N - [tgm]GetSchema("ReservedWords")
19:04:29.955 1 N - [tgm]GetSchema("Databases", "tgm")
19:04:30.049 1 N - [tgm]GetSchema("Tables")
19:04:30.203 1 N - [tgm]GetSchema("Columns")
19:04:30.250 1 N - [tgm]GetSchema("Indexes")
19:04:30.287 1 N - [tgm]GetSchema("IndexColumns")
19:04:30.330 1 N - [tgm]GetSchema("DataTypes")
19:04:30.422 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
19:04:30.471 1 N - [tgm]的所有实体类（0个）：
19:04:30.471 1 N - [tgm]需要检查架构的实体类（0个）：
19:04:30.471 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时48ms
19:04:30.472 1 N - Select * From tgm_server Order By id Desc
19:04:30.512 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
19:04:30.515 1 N - [7_1_DY-04]GetSchema("ReservedWords")
19:04:30.521 1 N - [7_1_DY-04]GetSchema("Databases", "tgg")
19:04:30.604 1 N - [7_1_DY-04]GetSchema("Tables")
19:04:30.790 1 N - [7_1_DY-04]GetSchema("Columns")
19:04:30.908 1 N - [7_1_DY-04]GetSchema("Indexes")
19:04:30.951 1 N - [7_1_DY-04]GetSchema("IndexColumns")
19:04:30.993 1 N - [7_1_DY-04]GetSchema("DataTypes")
19:04:31.087 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
19:04:31.137 1 N - [7_1_DY-04]的所有实体类（0个）：
19:04:31.138 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
19:04:31.138 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时51ms
19:04:31.138 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:04:31.167 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
19:04:31.330 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 2050, 2050, 635573774712044961);Select SCOPE_IDENTITY()
19:04:31.371 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
19:04:31.374 1 N - [6_4_DY-03]GetSchema("ReservedWords")
19:04:31.379 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
19:04:31.450 1 N - [6_4_DY-03]GetSchema("Tables")
19:04:31.609 1 N - [6_4_DY-03]GetSchema("Columns")
19:04:31.725 1 N - [6_4_DY-03]GetSchema("Indexes")
19:04:31.763 1 N - [6_4_DY-03]GetSchema("IndexColumns")
19:04:31.806 1 N - [6_4_DY-03]GetSchema("DataTypes")
19:04:31.912 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
19:04:31.962 1 N - [6_4_DY-03]的所有实体类（0个）：
19:04:31.962 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
19:04:31.962 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时48ms
19:04:31.962 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:04:31.986 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
19:04:32.006 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573774720050296);Select SCOPE_IDENTITY()
19:04:32.042 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
19:04:32.046 1 N - [1_1_DY-02]GetSchema("ReservedWords")
19:04:32.051 1 N - [1_1_DY-02]GetSchema("Databases", "tgg")
19:04:32.122 1 N - [1_1_DY-02]GetSchema("Tables")
19:04:32.283 1 N - [1_1_DY-02]GetSchema("Columns")
19:04:32.402 1 N - [1_1_DY-02]GetSchema("Indexes")
19:04:32.442 1 N - [1_1_DY-02]GetSchema("IndexColumns")
19:04:32.485 1 N - [1_1_DY-02]GetSchema("DataTypes")
19:04:32.589 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
19:04:32.637 1 N - [1_1_DY-02]的所有实体类（0个）：
19:04:32.637 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
19:04:32.637 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时47ms
19:04:32.637 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:04:32.660 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
19:04:32.681 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 23020, 23020, 635573774726804814);Select SCOPE_IDENTITY()
19:04:56.602 7 W - [tgm]GetSchema("Tables")
19:04:56.846 7 W - [tgm]GetSchema("Columns")
19:04:56.931 7 W - [tgm]GetSchema("Indexes")
19:04:57.011 7 W - [tgm]GetSchema("IndexColumns")
19:04:57.086 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:04:57.155 7 W - Select Top 1 * From tgm_role Where name=N'ADMIN' Order By id Desc
19:05:08.436 9 W - Select Top 1 * From tgm_role Where name=N'ADMIN' Order By id Desc
19:05:08.506 9 W - Select * From tgm_platform Where id=1
19:05:09.793 8 W - [tgm]GetSchema("Tables")
19:05:10.038 8 W - [tgm]GetSchema("Columns")
19:05:10.126 8 W - [tgm]GetSchema("Indexes")
19:05:10.201 8 W - [tgm]GetSchema("IndexColumns")
19:05:10.279 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:05:10.349 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:05:10.414 8 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:05:10.483 8 W - Select * From tgm_platform Where id=1
19:05:10.553 8 W - Select * From tgm_platform Where id=1
19:05:16.229 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:05:16.306 8 W - Select * From tgm_platform Order By  createtime desc
19:05:22.226 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:05:22.296 8 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
19:05:22.357 8 W - Select * From tgm_platform Where id=1
19:05:22.423 8 W - Select * From tgm_platform Where id=1
19:05:29.952 7 Y - Select * From tgm_server Order By id Desc
19:05:29.994 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:05:30.019 7 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:05:30.039 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 2050, 2050, 635573775300381943);Select SCOPE_IDENTITY()
19:05:30.061 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:05:30.082 7 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:05:30.099 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573775300982366);Select SCOPE_IDENTITY()
19:05:30.119 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:05:30.139 7 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:05:30.156 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 23020, 23020, 635573775301552723);Select SCOPE_IDENTITY()
19:05:59.524 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:05:59.591 7 W - Select * From tgm_platform Order By  createtime desc
19:06:01.956 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:06:02.022 8 W - Select * From tgm_role Where id=1
19:06:02.088 8 W - Select * From tgm_platform Where id=1
19:06:02.237 8 W - [tgm]GetSchema("Tables")
19:06:02.471 8 W - [tgm]GetSchema("Columns")
19:06:02.550 8 W - [tgm]GetSchema("Indexes")
19:06:02.626 8 W - [tgm]GetSchema("IndexColumns")
19:06:02.708 8 W - SET NOCOUNT ON;Insert Into tgm_resource(name, pid, sid, player_name, user_code, [time], type, [state], content, gold, coin, exp, honor, fame, spirit, army, devote, props) Values('', 1, 1, N'发大水', N'', 635573775621621506, 2, 1, '房东', 43, 0, 0, 0, 0, 0, 0, 0, '');Select SCOPE_IDENTITY()
19:06:07.143 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:06:07.218 7 W - Select * From tgm_role Where id=1
19:06:07.284 7 W - Select * From tgm_resource Order By id Desc
19:06:07.349 7 W - Select * From tgm_platform Where id in (1,1,1) Order By id Desc
19:06:07.420 7 W - Select * From tgm_server Where id in (1,1,1) Order By id Desc
19:06:08.744 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:06:08.813 9 W - Select * From tgm_platform Order By  createtime desc
19:06:29.948 7 Y - Select * From tgm_server Order By id Desc
19:06:29.989 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:06:30.016 7 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:06:30.040 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 2050, 2050, 635573775900396472);Select SCOPE_IDENTITY()
19:06:30.066 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:06:30.089 7 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:06:30.112 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573775901117170);Select SCOPE_IDENTITY()
19:06:30.134 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:06:30.156 7 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:06:30.174 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 23020, 23020, 635573775901737586);Select SCOPE_IDENTITY()
19:07:29.949 8 Y - Select * From tgm_server Order By id Desc
19:07:29.972 8 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:07:30.002 8 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:07:30.021 8 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 2050, 2050, 635573776500201278);Select SCOPE_IDENTITY()
19:07:30.053 8 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:07:30.092 8 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:07:30.111 8 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573776501101868);Select SCOPE_IDENTITY()
19:07:30.139 8 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:07:30.160 8 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:07:30.177 8 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 23020, 23020, 635573776501772312);Select SCOPE_IDENTITY()

#Software: iisexpress
#ProcessID: 11200
#AppDomain: /LM/W3SVC/2/ROOT-1-130662256586596630
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
19:07:41.234 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
19:07:41.243 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
19:07:41.244 1 N - 使用数据库方式：独占，加大缓存权重
19:07:41.244 1 N - 一级缓存：关闭缓存
19:07:41.325 1 N - [DB]GetSchema("MetaDataCollections")
19:07:41.360 1 N - [DB]GetSchema("ReservedWords")
19:07:41.374 1 N - [DB]GetSchema("Databases", "tgm")
19:07:41.467 1 N - [DB]GetSchema("Tables")
19:07:41.602 1 N - [DB]GetSchema("Columns")
19:07:41.650 1 N - [DB]GetSchema("Indexes")
19:07:41.688 1 N - [DB]GetSchema("IndexColumns")
19:07:41.730 1 N - [DB]GetSchema("DataTypes")
19:07:41.849 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:07:41.887 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
19:07:41.948 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:07:41.948 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:07:41.948 1 N - DB待检查表架构的实体个数：8
19:07:42.071 1 N - 检查连接[DB/SqlServer]的数据库架构耗时184ms
19:07:42.072 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
19:07:42.103 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
19:07:42.131 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

19:07:42.155 1 N - 初始化数据库及脚本
19:07:42.162 1 N - [tgm]GetSchema("MetaDataCollections")
19:07:42.165 1 N - [tgm]GetSchema("ReservedWords")
19:07:42.171 1 N - [tgm]GetSchema("Databases", "tgm")
19:07:42.246 1 N - [tgm]GetSchema("Tables")
19:07:42.368 1 N - [tgm]GetSchema("Columns")
19:07:42.416 1 N - [tgm]GetSchema("Indexes")
19:07:42.455 1 N - [tgm]GetSchema("IndexColumns")
19:07:42.488 1 N - [tgm]GetSchema("DataTypes")
19:07:42.577 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
19:07:42.610 1 N - [tgm]的所有实体类（0个）：
19:07:42.610 1 N - [tgm]需要检查架构的实体类（0个）：
19:07:42.610 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时33ms
19:07:42.610 1 N - Select * From tgm_server Order By id Desc
19:07:42.645 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
19:07:42.648 1 N - [7_1_DY-04]GetSchema("ReservedWords")
19:07:42.654 1 N - [7_1_DY-04]GetSchema("Databases", "tgg2")
19:07:42.723 1 N - [7_1_DY-04]GetSchema("Tables")
19:07:43.003 1 N - [7_1_DY-04]GetSchema("Columns")
19:07:43.150 1 N - [7_1_DY-04]GetSchema("Indexes")
19:07:43.202 1 N - [7_1_DY-04]GetSchema("IndexColumns")
19:07:43.267 1 N - [7_1_DY-04]GetSchema("DataTypes")
19:07:43.356 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
19:07:43.390 1 N - [7_1_DY-04]的所有实体类（0个）：
19:07:43.390 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
19:07:43.390 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时34ms
19:07:43.390 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:07:43.435 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
19:07:43.595 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573776634633833);Select SCOPE_IDENTITY()
19:07:43.637 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
19:07:43.640 1 N - [6_4_DY-03]GetSchema("ReservedWords")
19:07:43.646 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
19:07:43.718 1 N - [6_4_DY-03]GetSchema("Tables")
19:07:43.885 1 N - [6_4_DY-03]GetSchema("Columns")
19:07:44.005 1 N - [6_4_DY-03]GetSchema("Indexes")
19:07:44.045 1 N - [6_4_DY-03]GetSchema("IndexColumns")
19:07:44.091 1 N - [6_4_DY-03]GetSchema("DataTypes")
19:07:44.183 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
19:07:44.225 1 N - [6_4_DY-03]的所有实体类（0个）：
19:07:44.225 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
19:07:44.225 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时42ms
19:07:44.225 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:07:44.250 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
19:07:44.272 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573776642714461);Select SCOPE_IDENTITY()
19:07:44.299 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
19:07:44.302 1 N - [1_1_DY-02]GetSchema("ReservedWords")
19:07:44.309 1 N - [1_1_DY-02]GetSchema("Databases", "tg_test")
19:07:44.375 1 N - [1_1_DY-02]GetSchema("Tables")
19:07:44.680 1 N - [1_1_DY-02]GetSchema("Columns")
19:07:44.826 1 N - [1_1_DY-02]GetSchema("Indexes")
19:07:44.882 1 N - [1_1_DY-02]GetSchema("IndexColumns")
19:07:44.922 1 N - [1_1_DY-02]GetSchema("DataTypes")
19:07:45.014 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
19:07:45.049 1 N - [1_1_DY-02]的所有实体类（0个）：
19:07:45.049 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
19:07:45.049 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时35ms
19:07:45.049 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:07:45.073 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
19:07:45.096 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 10, 14, 14, 8, 8, 14, 0, 0, 0, 23020, 23020, 635573776650966858);Select SCOPE_IDENTITY()
19:07:51.290 6 W - [tgm]GetSchema("Tables")
19:07:51.550 6 W - [tgm]GetSchema("Columns")
19:07:51.639 6 W - [tgm]GetSchema("Indexes")
19:07:51.713 6 W - [tgm]GetSchema("IndexColumns")
19:07:51.789 6 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:07:51.865 6 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
19:07:51.935 6 W - Select * From tgm_platform Where id=1
19:07:53.254 7 W - [tgm]GetSchema("Tables")
19:07:53.494 7 W - [tgm]GetSchema("Columns")
19:07:53.583 7 W - [tgm]GetSchema("Indexes")
19:07:53.661 7 W - [tgm]GetSchema("IndexColumns")
19:07:53.739 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:07:53.815 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:07:53.883 7 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:07:53.949 7 W - Select * From tgm_platform Where id=1
19:07:54.027 7 W - Select * From tgm_platform Where id=1
19:08:01.600 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:08:01.672 5 W - Select * From tgm_platform Order By  createtime desc
19:08:05.988 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:08:06.058 5 W - Select * From tgm_server Order By id Desc
19:08:06.192 5 W - [tgm]GetSchema("Tables")
19:08:06.433 5 W - [tgm]GetSchema("Columns")
19:08:06.519 5 W - [tgm]GetSchema("Indexes")
19:08:06.596 5 W - [tgm]GetSchema("IndexColumns")
19:08:06.668 5 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:08:06.733 5 W - Select Count(*) From tgm_record_pay
19:08:06.792 5 W - Select Top 10 * From tgm_record_pay Order By id Desc
19:08:06.854 5 W - Select * From tgm_platform Order By id Desc
19:08:19.228 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:08:19.297 6 W - Select * From tgm_platform Order By  createtime desc
19:08:33.001 5 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:08:33.070 5 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
19:08:33.132 5 W - Select * From tgm_platform Where id=1
19:08:33.198 5 W - Select * From tgm_platform Where id=1
19:08:42.174 5 Y - Select * From tgm_server Order By id Desc
19:08:42.221 5 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:08:42.248 5 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:08:42.268 5 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573777222678713);Select SCOPE_IDENTITY()
19:08:42.289 5 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:08:42.314 5 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:08:42.333 5 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573777223329146);Select SCOPE_IDENTITY()
19:08:42.358 5 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:08:42.378 5 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:08:42.396 5 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 10, 14, 14, 8, 8, 14, 0, 0, 0, 23020, 23020, 635573777223959566);Select SCOPE_IDENTITY()
19:08:49.692 11 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:08:49.759 11 W - Select * From tgm_platform Order By  createtime desc
19:08:51.927 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:08:51.993 6 W - Select * From tgm_role Where id=1
19:08:52.057 6 W - Select * From tgm_platform Where id=1
19:08:52.187 6 W - [tgm]GetSchema("Tables")
19:08:52.414 6 W - [tgm]GetSchema("Columns")
19:08:52.494 6 W - [tgm]GetSchema("Indexes")
19:08:52.570 6 W - [tgm]GetSchema("IndexColumns")
19:08:52.650 6 W - SET NOCOUNT ON;Insert Into tgm_resource(name, pid, sid, player_name, user_code, [time], type, [state], content, gold, coin, exp, honor, fame, spirit, army, devote, props) Values('', 1, 1, N'发大水', N'', 635573777321198609, 2, 1, '发大水', 188, 0, 0, 0, 0, 0, 0, 0, '1_1');Select SCOPE_IDENTITY()
19:08:57.539 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:08:57.610 6 W - Select * From tgm_role Where id=1
19:08:57.677 6 W - Select * From tgm_resource Order By id Desc
19:08:57.746 6 W - Select * From tgm_platform Where id in (1,1,1,1) Order By id Desc
19:08:57.812 6 W - Select * From tgm_server Where id in (1,1,1,1) Order By id Desc
19:08:59.078 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:08:59.152 7 W - Select * From tgm_platform Order By  createtime desc
19:09:11.238 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:09:11.318 6 W - Select * From tgm_platform Order By  createtime desc
19:09:14.401 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:09:14.467 6 W - Select * From tgm_role Where id=1
19:09:14.531 6 W - Select * From tgm_resource Order By id Desc
19:09:14.599 6 W - Select * From tgm_platform Where id in (1,1,1,1) Order By id Desc
19:09:14.662 6 W - Select * From tgm_server Where id in (1,1,1,1) Order By id Desc
19:09:15.714 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:09:15.783 7 W - Select * From tgm_platform Order By  createtime desc
19:09:39.827 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:09:39.894 8 W - Select * From tgm_platform Order By  createtime desc
19:09:42.182 6 Y - Select * From tgm_server Order By id Desc
19:09:42.224 6 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:09:42.257 6 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:09:42.276 6 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573777822757301);Select SCOPE_IDENTITY()
19:09:42.298 6 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:09:42.320 6 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:09:42.338 6 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573777823377377);Select SCOPE_IDENTITY()
19:09:42.358 6 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:09:42.379 6 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:09:42.396 6 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 6, 9, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573777823957761);Select SCOPE_IDENTITY()
19:10:13.781 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:10:13.848 6 W - Select * From tgm_role Where id=1
19:10:13.914 6 W - Select * From tgm_resource Order By id Desc
19:10:13.979 6 W - Select * From tgm_platform Where id in (1,1,1,1) Order By id Desc
19:10:14.047 6 W - Select * From tgm_server Where id in (1,1,1,1) Order By id Desc
19:10:15.108 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:10:15.172 7 W - Select * From tgm_platform Order By  createtime desc
19:10:42.183 6 Y - Select * From tgm_server Order By id Desc
19:10:42.226 6 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:10:42.271 6 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:10:42.293 6 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573778422926211);Select SCOPE_IDENTITY()
19:10:42.319 6 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:10:42.343 6 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:10:42.364 6 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573778423636697);Select SCOPE_IDENTITY()
19:10:42.390 6 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:10:42.414 6 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:10:42.434 6 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 6, 9, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573778424337523);Select SCOPE_IDENTITY()

#Software: iisexpress
#ProcessID: 6864
#AppDomain: /LM/W3SVC/2/ROOT-1-130662279746406363
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
19:46:20.250 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
19:46:20.259 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
19:46:20.260 1 N - 使用数据库方式：独占，加大缓存权重
19:46:20.260 1 N - 一级缓存：关闭缓存
19:46:20.288 1 N - [DB]GetSchema("MetaDataCollections")
19:46:20.314 1 N - [DB]GetSchema("ReservedWords")
19:46:20.328 1 N - [DB]GetSchema("Databases", "tgm")
19:46:20.416 1 N - [DB]GetSchema("Tables")
19:46:20.539 1 N - [DB]GetSchema("Columns")
19:46:20.583 1 N - [DB]GetSchema("Indexes")
19:46:20.615 1 N - [DB]GetSchema("IndexColumns")
19:46:20.652 1 N - [DB]GetSchema("DataTypes")
19:46:20.759 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:46:20.793 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
19:46:20.872 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:46:20.872 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:46:20.873 1 N - DB待检查表架构的实体个数：8
19:46:21.000 1 N - 检查连接[DB/SqlServer]的数据库架构耗时207ms
19:46:21.000 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
19:46:21.027 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
19:46:21.051 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

19:46:21.075 1 N - 初始化数据库及脚本
19:46:21.082 1 N - [tgm]GetSchema("MetaDataCollections")
19:46:21.085 1 N - [tgm]GetSchema("ReservedWords")
19:46:21.091 1 N - [tgm]GetSchema("Databases", "tgm")
19:46:21.167 1 N - [tgm]GetSchema("Tables")
19:46:21.286 1 N - [tgm]GetSchema("Columns")
19:46:21.330 1 N - [tgm]GetSchema("Indexes")
19:46:21.364 1 N - [tgm]GetSchema("IndexColumns")
19:46:21.398 1 N - [tgm]GetSchema("DataTypes")
19:46:21.487 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
19:46:21.536 1 N - [tgm]的所有实体类（0个）：
19:46:21.536 1 N - [tgm]需要检查架构的实体类（0个）：
19:46:21.536 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时49ms
19:46:21.536 1 N - Select * From tgm_server Order By id Desc
19:46:21.573 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
19:46:21.576 1 N - [7_1_DY-04]GetSchema("ReservedWords")
19:46:21.582 1 N - [7_1_DY-04]GetSchema("Databases", "tgg2")
19:46:21.650 1 N - [7_1_DY-04]GetSchema("Tables")
19:46:21.810 1 N - [7_1_DY-04]GetSchema("Columns")
19:46:21.930 1 N - [7_1_DY-04]GetSchema("Indexes")
19:46:21.997 1 N - [7_1_DY-04]GetSchema("IndexColumns")
19:46:22.041 1 N - [7_1_DY-04]GetSchema("DataTypes")
19:46:22.131 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
19:46:22.177 1 N - [7_1_DY-04]的所有实体类（0个）：
19:46:22.177 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
19:46:22.178 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时47ms
19:46:22.178 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:46:22.204 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
19:46:22.366 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573799822317309);Select SCOPE_IDENTITY()
19:46:22.408 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
19:46:22.411 1 N - [6_4_DY-03]GetSchema("ReservedWords")
19:46:22.417 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
19:46:22.485 1 N - [6_4_DY-03]GetSchema("Tables")
19:46:22.728 1 N - [6_4_DY-03]GetSchema("Columns")
19:46:22.872 1 N - [6_4_DY-03]GetSchema("Indexes")
19:46:22.920 1 N - [6_4_DY-03]GetSchema("IndexColumns")
19:46:22.965 1 N - [6_4_DY-03]GetSchema("DataTypes")
19:46:23.057 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
19:46:23.105 1 N - [6_4_DY-03]的所有实体类（0个）：
19:46:23.105 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
19:46:23.105 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时48ms
19:46:23.105 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:46:23.130 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
19:46:23.152 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573799831516901);Select SCOPE_IDENTITY()
19:46:23.180 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
19:46:23.183 1 N - [1_1_DY-02]GetSchema("ReservedWords")
19:46:23.188 1 N - [1_1_DY-02]GetSchema("Databases", "tg_test")
19:46:23.259 1 N - [1_1_DY-02]GetSchema("Tables")
19:46:23.426 1 N - [1_1_DY-02]GetSchema("Columns")
19:46:23.544 1 N - [1_1_DY-02]GetSchema("Indexes")
19:46:23.581 1 N - [1_1_DY-02]GetSchema("IndexColumns")
19:46:23.622 1 N - [1_1_DY-02]GetSchema("DataTypes")
19:46:23.710 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
19:46:23.756 1 N - [1_1_DY-02]的所有实体类（0个）：
19:46:23.756 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
19:46:23.756 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时46ms
19:46:23.756 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:46:23.780 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
19:46:23.800 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 6, 9, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573799838002236);Select SCOPE_IDENTITY()
19:46:34.527 7 W - [tgm]GetSchema("Tables")
19:46:34.775 7 W - [tgm]GetSchema("Columns")
19:46:34.862 7 W - [tgm]GetSchema("Indexes")
19:46:34.939 7 W - [tgm]GetSchema("IndexColumns")
19:46:35.021 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:46:35.093 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
19:46:35.166 7 W - Select * From tgm_platform Where id=1
19:46:36.577 8 W - [tgm]GetSchema("Tables")
19:46:36.840 8 W - [tgm]GetSchema("Columns")
19:46:36.928 8 W - [tgm]GetSchema("Indexes")
19:46:37.011 8 W - [tgm]GetSchema("IndexColumns")
19:46:37.090 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:46:37.162 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:46:37.229 8 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:46:37.300 8 W - Select * From tgm_platform Where id=1
19:46:37.371 8 W - Select * From tgm_platform Where id=1
19:46:50.666 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:46:50.734 6 W - Select * From tgm_platform Order By  createtime desc
19:47:00.100 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:47:00.172 7 W - Select * From tgm_platform Order By  createtime desc
19:47:03.867 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:47:03.939 6 W - Select * From tgm_server Order By id Desc
19:47:04.079 6 W - [tgm]GetSchema("Tables")
19:47:04.322 6 W - [tgm]GetSchema("Columns")
19:47:04.408 6 W - [tgm]GetSchema("Indexes")
19:47:04.482 6 W - [tgm]GetSchema("IndexColumns")
19:47:04.557 6 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:47:04.624 6 W - Select Count(*) From tgm_record_pay
19:47:04.688 6 W - Select Top 10 * From tgm_record_pay Order By id Desc
19:47:04.755 6 W - Select * From tgm_platform Order By id Desc
19:47:05.964 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:47:06.032 8 W - Select * From tgm_platform Order By  createtime desc
19:47:08.739 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:47:08.805 6 W - Select * From tgm_server Order By id Desc
19:47:08.873 6 W - Select Count(*) From tgm_record_pay
19:47:08.932 6 W - Select Top 10 * From tgm_record_pay Order By id Desc
19:47:08.997 6 W - Select * From tgm_platform Order By id Desc
19:47:09.069 6 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:47:09.216 6 W - [7_1_DY-04]GetSchema("Tables")
19:47:09.493 6 W - [7_1_DY-04]GetSchema("Columns")
19:47:09.648 6 W - [7_1_DY-04]GetSchema("Indexes")
19:47:09.724 6 W - [7_1_DY-04]GetSchema("IndexColumns")
19:47:09.810 6 W - Select * From tg_user_login_log Order By id Desc
19:47:09.874 6 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:47:10.178 6 W - Select * From tg_user_login_log Order By id Desc
19:47:10.242 6 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:47:10.377 6 W - [1_1_DY-02]GetSchema("Tables")
19:47:10.741 6 W - [1_1_DY-02]GetSchema("Columns")
19:47:10.903 6 W - [1_1_DY-02]GetSchema("Indexes")
19:47:11.033 6 W - [1_1_DY-02]GetSchema("IndexColumns")
19:47:11.116 6 W - Select * From tg_user_login_log Order By id Desc
19:47:21.091 6 Y - Select * From tgm_server Order By id Desc
19:47:21.116 6 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:47:21.138 6 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:47:21.157 6 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573800411568073);Select SCOPE_IDENTITY()
19:47:21.177 6 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:47:21.197 6 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:47:21.216 6 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573800412158588);Select SCOPE_IDENTITY()
19:47:21.236 6 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:47:21.257 6 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:47:21.275 6 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 6, 9, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573800412749045);Select SCOPE_IDENTITY()
19:47:32.977 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:47:33.044 7 W - Select * From tgm_platform Order By  createtime desc
19:47:36.470 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:47:36.539 8 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
19:47:36.601 8 W - Select * From tgm_platform Where id=1
19:47:36.668 8 W - Select * From tgm_platform Where id=1
19:47:52.368 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:47:52.435 6 W - Select * From tgm_platform Order By  createtime desc
19:47:54.817 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:47:54.887 7 W - Select * From tgm_role Where id=1
19:47:54.951 7 W - Select * From tgm_platform Where id=1
19:47:55.093 7 W - [tgm]GetSchema("Tables")
19:47:55.332 7 W - [tgm]GetSchema("Columns")
19:47:55.416 7 W - [tgm]GetSchema("Indexes")
19:47:55.495 7 W - [tgm]GetSchema("IndexColumns")
19:47:55.574 7 W - SET NOCOUNT ON;Insert Into tgm_resource(name, pid, sid, player_name, user_code, [time], type, [state], content, gold, coin, exp, honor, fame, spirit, army, devote, props) Values('', 1, 1, '', N'', 635573800750179940, 1, 1, '发士大夫', 100, 0, 0, 0, 0, 0, 0, 0, '1_1');Select SCOPE_IDENTITY()
19:48:00.342 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:48:00.411 7 W - Select * From tgm_role Where id=1
19:48:00.483 7 W - Select * From tgm_resource Order By id Desc
19:48:00.582 7 W - Select * From tgm_platform Where id in (1) Order By id Desc
19:48:00.651 7 W - Select * From tgm_server Where id in (1) Order By id Desc
19:48:01.974 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:48:02.047 8 W - Select * From tgm_platform Order By  createtime desc
19:48:09.430 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:48:09.494 6 W - Select * From tgm_resource Where id=1
19:48:09.614 6 W - Update tgm_resource Set [state]=2, [operation]=N'admin' Where id=1
19:48:10.972 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:48:11.039 8 W - Select * From tgm_role Where id=1
19:48:11.107 8 W - Select * From tgm_resource Order By id Desc
19:48:11.175 8 W - Select * From tgm_platform Where id in (1) Order By id Desc
19:48:11.241 8 W - Select * From tgm_server Where id in (1) Order By id Desc
19:48:12.383 6 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:48:12.453 6 W - Select * From tgm_platform Order By  createtime desc
19:48:21.089 6 Y - Select * From tgm_server Order By id Desc
19:48:21.131 6 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:48:21.158 6 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:48:21.177 6 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573801011769903);Select SCOPE_IDENTITY()
19:48:21.199 6 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:48:21.220 6 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:48:21.239 6 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573801012380309);Select SCOPE_IDENTITY()
19:48:21.259 6 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:48:21.280 6 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:48:21.299 6 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 6, 9, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573801012980700);Select SCOPE_IDENTITY()

#Software: iisexpress
#ProcessID: 1868
#AppDomain: /LM/W3SVC/2/ROOT-1-130662281296414990
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
19:48:55.303 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
19:48:55.311 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
19:48:55.312 1 N - 使用数据库方式：独占，加大缓存权重
19:48:55.312 1 N - 一级缓存：关闭缓存
19:48:55.339 1 N - [DB]GetSchema("MetaDataCollections")
19:48:55.364 1 N - [DB]GetSchema("ReservedWords")
19:48:55.379 1 N - [DB]GetSchema("Databases", "tgm")
19:48:55.474 1 N - [DB]GetSchema("Tables")
19:48:55.617 1 N - [DB]GetSchema("Columns")
19:48:55.661 1 N - [DB]GetSchema("Indexes")
19:48:55.694 1 N - [DB]GetSchema("IndexColumns")
19:48:55.734 1 N - [DB]GetSchema("DataTypes")
19:48:55.852 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:48:55.887 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
19:48:55.971 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:48:55.971 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:48:55.971 1 N - DB待检查表架构的实体个数：8
19:48:56.113 1 N - 检查连接[DB/SqlServer]的数据库架构耗时226ms
19:48:56.113 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
19:48:56.143 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
19:48:56.169 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

19:48:56.196 1 N - 初始化数据库及脚本
19:48:56.203 1 N - [tgm]GetSchema("MetaDataCollections")
19:48:56.206 1 N - [tgm]GetSchema("ReservedWords")
19:48:56.212 1 N - [tgm]GetSchema("Databases", "tgm")
19:48:56.310 1 N - [tgm]GetSchema("Tables")
19:48:56.452 1 N - [tgm]GetSchema("Columns")
19:48:56.496 1 N - [tgm]GetSchema("Indexes")
19:48:56.530 1 N - [tgm]GetSchema("IndexColumns")
19:48:56.565 1 N - [tgm]GetSchema("DataTypes")
19:48:56.653 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
19:48:56.701 1 N - [tgm]的所有实体类（0个）：
19:48:56.701 1 N - [tgm]需要检查架构的实体类（0个）：
19:48:56.701 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时48ms
19:48:56.701 1 N - Select * From tgm_server Order By id Desc
19:48:56.740 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
19:48:56.743 1 N - [7_1_DY-04]GetSchema("ReservedWords")
19:48:56.749 1 N - [7_1_DY-04]GetSchema("Databases", "tgg2")
19:48:56.828 1 N - [7_1_DY-04]GetSchema("Tables")
19:48:57.004 1 N - [7_1_DY-04]GetSchema("Columns")
19:48:57.124 1 N - [7_1_DY-04]GetSchema("Indexes")
19:48:57.162 1 N - [7_1_DY-04]GetSchema("IndexColumns")
19:48:57.202 1 N - [7_1_DY-04]GetSchema("DataTypes")
19:48:57.293 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
19:48:57.339 1 N - [7_1_DY-04]的所有实体类（0个）：
19:48:57.339 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
19:48:57.340 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时47ms
19:48:57.340 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:48:57.366 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
19:48:57.558 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573801374047843);Select SCOPE_IDENTITY()
19:48:57.600 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
19:48:57.603 1 N - [6_4_DY-03]GetSchema("ReservedWords")
19:48:57.609 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
19:48:57.681 1 N - [6_4_DY-03]GetSchema("Tables")
19:48:57.862 1 N - [6_4_DY-03]GetSchema("Columns")
19:48:57.997 1 N - [6_4_DY-03]GetSchema("Indexes")
19:48:58.043 1 N - [6_4_DY-03]GetSchema("IndexColumns")
19:48:58.086 1 N - [6_4_DY-03]GetSchema("DataTypes")
19:48:58.175 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
19:48:58.224 1 N - [6_4_DY-03]的所有实体类（0个）：
19:48:58.224 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
19:48:58.224 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时47ms
19:48:58.224 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:48:58.248 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
19:48:58.269 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573801382680580);Select SCOPE_IDENTITY()
19:48:58.296 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
19:48:58.299 1 N - [1_1_DY-02]GetSchema("ReservedWords")
19:48:58.305 1 N - [1_1_DY-02]GetSchema("Databases", "tg_test")
19:48:58.373 1 N - [1_1_DY-02]GetSchema("Tables")
19:48:58.540 1 N - [1_1_DY-02]GetSchema("Columns")
19:48:58.659 1 N - [1_1_DY-02]GetSchema("Indexes")
19:48:58.699 1 N - [1_1_DY-02]GetSchema("IndexColumns")
19:48:58.742 1 N - [1_1_DY-02]GetSchema("DataTypes")
19:48:58.836 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
19:48:58.883 1 N - [1_1_DY-02]的所有实体类（0个）：
19:48:58.883 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
19:48:58.883 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时47ms
19:48:58.883 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:48:58.908 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
19:48:58.929 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 6, 9, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573801389288773);Select SCOPE_IDENTITY()
19:49:08.043 7 W - [tgm]GetSchema("Tables")
19:49:08.292 7 W - [tgm]GetSchema("Columns")
19:49:08.379 7 W - [tgm]GetSchema("Indexes")
19:49:08.456 7 W - [tgm]GetSchema("IndexColumns")
19:49:08.533 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:49:08.604 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
19:49:08.681 7 W - Select * From tgm_platform Where id=1
19:49:10.073 9 W - [tgm]GetSchema("Tables")
19:49:10.325 9 W - [tgm]GetSchema("Columns")
19:49:10.413 9 W - [tgm]GetSchema("Indexes")
19:49:10.490 9 W - [tgm]GetSchema("IndexColumns")
19:49:10.567 9 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:49:10.644 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:49:10.711 9 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:49:10.779 9 W - Select * From tgm_platform Where id=1
19:49:10.849 9 W - Select * From tgm_platform Where id=1
19:49:16.914 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:49:16.983 8 W - Select * From tgm_platform Order By  createtime desc
19:49:20.251 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:49:20.321 8 W - Select * From tgm_server Order By id Desc
19:49:20.453 8 W - [tgm]GetSchema("Tables")
19:49:20.689 8 W - [tgm]GetSchema("Columns")
19:49:20.772 8 W - [tgm]GetSchema("Indexes")
19:49:20.849 8 W - [tgm]GetSchema("IndexColumns")
19:49:20.923 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:49:20.990 8 W - Select Count(*) From tgm_record_pay
19:49:21.055 8 W - Select Top 10 * From tgm_record_pay Order By id Desc
19:49:21.121 8 W - Select * From tgm_platform Order By id Desc
19:49:21.186 8 W - Select Top 1 * From tgm_server Where  name='DY-04' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:49:21.326 8 W - [7_1_DY-04]GetSchema("Tables")
19:49:21.627 8 W - [7_1_DY-04]GetSchema("Columns")
19:49:21.856 8 W - [7_1_DY-04]GetSchema("Indexes")
19:49:21.936 8 W - [7_1_DY-04]GetSchema("IndexColumns")
19:49:22.020 8 W - Select * From tg_user_login_log Order By id Desc
19:49:22.083 8 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:49:22.380 8 W - Select * From tg_user_login_log Order By id Desc
19:49:22.445 8 W - Select Top 1 * From tgm_server Where  name='DY-02' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:49:22.584 8 W - [1_1_DY-02]GetSchema("Tables")
19:49:22.859 8 W - [1_1_DY-02]GetSchema("Columns")
19:49:23.021 8 W - [1_1_DY-02]GetSchema("Indexes")
19:49:23.109 8 W - [1_1_DY-02]GetSchema("IndexColumns")
19:49:23.194 8 W - Select * From tg_user_login_log Order By id Desc
19:49:42.527 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:49:42.593 7 W - Select * From tgm_platform Order By  createtime desc
19:49:49.537 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:49:49.609 7 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
19:49:49.671 7 W - Select * From tgm_platform Where id=1
19:49:49.737 7 W - Select * From tgm_platform Where id=1
19:49:56.206 7 Y - Select * From tgm_server Order By id Desc
19:49:56.249 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:49:56.276 7 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:49:56.294 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573801962936382);Select SCOPE_IDENTITY()
19:49:56.313 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:49:56.332 7 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:49:56.350 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573801963496758);Select SCOPE_IDENTITY()
19:49:56.371 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:49:56.393 7 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:49:56.411 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 7, 8, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573801964107165);Select SCOPE_IDENTITY()
19:49:59.597 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:49:59.666 8 W - Select * From tgm_server Where [pid] =4  Order By  createtime desc
19:49:59.725 8 W - Select * From tgm_platform Where id=4
19:50:08.977 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:50:09.045 7 W - Select * From tgm_platform Where id=4
19:50:09.109 7 W - Select * From tgm_server Where id=6
19:50:09.175 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
19:50:09.248 7 W - Select Top 1 * From tgm_server Where  name='DY-03' AND  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:50:09.388 7 W - [tgm]GetSchema("Tables")
19:50:09.635 7 W - [tgm]GetSchema("Columns")
19:50:09.719 7 W - [tgm]GetSchema("Indexes")
19:50:09.796 7 W - [tgm]GetSchema("IndexColumns")
19:50:09.879 7 W - Select Top 1 * From tg_user Where user_code=N'lzh' Order By id Desc
19:50:11.406 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:50:11.472 9 W - Select * From tgm_platform Order By  createtime desc
19:50:56.212 7 Y - Select * From tgm_server Order By id Desc
19:50:56.243 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:50:56.274 7 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:50:56.306 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573802563061811);Select SCOPE_IDENTITY()
19:50:56.321 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:50:56.353 7 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:50:56.368 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573802563686836);Select SCOPE_IDENTITY()
19:50:56.399 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:50:56.415 7 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:50:56.431 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 7, 8, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573802564311875);Select SCOPE_IDENTITY()
19:51:56.215 7 Y - Select * From tgm_server Order By id Desc
19:51:56.246 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:51:56.293 7 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:51:56.309 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573803163092213);Select SCOPE_IDENTITY()
19:51:56.340 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:51:56.356 7 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:51:56.371 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573803163717261);Select SCOPE_IDENTITY()
19:51:56.402 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:51:56.418 7 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:51:56.434 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 8, 7, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573803164342273);Select SCOPE_IDENTITY()
19:52:19.794 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:52:19.872 9 W - Select * From tgm_platform Order By  createtime desc
19:52:31.873 15 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:52:31.936 15 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
19:52:31.998 15 W - Select * From tgm_platform Where id=1
19:52:32.076 15 W - Select * From tgm_platform Where id=1
19:52:43.390 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:52:43.458 7 W - Select * From tgm_role Where id=1
19:52:43.601 7 W - [tgm]GetSchema("Tables")
19:52:43.837 7 W - [tgm]GetSchema("Columns")
19:52:43.919 7 W - [tgm]GetSchema("Indexes")
19:52:43.997 7 W - [tgm]GetSchema("IndexColumns")
19:52:44.071 7 W - Select * From tgm_resource Order By id Desc
19:52:44.137 7 W - Select * From tgm_platform Where id in (1) Order By id Desc
19:52:44.207 7 W - Select * From tgm_server Where id in (1) Order By id Desc
19:52:45.563 16 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:52:45.628 16 W - Select * From tgm_platform Order By  createtime desc
19:52:56.216 16 Y - Select * From tgm_server Order By id Desc
19:52:56.261 16 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:52:56.291 16 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:52:56.315 16 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573803763144863);Select SCOPE_IDENTITY()
19:52:56.340 16 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:52:56.365 16 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:52:56.387 16 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573803763865340);Select SCOPE_IDENTITY()
19:52:56.411 16 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:52:56.434 16 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:52:56.453 16 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 7, 8, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573803764525905);Select SCOPE_IDENTITY()
19:53:56.232 7 Y - Select * From tgm_server Order By id Desc
19:53:56.303 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:53:56.376 7 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:53:56.553 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573804364925171);Select SCOPE_IDENTITY()
19:53:56.640 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:53:56.722 7 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:54:02.003 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573804420024792);Select SCOPE_IDENTITY()
19:54:02.024 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:54:02.025 16 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:54:02.111 7 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:54:03.467 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 7, 8, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573804421325578);Select SCOPE_IDENTITY()
19:54:09.068 16 W - Select * From tgm_resource Where id=1
19:54:18.210 19 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:54:18.288 19 W - Select * From tgm_role Where id=1
19:54:18.350 19 W - Select * From tgm_resource Order By id Desc
19:54:19.507 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:54:19.585 7 W - Select * From tgm_platform Order By  createtime desc
19:54:21.288 19 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:54:21.350 19 W - Select * From tgm_platform Order By  createtime desc
19:54:23.866 16 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:54:23.929 16 W - Select * From tgm_role Where id=1
19:54:23.991 16 W - Select * From tgm_resource Order By id Desc
19:54:25.163 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:54:25.241 7 W - Select * From tgm_platform Order By  createtime desc
19:54:29.070 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:54:29.132 7 W - Select * From tgm_platform Order By  createtime desc
19:54:32.554 16 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:54:32.617 16 W - Select * From tgm_server Where [pid] =1  Order By  createtime desc
19:54:32.679 16 W - Select * From tgm_platform Where id=1
19:54:32.742 16 W - Select * From tgm_platform Where id=1
19:54:53.884 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:54:53.955 7 W - Select * From tgm_platform Order By  createtime desc
19:54:56.258 16 Y - Select * From tgm_server Order By id Desc
19:54:56.337 16 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:54:56.361 16 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:54:56.377 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:54:56.443 16 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573804963786550);Select SCOPE_IDENTITY()
19:54:56.461 7 W - Select * From tgm_role Where id=1
19:54:56.530 16 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:54:56.531 7 W - Select * From tgm_platform Where id=1
19:54:56.614 16 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:54:56.633 16 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573804966328237);Select SCOPE_IDENTITY()
19:54:56.652 7 W - SET NOCOUNT ON;Insert Into tgm_resource(name, pid, sid, player_name, user_code, [time], type, [state], content, gold, coin, exp, honor, fame, spirit, army, devote, props) Values('', 1, 1, '', N'', 635573804966328237, 1, 1, '感染到', 100, 0, 0, 0, 0, 0, 0, 0, '1_1');Select SCOPE_IDENTITY()
19:54:56.714 16 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:54:56.735 16 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:54:56.826 16 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 7, 8, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573804968249529);Select SCOPE_IDENTITY()
19:55:47.563 22 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:55:47.639 22 W - Select * From tgm_role Where id=1
19:55:47.720 22 W - Select * From tgm_resource Order By id Desc
19:55:47.784 22 W - Select * From tgm_platform Where id in (1) Order By id Desc
19:55:47.848 22 W - Select * From tgm_server Where id in (1) Order By id Desc
19:55:49.002 19 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:55:49.068 19 W - Select * From tgm_platform Order By  createtime desc
19:55:56.268 19 Y - Select * From tgm_server Order By id Desc
19:55:56.304 19 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:55:56.330 19 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:55:56.349 19 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573805563488791);Select SCOPE_IDENTITY()
19:55:56.396 19 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:55:56.418 19 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:55:56.436 19 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573805564359595);Select SCOPE_IDENTITY()
19:55:56.470 19 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:55:56.493 19 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:55:56.512 19 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 7, 8, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573805565110089);Select SCOPE_IDENTITY()
19:56:01.659 22 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:56:03.445 22 W - Select * From tgm_resource Where id=2
19:56:26.560 22 W - Update tgm_resource Set [state]=2, [operation]=N'admin' Where id=2
19:57:44.612 20 Y - Select * From tgm_server Order By id Desc
19:57:44.722 20 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:57:44.831 20 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:57:45.003 20 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573806649408506);Select SCOPE_IDENTITY()
19:57:45.097 20 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:57:50.230 20 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:57:50.355 20 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573806703402792);Select SCOPE_IDENTITY()
19:57:50.434 20 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:57:50.512 20 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:57:50.574 20 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 7, 8, 15, 15, 8, 8, 15, 0, 0, 0, 23020, 23020, 635573806705746667);Select SCOPE_IDENTITY()

#Software: iisexpress
#ProcessID: 3352
#AppDomain: /LM/W3SVC/2/ROOT-1-130662286838019369
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
19:58:06.438 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
19:58:06.448 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
19:58:06.448 1 N - 使用数据库方式：独占，加大缓存权重
19:58:06.448 1 N - 一级缓存：关闭缓存
19:58:06.518 1 N - [DB]GetSchema("MetaDataCollections")
19:58:06.543 1 N - [DB]GetSchema("ReservedWords")
19:58:06.556 1 N - [DB]GetSchema("Databases", "tgm")
19:58:06.664 1 N - [DB]GetSchema("Tables")
19:58:06.790 1 N - [DB]GetSchema("Columns")
19:58:06.837 1 N - [DB]GetSchema("Indexes")
19:58:06.872 1 N - [DB]GetSchema("IndexColumns")
19:58:06.916 1 N - [DB]GetSchema("DataTypes")
19:58:07.035 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:58:07.071 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
19:58:07.132 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:58:07.132 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:58:07.133 1 N - DB待检查表架构的实体个数：8
19:58:07.266 1 N - 检查连接[DB/SqlServer]的数据库架构耗时195ms
19:58:07.267 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
19:58:07.296 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
19:58:07.323 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

19:58:07.349 1 N - 初始化数据库及脚本
19:58:07.357 1 N - [tgm]GetSchema("MetaDataCollections")
19:58:07.360 1 N - [tgm]GetSchema("ReservedWords")
19:58:07.365 1 N - [tgm]GetSchema("Databases", "tgm")
19:58:07.434 1 N - [tgm]GetSchema("Tables")
19:58:07.569 1 N - [tgm]GetSchema("Columns")
19:58:07.617 1 N - [tgm]GetSchema("Indexes")
19:58:07.655 1 N - [tgm]GetSchema("IndexColumns")
19:58:07.690 1 N - [tgm]GetSchema("DataTypes")
19:58:07.774 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
19:58:07.808 1 N - [tgm]的所有实体类（0个）：
19:58:07.808 1 N - [tgm]需要检查架构的实体类（0个）：
19:58:07.808 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时34ms
19:58:07.808 1 N - Select * From tgm_server Order By id Desc
19:58:07.844 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
19:58:07.847 1 N - [7_1_DY-04]GetSchema("ReservedWords")
19:58:07.852 1 N - [7_1_DY-04]GetSchema("Databases", "tgg2")
19:58:07.926 1 N - [7_1_DY-04]GetSchema("Tables")
19:58:08.099 1 N - [7_1_DY-04]GetSchema("Columns")
19:58:08.215 1 N - [7_1_DY-04]GetSchema("Indexes")
19:58:08.261 1 N - [7_1_DY-04]GetSchema("IndexColumns")
19:58:08.308 1 N - [7_1_DY-04]GetSchema("DataTypes")
19:58:08.395 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
19:58:08.429 1 N - [7_1_DY-04]的所有实体类（0个）：
19:58:08.429 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
19:58:08.429 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时34ms
19:58:08.429 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:58:08.472 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
19:58:08.633 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573806885001308);Select SCOPE_IDENTITY()
19:58:08.678 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
19:58:08.681 1 N - [6_4_DY-03]GetSchema("ReservedWords")
19:58:08.687 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
19:58:08.760 1 N - [6_4_DY-03]GetSchema("Tables")
19:58:08.942 1 N - [6_4_DY-03]GetSchema("Columns")
19:58:09.060 1 N - [6_4_DY-03]GetSchema("Indexes")
19:58:09.098 1 N - [6_4_DY-03]GetSchema("IndexColumns")
19:58:09.139 1 N - [6_4_DY-03]GetSchema("DataTypes")
19:58:09.234 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
19:58:09.276 1 N - [6_4_DY-03]的所有实体类（0个）：
19:58:09.276 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
19:58:09.276 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时42ms
19:58:09.276 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:58:09.299 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
19:58:09.320 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573806893191869);Select SCOPE_IDENTITY()
19:58:09.348 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
19:58:09.351 1 N - [1_1_DY-02]GetSchema("ReservedWords")
19:58:09.356 1 N - [1_1_DY-02]GetSchema("Databases", "tg_test")
19:58:09.423 1 N - [1_1_DY-02]GetSchema("Tables")
19:58:09.581 1 N - [1_1_DY-02]GetSchema("Columns")
19:58:09.697 1 N - [1_1_DY-02]GetSchema("Indexes")
19:58:09.733 1 N - [1_1_DY-02]GetSchema("IndexColumns")
19:58:09.778 1 N - [1_1_DY-02]GetSchema("DataTypes")
19:58:09.866 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
19:58:09.902 1 N - [1_1_DY-02]的所有实体类（0个）：
19:58:09.902 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
19:58:09.902 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时36ms
19:58:09.902 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:58:09.927 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
19:58:09.949 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 8, 8, 16, 16, 8, 8, 16, 0, 0, 0, 23020, 23020, 635573806899479355);Select SCOPE_IDENTITY()

#Software: iisexpress
#ProcessID: 9356
#AppDomain: /LM/W3SVC/2/ROOT-1-130662286973907041
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
19:58:19.891 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
19:58:19.900 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
19:58:19.900 1 N - 使用数据库方式：独占，加大缓存权重
19:58:19.900 1 N - 一级缓存：关闭缓存
19:58:19.966 1 N - [DB]GetSchema("MetaDataCollections")
19:58:20.013 1 N - [DB]GetSchema("ReservedWords")
19:58:20.031 1 N - [DB]GetSchema("Databases", "tgm")
19:58:20.127 1 N - [DB]GetSchema("Tables")
19:58:20.274 1 N - [DB]GetSchema("Columns")
19:58:20.320 1 N - [DB]GetSchema("Indexes")
19:58:20.356 1 N - [DB]GetSchema("IndexColumns")
19:58:20.399 1 N - [DB]GetSchema("DataTypes")
19:58:20.521 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:58:20.558 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
19:58:20.619 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:58:20.619 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
19:58:20.620 1 N - DB待检查表架构的实体个数：8
19:58:20.752 1 N - 检查连接[DB/SqlServer]的数据库架构耗时194ms
19:58:20.752 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
19:58:20.783 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
19:58:20.809 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

19:58:20.832 1 N - 初始化数据库及脚本
19:58:20.839 1 N - [tgm]GetSchema("MetaDataCollections")
19:58:20.842 1 N - [tgm]GetSchema("ReservedWords")
19:58:20.848 1 N - [tgm]GetSchema("Databases", "tgm")
19:58:20.918 1 N - [tgm]GetSchema("Tables")
19:58:21.043 1 N - [tgm]GetSchema("Columns")
19:58:21.097 1 N - [tgm]GetSchema("Indexes")
19:58:21.132 1 N - [tgm]GetSchema("IndexColumns")
19:58:21.165 1 N - [tgm]GetSchema("DataTypes")
19:58:21.258 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
19:58:21.292 1 N - [tgm]的所有实体类（0个）：
19:58:21.292 1 N - [tgm]需要检查架构的实体类（0个）：
19:58:21.292 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时34ms
19:58:21.292 1 N - Select * From tgm_server Order By id Desc
19:58:21.338 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
19:58:21.341 1 N - [7_1_DY-04]GetSchema("ReservedWords")
19:58:21.347 1 N - [7_1_DY-04]GetSchema("Databases", "tgg2")
19:58:21.417 1 N - [7_1_DY-04]GetSchema("Tables")
19:58:21.586 1 N - [7_1_DY-04]GetSchema("Columns")
19:58:21.724 1 N - [7_1_DY-04]GetSchema("Indexes")
19:58:21.769 1 N - [7_1_DY-04]GetSchema("IndexColumns")
19:58:21.809 1 N - [7_1_DY-04]GetSchema("DataTypes")
19:58:21.899 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
19:58:21.933 1 N - [7_1_DY-04]的所有实体类（0个）：
19:58:21.933 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
19:58:21.933 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时33ms
19:58:21.933 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:58:21.975 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
19:58:22.136 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573807020028031);Select SCOPE_IDENTITY()
19:58:22.181 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
19:58:22.184 1 N - [6_4_DY-03]GetSchema("ReservedWords")
19:58:22.190 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
19:58:22.266 1 N - [6_4_DY-03]GetSchema("Tables")
19:58:22.479 1 N - [6_4_DY-03]GetSchema("Columns")
19:58:22.607 1 N - [6_4_DY-03]GetSchema("Indexes")
19:58:22.644 1 N - [6_4_DY-03]GetSchema("IndexColumns")
19:58:22.687 1 N - [6_4_DY-03]GetSchema("DataTypes")
19:58:22.787 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
19:58:22.822 1 N - [6_4_DY-03]的所有实体类（0个）：
19:58:22.822 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
19:58:22.822 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时34ms
19:58:22.822 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:58:22.846 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
19:58:22.866 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573807028654462);Select SCOPE_IDENTITY()
19:58:22.894 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
19:58:22.897 1 N - [1_1_DY-02]GetSchema("ReservedWords")
19:58:22.903 1 N - [1_1_DY-02]GetSchema("Databases", "tg_test")
19:58:22.984 1 N - [1_1_DY-02]GetSchema("Tables")
19:58:23.150 1 N - [1_1_DY-02]GetSchema("Columns")
19:58:23.266 1 N - [1_1_DY-02]GetSchema("Indexes")
19:58:23.311 1 N - [1_1_DY-02]GetSchema("IndexColumns")
19:58:23.351 1 N - [1_1_DY-02]GetSchema("DataTypes")
19:58:23.441 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
19:58:23.475 1 N - [1_1_DY-02]的所有实体类（0个）：
19:58:23.475 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
19:58:23.475 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时34ms
19:58:23.476 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:58:23.500 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
19:58:23.521 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 8, 8, 16, 16, 8, 8, 16, 0, 0, 0, 23020, 23020, 635573807035201461);Select SCOPE_IDENTITY()
19:58:30.878 7 W - [tgm]GetSchema("Tables")
19:58:31.130 7 W - [tgm]GetSchema("Columns")
19:58:31.214 7 W - [tgm]GetSchema("Indexes")
19:58:31.291 7 W - [tgm]GetSchema("IndexColumns")
19:58:31.377 7 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
19:58:31.447 7 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
19:58:31.516 7 W - Select * From tgm_platform Where id=1
19:58:33.036 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:58:33.103 7 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
19:58:33.168 7 W - Select * From tgm_platform Where id=1
19:58:33.239 7 W - Select * From tgm_platform Where id=1
19:58:39.947 7 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:58:40.021 7 W - Select * From tgm_role Where id=1
19:58:40.341 7 W - Select * From tgm_resource Order By id Desc
19:58:40.414 7 W - Select * From tgm_platform Where id in (1) Order By id Desc
19:58:40.479 7 W - Select * From tgm_server Where id in (1) Order By id Desc
19:58:41.738 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
19:58:41.805 9 W - Select * From tgm_platform Order By  createtime desc
19:59:20.839 7 Y - Select * From tgm_server Order By id Desc
19:59:20.888 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:59:20.917 7 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
19:59:20.940 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573807609391796);Select SCOPE_IDENTITY()
19:59:20.964 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:59:20.987 7 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
19:59:21.006 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573807610052239);Select SCOPE_IDENTITY()
19:59:21.028 7 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
19:59:21.050 7 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
19:59:21.068 7 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 8, 8, 16, 16, 8, 8, 16, 0, 0, 0, 23020, 23020, 635573807610682637);Select SCOPE_IDENTITY()
20:00:07.492 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
20:00:07.557 8 W - Select * From tgm_platform Order By  createtime desc
20:00:20.846 8 Y - Select * From tgm_server Order By id Desc
20:00:20.893 8 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
20:00:20.909 8 Y - [StoredProcedure]sp_pay[Int32:@sid=7]
20:00:20.940 8 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573808209405944);Select SCOPE_IDENTITY()
20:00:20.956 8 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
20:00:20.987 8 Y - [StoredProcedure]sp_pay[Int32:@sid=6]
20:00:21.003 8 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573808210030978);Select SCOPE_IDENTITY()
20:00:21.018 8 Y - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
20:00:21.049 8 Y - [StoredProcedure]sp_pay[Int32:@sid=1]
20:00:21.065 8 Y - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 6, 10, 16, 16, 8, 8, 16, 0, 0, 0, 23020, 23020, 635573808210656007);Select SCOPE_IDENTITY()
20:00:33.548 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
20:00:33.611 9 W - Select * From tgm_role Where id=1
20:00:33.689 9 W - Select * From tgm_resource Order By id Desc
20:00:33.751 9 W - Select * From tgm_platform Where id in (1) Order By id Desc
20:00:33.814 9 W - Select * From tgm_server Where id in (1) Order By id Desc
20:00:53.821 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
20:00:53.883 10 W - Select * From tgm_platform Order By  createtime desc

#Software: iisexpress
#ProcessID: 2312
#AppDomain: /LM/W3SVC/2/ROOT-1-130662289687819916
#FileName: C:\Program Files (x86)\IIS Express\iisexpress.exe
#BaseDirectory: E:\192.168.1.254\TGG\管理后台\TGM\TGM.API\
#CurrentDirectory: C:\Program Files (x86)\IIS Express
#CommandLine: /config:"C:\Users\TH\Documents\IISExpress\config\applicationhost.config"  /site:"TGM.API" /apppool:"Clr4IntegratedAppPool"
#ApplicationType: Console
#CLR: 4.0.30319.34014
#OS: Windows 8 x64, TH/TH_KAER
#Date: 2015-01-20
#Fields: Time ThreadID IsPoolThread ThreadName Message
20:02:54.680 1 N - NewLife.Core v4.6.2014.0731 Build 2014-08-30 18:12:06
20:02:54.690 1 N - NewLife.XCode v8.13.2014.0720 Build 2014-08-30 18:10:56
20:02:54.691 1 N - 使用数据库方式：独占，加大缓存权重
20:02:54.691 1 N - 一级缓存：关闭缓存
20:02:54.718 1 N - [DB]GetSchema("MetaDataCollections")
20:02:54.742 1 N - [DB]GetSchema("ReservedWords")
20:02:54.757 1 N - [DB]GetSchema("Databases", "tgm")
20:02:54.848 1 N - [DB]GetSchema("Tables")
20:02:54.982 1 N - [DB]GetSchema("Columns")
20:02:55.035 1 N - [DB]GetSchema("Indexes")
20:02:55.070 1 N - [DB]GetSchema("IndexColumns")
20:02:55.114 1 N - [DB]GetSchema("DataTypes")
20:02:55.234 1 N - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
20:02:55.271 1 N - 开始检查连接[DB/SqlServer]的数据库架构……
20:02:55.352 1 N - [DB]的所有实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
20:02:55.352 1 N - [DB]需要检查架构的实体类（9个）：tgm_gm,tgm_notice,tgm_platform,tgm_record_game,tgm_record_hours,tgm_record_pay,tgm_resource,tgm_role,tgm_server
20:02:55.353 1 N - DB待检查表架构的实体个数：8
20:02:55.476 1 N - 检查连接[DB/SqlServer]的数据库架构耗时205ms
20:02:55.476 1 N - Select Top 1 * From tgm_platform Where id=0 Order By id Desc
20:02:55.505 1 N - Select Top 1 * From tgm_role Where id=0 Order By id Desc
20:02:55.528 1 N - IF  EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
DROP TRIGGER [trigger_pay_insert]
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
DROP PROCEDURE [sp_pay]

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[sp_pay]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [sp_pay]
@sid INT
AS
BEGIN
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 	
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	IF @pay_taday IS NULL
		SET @pay_taday=0;
	IF @pay_total IS NULL
		SET @pay_total=0;
	IF @pay_month IS NULL
		SET @pay_month=0;
	SELECT @pay_count AS pay_count,@pay_number AS pay_number,@pay_taday AS pay_taday,@pay_total AS pay_total,@pay_month AS pay_month	
END
' 
END

IF NOT EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'[trigger_pay_insert]'))
EXEC dbo.sp_executesql @statement = N'
CREATE TRIGGER [trigger_pay_insert]
   ON [tgm_record_pay]
   AFTER  INSERT
AS 
BEGIN
	DECLARE @sid INT, @amount INT,@createtime BIGINT,@ID BIGINT;
	DECLARE @_begin_time BIGINT,@_taday_time BIGINT,@_next_time BIGINT,@_end_time BIGINT;
	SET @_taday_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_next_time=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',GETDATE()+1) AS BIGINT) * 10000000 + 621355968000000000 
	SET @_begin_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_taday_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @_end_time=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@_next_time-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 		
	SELECT @sid =[sid], @amount = [amount],@createtime=[createtime] FROM inserted;
	DECLARE @pay_count INT,@pay_number INT,@pay_taday INT,@pay_total INT,@pay_month INT;
	--今日充值人数
	SELECT @pay_number=COUNT(*) FROM (SELECT DISTINCT [id] FROM [tgm_record_pay] WHERE  [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time) AS T
	--今日充值次数
	SELECT @pay_count=COUNT(*) FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time	
	--当天总充值
	SELECT @pay_taday=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@_begin_time AND [createtime]<@_end_time
	--总充值
	SELECT @pay_total=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid 
	DECLARE @time_0 BIGINT,@time_31 BIGINT,@M_BEGIN BIGINT,@M_END BIGINT;
	SET @M_BEGIN=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE())+1,GETDATE())) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_0=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_BEGIN-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	SET @M_END=CAST(DATEDIFF(s,''1970-01-01 00:00:00'',DATEADD(D,-DAY(GETDATE()),DATEADD(M,1,GETDATE()))) AS BIGINT) * 10000000 + 621355968000000000 
	SET @time_31=(CAST(DATEDIFF(d,''1970-01-01 00:00:00'',DATEADD(s,(@M_END-621355968000000000)/ 10000000,''1970-01-01 00:00:00''))AS BIGINT) * 10000000*24*60*60 + 621355968000000000); 
	--当月充值
	SELECT @pay_month=SUM([amount])  FROM [tgm_record_pay] WHERE [sid]=@sid AND [createtime]>@M_BEGIN AND [createtime]<@M_END
	SET @pay_count+=1;
	SELECT TOP 1 @ID=id FROM [tgm_record_hours] WHERE sid=@sid ORDER BY createtime DESC
	UPDATE [tgm_record_hours] SET [pay_count]=@pay_count,[pay_number]=@pay_number,[pay_taday]=@pay_taday,[pay_total]=@pay_total,[pay_month]=@pay_month
	WHERE [id]=@ID
END
' 

20:02:55.550 1 N - 初始化数据库及脚本
20:02:55.557 1 N - [tgm]GetSchema("MetaDataCollections")
20:02:55.561 1 N - [tgm]GetSchema("ReservedWords")
20:02:55.566 1 N - [tgm]GetSchema("Databases", "tgm")
20:02:55.630 1 N - [tgm]GetSchema("Tables")
20:02:55.760 1 N - [tgm]GetSchema("Columns")
20:02:55.809 1 N - [tgm]GetSchema("Indexes")
20:02:55.851 1 N - [tgm]GetSchema("IndexColumns")
20:02:55.889 1 N - [tgm]GetSchema("DataTypes")
20:02:55.978 1 N - 开始检查连接[tgm/SqlServer]的数据库架构……
20:02:56.039 1 N - [tgm]的所有实体类（0个）：
20:02:56.039 1 N - [tgm]需要检查架构的实体类（0个）：
20:02:56.039 1 N - 检查连接[tgm/SqlServer]的数据库架构耗时61ms
20:02:56.040 1 N - Select * From tgm_server Order By id Desc
20:02:56.076 1 N - [7_1_DY-04]GetSchema("MetaDataCollections")
20:02:56.079 1 N - [7_1_DY-04]GetSchema("ReservedWords")
20:02:56.085 1 N - [7_1_DY-04]GetSchema("Databases", "tgg2")
20:02:56.162 1 N - [7_1_DY-04]GetSchema("Tables")
20:02:56.320 1 N - [7_1_DY-04]GetSchema("Columns")
20:02:56.438 1 N - [7_1_DY-04]GetSchema("Indexes")
20:02:56.480 1 N - [7_1_DY-04]GetSchema("IndexColumns")
20:02:56.522 1 N - [7_1_DY-04]GetSchema("DataTypes")
20:02:56.622 1 N - 开始检查连接[7_1_DY-04/SqlServer]的数据库架构……
20:02:56.670 1 N - [7_1_DY-04]的所有实体类（0个）：
20:02:56.670 1 N - [7_1_DY-04]需要检查架构的实体类（0个）：
20:02:56.670 1 N - 检查连接[7_1_DY-04/SqlServer]的数据库架构耗时48ms
20:02:56.670 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
20:02:56.697 1 N - [StoredProcedure]sp_pay[Int32:@sid=7]
20:02:56.856 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 7, N'DY-04', 0, 2, 2, 2, 1, 1, 2, 0, 0, 0, 2050, 2050, 635573809767253192);Select SCOPE_IDENTITY()
20:02:56.898 1 N - [6_4_DY-03]GetSchema("MetaDataCollections")
20:02:56.902 1 N - [6_4_DY-03]GetSchema("ReservedWords")
20:02:56.907 1 N - [6_4_DY-03]GetSchema("Databases", "tgg")
20:02:56.973 1 N - [6_4_DY-03]GetSchema("Tables")
20:02:57.139 1 N - [6_4_DY-03]GetSchema("Columns")
20:02:57.256 1 N - [6_4_DY-03]GetSchema("Indexes")
20:02:57.293 1 N - [6_4_DY-03]GetSchema("IndexColumns")
20:02:57.332 1 N - [6_4_DY-03]GetSchema("DataTypes")
20:02:57.426 1 N - 开始检查连接[6_4_DY-03/SqlServer]的数据库架构……
20:02:57.473 1 N - [6_4_DY-03]的所有实体类（0个）：
20:02:57.473 1 N - [6_4_DY-03]需要检查架构的实体类（0个）：
20:02:57.473 1 N - 检查连接[6_4_DY-03/SqlServer]的数据库架构耗时47ms
20:02:57.473 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
20:02:57.498 1 N - [StoredProcedure]sp_pay[Int32:@sid=6]
20:02:57.520 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(4, 6, N'DY-03', 5, 4, 7, 9, 5, 5, 8, 0, 0, 0, 1002000, 1002000, 635573809775188901);Select SCOPE_IDENTITY()
20:02:57.548 1 N - [1_1_DY-02]GetSchema("MetaDataCollections")
20:02:57.551 1 N - [1_1_DY-02]GetSchema("ReservedWords")
20:02:57.556 1 N - [1_1_DY-02]GetSchema("Databases", "tg_test")
20:02:57.629 1 N - [1_1_DY-02]GetSchema("Tables")
20:02:57.789 1 N - [1_1_DY-02]GetSchema("Columns")
20:02:57.907 1 N - [1_1_DY-02]GetSchema("Indexes")
20:02:57.944 1 N - [1_1_DY-02]GetSchema("IndexColumns")
20:02:57.986 1 N - [1_1_DY-02]GetSchema("DataTypes")
20:02:58.088 1 N - 开始检查连接[1_1_DY-02/SqlServer]的数据库架构……
20:02:58.136 1 N - [1_1_DY-02]的所有实体类（0个）：
20:02:58.136 1 N - [1_1_DY-02]需要检查架构的实体类（0个）：
20:02:58.136 1 N - 检查连接[1_1_DY-02/SqlServer]的数据库架构耗时48ms
20:02:58.136 1 N - Select Top 1 * From report_day Where  createtime >635573088000000000 and createtime<635573952000000000 Order By id Desc
20:02:58.160 1 N - [StoredProcedure]sp_pay[Int32:@sid=1]
20:02:58.182 1 N - SET NOCOUNT ON;Insert Into tgm_record_hours(pid, sid, server_name, online, offline, register, register_total, taday_online, history_online, taday_login, pay_number, pay_count, pay_taday, pay_total, pay_month, createtime) Values(1, 1, N'DY-02', 4, 12, 16, 16, 8, 8, 16, 0, 0, 0, 23020, 23020, 635573809781816831);Select SCOPE_IDENTITY()
20:03:04.731 9 W - [tgm]GetSchema("Tables")
20:03:04.976 9 W - [tgm]GetSchema("Columns")
20:03:05.064 9 W - [tgm]GetSchema("Indexes")
20:03:05.138 9 W - [tgm]GetSchema("IndexColumns")
20:03:05.217 9 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
20:03:05.293 9 W - Select Top 1 * From tgm_role Where name=N'admin' Order By id Desc
20:03:05.363 9 W - Select * From tgm_platform Where id=1
20:03:06.762 8 W - [tgm]GetSchema("Tables")
20:03:07.009 8 W - [tgm]GetSchema("Columns")
20:03:07.095 8 W - [tgm]GetSchema("Indexes")
20:03:07.170 8 W - [tgm]GetSchema("IndexColumns")
20:03:07.248 8 W - select object_name(id) as objname,rows from sysindexes where indid in (0,1) and status in (0,2066)
20:03:07.322 8 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
20:03:07.396 8 W - Select * From tgm_server Where  pid in  (select id from tgm_platform where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3') Order By id Desc
20:03:07.464 8 W - Select * From tgm_platform Where id=1
20:03:07.536 8 W - Select * From tgm_platform Where id=1
20:03:18.556 10 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
20:03:18.694 10 W - Select * From tgm_role Where id=1
20:03:18.853 10 W - [tgm]GetSchema("Tables")
20:03:19.105 10 W - [tgm]GetSchema("Columns")
20:03:19.194 10 W - [tgm]GetSchema("Indexes")
20:03:19.277 10 W - [tgm]GetSchema("IndexColumns")
20:03:19.353 10 W - Select * From tgm_resource Order By id Desc
20:03:19.420 10 W - Select * From tgm_platform Where id in (1) Order By id Desc
20:03:19.497 10 W - Select * From tgm_server Where id in (1) Order By id Desc
20:03:28.338 9 W - Select Top 1 * From tgm_platform Where token='0c372ec3-1b00-4286-84a8-9216e7ab59e3' Order By id Desc
20:03:28.408 9 W - Select * From tgm_platform Order By  createtime desc
